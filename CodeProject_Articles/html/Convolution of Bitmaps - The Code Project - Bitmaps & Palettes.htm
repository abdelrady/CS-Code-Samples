<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- saved from url=(0054)http://www.codeproject.com/bitmap/ImageConvolution.asp -->
<HTML><HEAD><TITLE>Convolution of Bitmaps - The Code Project - Bitmaps & Palettes</TITLE>
<META http-equiv=Content-Type content="text/html; charset=iso-8859-1">
<META content=en-US name=MS.LOCALE>
<META 
content="Article discussing how to convolve images, specificially the convolution of bitmaps." 
name=Description>
<META content=kbArticle name=Search.TopicType>
<META content="Fred Ackers" name=Author>
<META content="26 Mar 2004 14:00:00 GMT" name=Search.PublishDate>
<META content="29 Mar 2006 2:05:00 GMT" name=Search.RevisedDate><!--<meta name="Search.UserRating"  content="86 %" /> -->
<META 
content="Free source code, Bitmaps &amp; Palettes, Visual C++, MFC, Windows, Bitmaps, GDI, Convolution" 
name=keywords>
<META 
content="Article content copyright Fred Ackers, 2004, everthing else Copyright © CodeProject, 1999-2006, All Rights Reserved." 
name=Copyright><LINK title="CodeProject Lounge Postings" 
href="http://www.codeproject.com/webservices/LoungeRSS.aspx" 
type=application/rss+xml rel=alternate><LINK 
title="CodeProject Latest articles - All topics" 
href="http://www.codeproject.com/webservices/articlerss.aspx?cat=1" 
type=application/rss+xml rel=alternate><LINK 
title="CodeProject Latest articles - MFC / C++" 
href="http://www.codeproject.com/webservices/articlerss.aspx?cat=2" 
type=application/rss+xml rel=alternate><LINK 
title="CodeProject Latest articles - C#" 
href="http://www.codeproject.com/webservices/articlerss.aspx?cat=3" 
type=application/rss+xml rel=alternate><LINK 
title="CodeProject Latest articles - ASP.NET" 
href="http://www.codeproject.com/webservices/articlerss.aspx?cat=4" 
type=application/rss+xml rel=alternate><LINK 
title="CodeProject Latest articles - .NET" 
href="http://www.codeproject.com/webservices/articlerss.aspx?cat=5" 
type=application/rss+xml rel=alternate>
<META http-equiv=Reply-to content=mailto:webmaster@codeproject.com><LINK 
href="/favicon.ico" type=image/ico rel=icon><LINK href="/favicon.ico" 
rel="SHORTCUT ICON"><LINK 
href="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/global.css" 
type=text/css rel=stylesheet>
<SCRIPT language=javascript 
src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/oncopy.js"></SCRIPT>

<META content="MSHTML 6.00.2900.2180" name=GENERATOR></HEAD>
<BODY oncopy="return copyCode();" text=black vLink=purple aLink=red link=blue 
bgColor=white leftMargin=3 topMargin=3><!-- COPYRIGHT 2006 I/PRO Corporation ALL RIGHTS RESERVED. - Page view auditing -->
<SCRIPT language=JavaScript>
var LSPT="";
LSPT += "?durl=" + escape(document.URL);
LSPT += "&hostname=" + location.hostname;
LSPT += "&url=" + location.pathname;
LSPT += "&query=" + escape(location.search) + escape(location.hash);
LSPT += "&referrer=" + escape(document.referrer);
LSPT += "&browser=" + escape(navigator.appName);
LSPT += "&version=" + escape(navigator.appVersion);
LSPT += "&os=" + escape(navigator.platform);
LSPT += "&xdomain=codeproject.com";
LSPT += "&custid=codeproject";
</SCRIPT>

<SCRIPT language=Javascript>
document.write('<img src=http://'+'content.ipro.com/images/pixel.gif'+LSPT+' height="1" width="1" style="position:absolute; top:0px; left:0px">');
</SCRIPT>
<NOSCRIPT><IMG style="LEFT: 0px; POSITION: absolute; TOP: 0px" height=1 src="" 
width=1> </NOSCRIPT><!-- END I/PRO PAGE TAG -->
<TABLE cellSpacing=0 cellPadding=0 width="100%" bgColor=#ff9900 border=0>
  <TBODY>
  <TR>
    <TD width="100%">
      <TABLE cellSpacing=1 cellPadding=0 width="100%" bgColor=#ff9900 
        border=0><TBODY>
        <TR>
          <TD vAlign=top><A href="http://www.codeproject.com/"><IMG height=72 
            alt="The Code Project" 
            src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/logo225x72.gif" 
            width=225 border=0></A></TD>
          <TD align=right><SPAN id=AdBanner4>
            <TABLE cellSpacing=0 cellPadding=0>
              <TBODY>
              <TR>
                <TD><A class=AdLink 
                  href="http://www.codeproject.com/script/admentor/ads.asp">View 
                  our advertisers</A></TD>
                <TD align=right><A class=AdLink 
                  href="http://www.codeproject.com/info/mediakit">Advertise with 
                  us</A></TD></TR>
              <TR>
                <TD colSpan=2>
                  <SCRIPT language=javascript>document.write("<a href=\"/script/admentor/admentorredir.asp?id=1810&way=ban\" target=_blank><img src=\"/script/ann/ServeImg.aspx?File=%2Fscript%2Fadmentor%2Fimages%2FToolbox%5F468x60%2Egif&C=False&id=1810&cb=4157071\" alt=\"\" border=0 width=468 height=60></a>");</SCRIPT>
                </TD></TR></TBODY></TABLE></SPAN></TD></TR>
        <TR>
          <TD bgColor=#fbedbb colSpan=2>
            <TABLE cellPadding=3 width="100%" bgColor=#fbedbb border=0>
              <TBODY>
              <TR vAlign=top>
                <TD width="100%"><FONT style="FONT-SIZE: 8pt"><A 
                  href="http://www.codeproject.com/?cat=1">All Topics</A>, <A 
                  href="http://www.codeproject.com/?cat=2">MFC / C++</A> 
                  &gt;&gt; <A href="http://www.codeproject.com/bitmap/">Bitmaps 
                  &amp; Palettes</A> &gt;&gt; <A 
                  href="http://www.codeproject.com/bitmap/#Bitmaps">Bitmaps</A></FONT><BR><BR><B><FONT 
                  style="FONT-SIZE: 16pt" size=4>Convolution of 
                  Bitmaps</FONT></B><BR><B>By <A 
                  href="http://www.codeproject.com/script/profile/whos_who.asp?id=24814">Fred 
                  Ackers</A> </B><BR><BR><FONT style="FONT-SIZE: 9pt">Article 
                  discussing how to convolve images, specificially the 
                  convolution of bitmaps.&nbsp;</FONT> </TD>
                <TD vAlign=top align=right>
                  <TABLE cellSpacing=0 cellPadding=1 width=200 border=0>
                    <TBODY>
                    <TR vAlign=top>
                      <TD>&nbsp;</TD>
                      <TD class=SmallText>C++ (VC6, VC7, VC7.1)<BR>Windows 
                        (Win95, Win98, WinME, Win2K, WinXP, Win2003)<BR>Win32, 
                        VS (VS.NET2003, VS6), MFC<BR>Dev</TD></TR>
                    <TR>
                      <TD>&nbsp;</TD>
                      <TD class=SmallText noWrap>Posted 27 Mar 2004 0:00</TD></TR>
                    <TR>
                      <TD>&nbsp;</TD>
                      <TD class=SmallText>Updated 29 Mar 2006 12:05</TD></TR>
                    <TR vAlign=top>
                      <TD><IMG height=16 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/hlp.gif" 
                        width=16></TD>
                      <TD class=SmallText noWrap><A 
                        href="http://www.codeproject.com/script/Articles/list_articles.asp?userid=24814">Articles 
                        by this author</A></TD></TR>
                    <TR vAlign=top>
                      <TD></TD>
                      <TD class=SmallText noWrap><B>41,796</B> 
                    views</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
        <TR>
          <TD colSpan=2>
            <TABLE id=tblSiteToolbar cellSpacing=0 cellPadding=1 width="100%" 
            border=0>
              <TBODY>
              <TR>
                <FORM name=Search action=/info/search.asp method=post>
                <TD vAlign=top align=left width="100%">
                  <TABLE cellSpacing=0 cellPadding=1 border=0>
                    <TBODY>
                    <TR vAlign=center>
                      <TD class=smallText><B><FONT 
                        color=white>Search:</FONT></B></TD>
                      <TD class=navbar noWrap><INPUT class=smallText 
                        maxLength=255 size=18 name=target></TD>
                      <TD vAlign=top><SELECT class=smallText name=st> 
                          <OPTION value=kw selected>Articles</OPTION> <OPTION 
                          value=au>Authors</OPTION></SELECT></TD>
                      <TD><INPUT class=formButton type=submit value=Go></TD></TR></TBODY></TABLE></TD></FORM>
                <TD>
                  <DIV id=MenuPos 
                  style="WIDTH: 380px; POSITION: relative; HEIGHT: 20px">
                  <TABLE height=20 cellSpacing=0 cellPadding=2 width=375>
                    <TBODY>
                    <TR>
                      <TD><A class=NavMenuItem 
                        href="http://www.codeproject.com/info/faq.asp">Help!</A></TD>
                      <TD><A class=NavMenuItem 
                        href="http://www.codeproject.com/info/latest.asp">Articles</A></TD>
                      <TD><A class=NavMenuItem 
                        href="http://www.codeproject.com/script/comments/forums.asp">Message 
                        Boards</A></TD>
                      <TD><A class=NavMenuItem 
                        href="http://www.codeproject.com/store/">StoreFront</A></TD>
                      <TD><A class=NavMenuItem 
                        href="http://www.codeproject.com/lounge.asp">Lounge</A></TD></TR></TBODY></TABLE></DIV></TD></TR></TBODY></TABLE>
            <SCRIPT type=text/javascript>function Go(){return}</SCRIPT>

            <SCRIPT 
            src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/cpmenu_var.js" 
            type=text/javascript></SCRIPT>

            <SCRIPT 
            src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/menu10_com.js" 
            type=text/javascript></SCRIPT>
          </TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=1 border=0>
  <TBODY>
  <TR vAlign=top>
    <TD vAlign=top bgColor=#fbedbb rowSpan=2>
      <TABLE cellSpacing=0 cellPadding=0 border=0>
        <SCRIPT language=javascript>
function ErrorHandle() {}
window.onerror = ErrorHandle;

function OnNLSubmit(option)
{
	if (option=="up")
		document.subForm.action = "/script/profile/modify.asp?ct=%2Fbitmap%2FImageConvolution%2Easp";
	else if (option=="in")
		document.subForm.action = "/script/profile/process_logon.asp?ct=%2Fbitmap%2FImageConvolution%2Easp";
	document.subForm.submit();
	return true;
}
</SCRIPT>

        <TBODY>
        <TR>
          <TD>
            <TABLE cellSpacing=3 cellPadding=0>
              <TBODY>
              <TR vAlign=top>
                <TD></TD>
                <TD></TD></TR>
              <TR vAlign=top>
                <TD><IMG height=16 
                  src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/support_icon.gif" 
                  width=16></TD>
                <TD class=smallText><A 
                  href="http://www.codeproject.com/store/"><B>Ultimate 
                  Combo<BR>MFC tools $449</B></A></TD></TR>
              <TR vAlign=top>
                <TD></TD>
                <TD></TD></TR></TR>
              <TR vAlign=top>
                <TD><IMG height=16 
                  src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/mail.gif" 
                  width=16></TD>
                <TD class=SmallText><A 
                  href="http://www.codeproject.com/script/recommend/form.asp?guid=ImageConvolution%2Fbitmap3%2F27%2F2004">Send 
                  to a friend</A></TD></TR>
              <TR vAlign=top>
                <TD></TD>
                <TD></TD></TR>
              <TR vAlign=top>
                <TD></TD>
                <TD class=InfoBarHeader>My Profile</TD></TR>
              <TR>
                <TD bgColor=black colSpan=2><IMG height=1 
                  src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/space.gif" 
                  width=1></TD></TR>
              <TR vAlign=top>
                <TD><IMG height=16 
                  src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/profile_small.gif" 
                  width=16></TD>
                <TD class=smallText><A 
                  href="http://www.codeproject.com/script/profile/modify.asp?ct=/bitmap/ImageConvolution.asp">My 
                  Settings</A></TD></TR>
              <TR vAlign=top>
                <TD><IMG height=16 
                  src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/submit_small.gif" 
                  width=16></TD>
                <TD class=smallText><A 
                  href="http://www.codeproject.com/script/articles/list_articles.asp?userid=2959938">My 
                  Articles</A></TD></TR>
              <TR vAlign=top>
                <TD><IMG height=16 
                  src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/bookmarks.gif" 
                  width=16></TD>
                <TD class=smallText><A 
                  href="http://www.codeproject.com/script/profile/bookmark_list.asp">My 
                  Bookmarks</A></TD></TR>
              <TR vAlign=top>
                <TD><IMG height=16 
                  src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/logoff_small.gif" 
                  width=16></TD>
                <TD class=smallText><A 
                  href="http://www.codeproject.com/script/profile/logoff.asp?ct=/bitmap/ImageConvolution.asp">Sign 
                  out</A></TD></TR>
              <TR>
                <TD bgColor=black colSpan=2><IMG height=1 
                  src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/space.gif" 
                  width=1></TD></TR></TBODY></TABLE></TD></TR>
        <TR>
          <TD>&nbsp;</TD></TR>
        <TR>
          <TD>
            <CENTER>
            <SCRIPT language=javascript>document.write("<a href=\"/script/admentor/admentorredir.asp?id=1727&way=ban\" target=_blank><img src=\"/script/ann/ServeImg.aspx?File=%2Fscript%2Fadmentor%2Fimages%2Fmainsoft%5F120x600%5Fgrasshopper%2Egif&C=False&id=1727&cb=4157076\" alt=\"Visual Studio .NET on Linux\" border=0 width=120 height=600></a>");</SCRIPT>
            <BR></CENTER><BR></TD></TR></TBODY></TABLE></TD>
    <TD width=5 rowSpan=2><IMG height=1 
      src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/space.gif" 
      width=5> </TD>
    <TD align=right width="100%" bgColor=white>
      <TABLE width="100%">
        <TBODY>
        <TR vAlign=top>
          <TD class=smallText vAlign=top noWrap>
            <TABLE>
              <TBODY>
              <TR>
                <TD class=smallText bgColor=#ffffff><IMG 
                  src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/print.gif" 
                  align=absMiddle> <A 
                  href="http://www.codeproject.com/bitmap/ImageConvolution.asp?print=true" 
                  target=_print>Print</A></TD>
                <TD class=smallText bgColor=#ffffff><IMG 
                  src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/sitebuild_icon.gif" 
                  align=absMiddle><A 
                  href="http://www.codeproject.com/script/submit/ReportProblem.asp?GUID=ImageConvolution%2Fbitmap3%2F27%2F2004">Broken 
                  Article?</A></TD>
                <TD class=smallText bgColor=#ffffff><IMG 
                  src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/link.gif" 
                  align=absMiddle><A 
                  href="http://www.codeproject.com/script/profile/add_bookmark.asp?t=0&amp;ct=%2Fbitmap%2FImageConvolution%2Easp&amp;guid=ImageConvolution%2Fbitmap3%2F27%2F2004">Bookmark</A></TD>
                <TD class=smallText bgColor=#ffffff><IMG 
                  src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/mail_small.gif" 
                  align=absMiddle> <A 
                  href="http://www.codeproject.com/bitmap/ImageConvolution.asp#__comments">Discuss</A></TD></TR></TBODY></TABLE></TD>
          <TD noWrap align=right><A name=__top></A>
            <TABLE>
              <TBODY>
              <TR>
                <TD class=smallText align=right>25 votes for this article.</TD>
                <TD>
                  <TABLE cellSpacing=0 cellPadding=0 border=2>
                    <TBODY>
                    <TR>
                      <TD><IMG height=5 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/red.gif" 
                        width=20 border=0></TD>
                      <TD><IMG height=5 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/red.gif" 
                        width=20 border=0></TD>
                      <TD><IMG height=5 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/red.gif" 
                        width=20 border=0></TD>
                      <TD><IMG height=5 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/red.gif" 
                        width=12 border=0><IMG height=5 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/white.gif" 
                        width=8 border=0></TD>
                      <TD><IMG height=5 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/white.gif" 
                        width=20 border=0></TD></TR></TBODY></TABLE></TD></TR>
              <TR>
                <TD class=smallText align=right colSpan=2><A 
                  title="Calculated as rating x Log10(# votes)" 
                  href="http://www.codeproject.com/script/articles/top_articles.asp?st=2">Popularity: 
                  5.04</A>. Rating: <B>3.61</B> out of 
        5.</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD vAlign=top width="100%">
      <UL style="MARGIN-RIGHT: 20px; BACKGROUND-COLOR: #eeeeee">
        <LI 
        style="FONT-SIZE: 8pt; LIST-STYLE-IMAGE: url(/images/warning.gif)">You 
        are signed up for one or more <A 
        href="http://www.codeproject.com/script/profile/subscribe.asp">newsletters</A> 
        but unfortunately we are unable to send you emails. Please click <A 
        href="http://www.codeproject.com/script/profile/SendConfirmRequest.asp">here</A> 
        to have an email sent that will allow us to confirm your email 
        address.</LI></UL>
      <DIV id=contentdiv><!-- Article Starts -->
      <UL class=download>
        <LI><A 
        href="http://www.codeproject.com/bitmap/ImageConvolution/ImageConvolution.zip">Download 
        demo project - 29.4 Kb</A> </LI></UL>
      <H2>Introduction</H2>
      <P>Image convolution plays an important role in computer graphics 
      applications. Convolution of images allows for image alterations that 
      enable the creation of new images from old ones. Convolution also allows 
      for important features such as edge detection, with many widespread uses. 
      The convolution of an image is a simple process by which the pixel of an 
      image is multiplied by a kernel, or masked, to create a new pixel value. 
      Convolution is commonly referred to as filtering.</P>
      <H2>Details</H2>
      <P>First, for a given pixel (x,y), we give a weight to each of the 
      surrounding pixels. It may be thought of as giving a number telling how 
      important the pixel is to us. The number may be any integer or floating 
      point number, though I usually stick to floating point since floats will 
      accept integers as well. The kernel or mask that contains the filter may 
      actually be any size (3x3, 5x5, 7x7); however, 3x3 is very common. Since 
      the process for each is the same, I will concentrate only on the 3x3 
      kernels.</P>
      <P>Second, the actual process of convolution involves getting each pixel 
      near a given pixel (x,y), and multiplying each of the pixel's channels by 
      the weighted kernel value. This means that for a 3x3 kernel, we would 
      multiply the pixels like so:</P><PRE lang=text>(x-1,y-1)       *       kernel_value[row0][col0]
(x  ,y-1)       *       kernel_value[row0][col1]
(x+1,y-1)       *       kernel_value[row0][col2]
(x-1,y  )       *       kernel_value[row1][col0]
(x  ,y  )       *       kernel_value[row1][col1]
(x+1,y  )       *       kernel_value[row1][col2]
(x-1,y+1)       *       kernel_value[row2][col0]
(x  ,y+1)       *       kernel_value[row2][col1]
(x+1,y+1)       *       kernel_value[row2][col2]</PRE>
      <P>The process is repeated for each channel of the image. This means that 
      the red, green, and blue color channels (if working in RGB color space) 
      must each be multiplied by the kernel values. The kernel position is 
      related to the pixel position it is multiplied by. Simply put, the kernel 
      is allocated in <CODE>kernel[rows][cols]</CODE>, which would be 
      <CODE>kernel[<SPAN class=cpp-literal>3</SPAN>][<SPAN 
      class=cpp-literal>3</SPAN>]</CODE> in this case. The 3x3 (5x5 or 7x7, if 
      using a larger kernel) area around the pixel (x,y) is then multiplied by 
      the kernel to get the total sum. If we were working with a 100x100 image, 
      allocated as <CODE>image[<SPAN class=cpp-literal>100</SPAN>][<SPAN 
      class=cpp-literal>100</SPAN>]</CODE>, and we wanted the value for pixel 
      (10,10), the process for each channel would look like:</P><PRE><SPAN class=cpp-keyword>float</SPAN> fTotalSum =
 Pixel(<SPAN class=cpp-literal>10</SPAN>-<SPAN class=cpp-literal>1</SPAN>,<SPAN class=cpp-literal>10</SPAN>-<SPAN class=cpp-literal>1</SPAN>)       *       kernel_value[row0][col0] +
 Pixel(<SPAN class=cpp-literal>10</SPAN>  ,<SPAN class=cpp-literal>10</SPAN>-<SPAN class=cpp-literal>1</SPAN>)       *       kernel_value[row0][col1] +
 Pixel(<SPAN class=cpp-literal>10</SPAN>+<SPAN class=cpp-literal>1</SPAN>,<SPAN class=cpp-literal>10</SPAN>-<SPAN class=cpp-literal>1</SPAN>)       *       kernel_value[row0][col2] +
 Pixel(<SPAN class=cpp-literal>10</SPAN>-<SPAN class=cpp-literal>1</SPAN>,<SPAN class=cpp-literal>10</SPAN>  )       *       kernel_value[row1][col0] +
 Pixel(<SPAN class=cpp-literal>10</SPAN>  ,<SPAN class=cpp-literal>10</SPAN>  )       *       kernel_value[row1][col1] +
 Pixel(<SPAN class=cpp-literal>10</SPAN>+<SPAN class=cpp-literal>1</SPAN>,<SPAN class=cpp-literal>10</SPAN>  )       *       kernel_value[row1][col2] +
 Pixel(<SPAN class=cpp-literal>10</SPAN>-<SPAN class=cpp-literal>1</SPAN>,<SPAN class=cpp-literal>10</SPAN>+<SPAN class=cpp-literal>1</SPAN>)       *       kernel_value[row2][col0] +
 Pixel(<SPAN class=cpp-literal>10</SPAN>  ,<SPAN class=cpp-literal>10</SPAN>+<SPAN class=cpp-literal>1</SPAN>)       *       kernel_value[row2][col1] +
 Pixel(<SPAN class=cpp-literal>10</SPAN>+<SPAN class=cpp-literal>1</SPAN>,<SPAN class=cpp-literal>10</SPAN>+<SPAN class=cpp-literal>1</SPAN>)       *       kernel_value[row2][col2] +</PRE>
      <P>Finally, each value is added to the total sum, which is then divided by 
      the total weight of the kernel. The kernel's weight is given by adding 
      each value contained in the kernel. If the value is zero or less, then a 
      weight of 1 is given to avoid a division by zero.</P>
      <P>The actual code to convolve an image is:</P><PRE><SPAN class=cpp-keyword>for</SPAN> (<SPAN class=cpp-keyword>int</SPAN> i=<SPAN class=cpp-literal>0</SPAN>; i &lt;= <SPAN class=cpp-literal>2</SPAN>; i++)<SPAN class=cpp-comment>//loop through rows</SPAN>
{
    <SPAN class=cpp-keyword>for</SPAN> (<SPAN class=cpp-keyword>int</SPAN> j=<SPAN class=cpp-literal>0</SPAN>; j &lt;= <SPAN class=cpp-literal>2</SPAN>; j++)<SPAN class=cpp-comment>//loop through columns</SPAN>
    {
        <SPAN class=cpp-comment>//get pixel near source pixel</SPAN>
        <SPAN class=cpp-comment>/*
        if x,y is source pixel then we loop through and
        get pixels at coordinates:
        x-1,y-1
        x-1,y
        x-1,y+1
        x,y-1
        x,y
        x,y+1
        x+1,y-1
        x+1,y
        x+1,y+1
        */</SPAN>
        COLORREF tmpPixel = pDC-&gt;GetPixel(sourcex+(i-(<SPAN class=cpp-literal>2</SPAN>&gt;&gt;<SPAN class=cpp-literal>1</SPAN>)),
                                              sourcey+(j-(<SPAN class=cpp-literal>2</SPAN>&gt;&gt;<SPAN class=cpp-literal>1</SPAN>)));
        <SPAN class=cpp-comment>//get kernel value</SPAN>
        <SPAN class=cpp-keyword>float</SPAN> fKernel = kernel[i][j];
        <SPAN class=cpp-comment>//multiply each channel by kernel value, and add to sum</SPAN>
        <SPAN class=cpp-comment>//notice how each channel is treated separately</SPAN>
        rSum += (GetRValue(tmpPixel)*fKernel);
        gSum += (GetGValue(tmpPixel)*fKernel);
        bSum += (GetBValue(tmpPixel)*fKernel);
        <SPAN class=cpp-comment>//add the kernel value to the kernel sum</SPAN>
        kSum += fKernel;
    }
}
<SPAN class=cpp-comment>//if kernel sum is less than 0, reset to 1 to avoid divide by zero</SPAN>
<SPAN class=cpp-keyword>if</SPAN> (kSum &lt;= <SPAN class=cpp-literal>0</SPAN>)
    kSum = <SPAN class=cpp-literal>1</SPAN>;
<SPAN class=cpp-comment>//divide each channel by kernel sum</SPAN>
rSum/=kSum;
gSum/=kSum;
bSum/=kSum;</PRE>
      <P>The source code included performs some common image convolutions. Also 
      included is a Convolve Image menu option that allows users to enter their 
      own kernel. Common 3x3 kernels include:</P><PRE>gaussianBlur[<SPAN class=cpp-literal>3</SPAN>][<SPAN class=cpp-literal>3</SPAN>] = {<SPAN class=cpp-literal>0.045</SPAN>, <SPAN class=cpp-literal>0.122</SPAN>, <SPAN class=cpp-literal>0.045</SPAN>, <SPAN class=cpp-literal>0.122</SPAN>, 
  <SPAN class=cpp-literal>0.332</SPAN>, <SPAN class=cpp-literal>0.122</SPAN>, <SPAN class=cpp-literal>0.045</SPAN>, <SPAN class=cpp-literal>0.122</SPAN>, <SPAN class=cpp-literal>0.045</SPAN>};
gaussianBlur2[<SPAN class=cpp-literal>3</SPAN>][<SPAN class=cpp-literal>3</SPAN>] = {<SPAN class=cpp-literal>1</SPAN>, <SPAN class=cpp-literal>2</SPAN>, <SPAN class=cpp-literal>1</SPAN>, <SPAN class=cpp-literal>2</SPAN>, <SPAN class=cpp-literal>4</SPAN>, <SPAN class=cpp-literal>2</SPAN>, <SPAN class=cpp-literal>1</SPAN>, <SPAN class=cpp-literal>2</SPAN>, <SPAN class=cpp-literal>1</SPAN>};
gaussianBlur3[<SPAN class=cpp-literal>3</SPAN>][<SPAN class=cpp-literal>3</SPAN>] = {<SPAN class=cpp-literal>0</SPAN>, <SPAN class=cpp-literal>1</SPAN>, <SPAN class=cpp-literal>0</SPAN>, <SPAN class=cpp-literal>1</SPAN>, <SPAN class=cpp-literal>1</SPAN>, <SPAN class=cpp-literal>1</SPAN>, <SPAN class=cpp-literal>0</SPAN>, <SPAN class=cpp-literal>1</SPAN>, <SPAN class=cpp-literal>0</SPAN>};
unsharpen[<SPAN class=cpp-literal>3</SPAN>][<SPAN class=cpp-literal>3</SPAN>] = {-<SPAN class=cpp-literal>1</SPAN>, -<SPAN class=cpp-literal>1</SPAN>, -<SPAN class=cpp-literal>1</SPAN>, -<SPAN class=cpp-literal>1</SPAN>, <SPAN class=cpp-literal>9</SPAN>, -<SPAN class=cpp-literal>1</SPAN>, -<SPAN class=cpp-literal>1</SPAN>, -<SPAN class=cpp-literal>1</SPAN>, -<SPAN class=cpp-literal>1</SPAN>};
sharpness[<SPAN class=cpp-literal>3</SPAN>][<SPAN class=cpp-literal>3</SPAN>] = {<SPAN class=cpp-literal>0</SPAN>,-<SPAN class=cpp-literal>1</SPAN>,<SPAN class=cpp-literal>0</SPAN>,-<SPAN class=cpp-literal>1</SPAN>,<SPAN class=cpp-literal>5</SPAN>,-<SPAN class=cpp-literal>1</SPAN>,<SPAN class=cpp-literal>0</SPAN>,-<SPAN class=cpp-literal>1</SPAN>,<SPAN class=cpp-literal>0</SPAN>};
sharpen[<SPAN class=cpp-literal>3</SPAN>][<SPAN class=cpp-literal>3</SPAN>] = {-<SPAN class=cpp-literal>1</SPAN>, -<SPAN class=cpp-literal>1</SPAN>, -<SPAN class=cpp-literal>1</SPAN>, -<SPAN class=cpp-literal>1</SPAN>, <SPAN class=cpp-literal>16</SPAN>, -<SPAN class=cpp-literal>1</SPAN>, -<SPAN class=cpp-literal>1</SPAN>, -<SPAN class=cpp-literal>1</SPAN>, -<SPAN class=cpp-literal>1</SPAN>};
edgeDetect[<SPAN class=cpp-literal>3</SPAN>][<SPAN class=cpp-literal>3</SPAN>] = {-<SPAN class=cpp-literal>0.125</SPAN>, -<SPAN class=cpp-literal>0.125</SPAN>, -<SPAN class=cpp-literal>0.125</SPAN>, -<SPAN class=cpp-literal>0.125</SPAN>, 
  <SPAN class=cpp-literal>1</SPAN>, -<SPAN class=cpp-literal>0.125</SPAN>, -<SPAN class=cpp-literal>0.125</SPAN>, -<SPAN class=cpp-literal>0.125</SPAN>, -<SPAN class=cpp-literal>0.125</SPAN>};
edgeDetect2[<SPAN class=cpp-literal>3</SPAN>][<SPAN class=cpp-literal>3</SPAN>] = {-<SPAN class=cpp-literal>1</SPAN>, -<SPAN class=cpp-literal>1</SPAN>, -<SPAN class=cpp-literal>1</SPAN>, -<SPAN class=cpp-literal>1</SPAN>, <SPAN class=cpp-literal>8</SPAN>, -<SPAN class=cpp-literal>1</SPAN>, -<SPAN class=cpp-literal>1</SPAN>, -<SPAN class=cpp-literal>1</SPAN>, -<SPAN class=cpp-literal>1</SPAN>};
edgeDetect3[<SPAN class=cpp-literal>3</SPAN>][<SPAN class=cpp-literal>3</SPAN>] = {-<SPAN class=cpp-literal>5</SPAN>, <SPAN class=cpp-literal>0</SPAN>, <SPAN class=cpp-literal>0</SPAN>, <SPAN class=cpp-literal>0</SPAN>, <SPAN class=cpp-literal>0</SPAN>, <SPAN class=cpp-literal>0</SPAN>, <SPAN class=cpp-literal>0</SPAN>, <SPAN class=cpp-literal>0</SPAN>, <SPAN class=cpp-literal>5</SPAN>};
edgeDetect4[<SPAN class=cpp-literal>3</SPAN>][<SPAN class=cpp-literal>3</SPAN>] = {-<SPAN class=cpp-literal>1</SPAN>, -<SPAN class=cpp-literal>1</SPAN>, -<SPAN class=cpp-literal>1</SPAN>, <SPAN class=cpp-literal>0</SPAN>, <SPAN class=cpp-literal>0</SPAN>, <SPAN class=cpp-literal>0</SPAN>, <SPAN class=cpp-literal>1</SPAN>, <SPAN class=cpp-literal>1</SPAN>, <SPAN class=cpp-literal>1</SPAN>};
edgeDetect5[<SPAN class=cpp-literal>3</SPAN>][<SPAN class=cpp-literal>3</SPAN>] = {-<SPAN class=cpp-literal>1</SPAN>, -<SPAN class=cpp-literal>1</SPAN>, -<SPAN class=cpp-literal>1</SPAN>, <SPAN class=cpp-literal>2</SPAN>, <SPAN class=cpp-literal>2</SPAN>, <SPAN class=cpp-literal>2</SPAN>, -<SPAN class=cpp-literal>1</SPAN>, -<SPAN class=cpp-literal>1</SPAN>, -<SPAN class=cpp-literal>1</SPAN>};
edgeDetect6[<SPAN class=cpp-literal>3</SPAN>][<SPAN class=cpp-literal>3</SPAN>] = {-<SPAN class=cpp-literal>5</SPAN>, -<SPAN class=cpp-literal>5</SPAN>, -<SPAN class=cpp-literal>5</SPAN>, -<SPAN class=cpp-literal>5</SPAN>, <SPAN class=cpp-literal>39</SPAN>, -<SPAN class=cpp-literal>5</SPAN>, -<SPAN class=cpp-literal>5</SPAN>, -<SPAN class=cpp-literal>5</SPAN>, -<SPAN class=cpp-literal>5</SPAN>};
sobelHorizontal[<SPAN class=cpp-literal>3</SPAN>][<SPAN class=cpp-literal>3</SPAN>] = {<SPAN class=cpp-literal>1</SPAN>, <SPAN class=cpp-literal>2</SPAN>, <SPAN class=cpp-literal>1</SPAN>, <SPAN class=cpp-literal>0</SPAN>, <SPAN class=cpp-literal>0</SPAN>, <SPAN class=cpp-literal>0</SPAN>, -<SPAN class=cpp-literal>1</SPAN>, -<SPAN class=cpp-literal>2</SPAN>, -<SPAN class=cpp-literal>1</SPAN> };
sobelVertical[<SPAN class=cpp-literal>3</SPAN>][<SPAN class=cpp-literal>3</SPAN>] = {<SPAN class=cpp-literal>1</SPAN>, <SPAN class=cpp-literal>0</SPAN>, -<SPAN class=cpp-literal>1</SPAN>, <SPAN class=cpp-literal>2</SPAN>, <SPAN class=cpp-literal>0</SPAN>, -<SPAN class=cpp-literal>2</SPAN>, <SPAN class=cpp-literal>1</SPAN>, <SPAN class=cpp-literal>0</SPAN>, -<SPAN class=cpp-literal>1</SPAN> };
previtHorizontal[<SPAN class=cpp-literal>3</SPAN>][<SPAN class=cpp-literal>3</SPAN>] = {<SPAN class=cpp-literal>1</SPAN>, <SPAN class=cpp-literal>1</SPAN>, <SPAN class=cpp-literal>1</SPAN>, <SPAN class=cpp-literal>0</SPAN>, <SPAN class=cpp-literal>0</SPAN>, <SPAN class=cpp-literal>0</SPAN>, -<SPAN class=cpp-literal>1</SPAN>, -<SPAN class=cpp-literal>1</SPAN>, -<SPAN class=cpp-literal>1</SPAN> };
previtVertical[<SPAN class=cpp-literal>3</SPAN>][<SPAN class=cpp-literal>3</SPAN>] = {<SPAN class=cpp-literal>1</SPAN>, <SPAN class=cpp-literal>0</SPAN>, -<SPAN class=cpp-literal>1</SPAN>, <SPAN class=cpp-literal>1</SPAN>, <SPAN class=cpp-literal>0</SPAN>, -<SPAN class=cpp-literal>1</SPAN>, <SPAN class=cpp-literal>1</SPAN>, <SPAN class=cpp-literal>0</SPAN>, -<SPAN class=cpp-literal>1</SPAN>};
boxBlur[<SPAN class=cpp-literal>3</SPAN>][<SPAN class=cpp-literal>3</SPAN>] = {<SPAN class=cpp-literal>0</SPAN>.111f, <SPAN class=cpp-literal>0</SPAN>.111f, <SPAN class=cpp-literal>0</SPAN>.111f, <SPAN class=cpp-literal>0</SPAN>.111f, 
  <SPAN class=cpp-literal>0</SPAN>.111f, <SPAN class=cpp-literal>0</SPAN>.111f, <SPAN class=cpp-literal>0</SPAN>.111f, <SPAN class=cpp-literal>0</SPAN>.111f, <SPAN class=cpp-literal>0</SPAN>.111f};
triangleBlur[<SPAN class=cpp-literal>3</SPAN>][<SPAN class=cpp-literal>3</SPAN>] = { <SPAN class=cpp-literal>0.0625</SPAN>, <SPAN class=cpp-literal>0.125</SPAN>, <SPAN class=cpp-literal>0.0625</SPAN>, 
  <SPAN class=cpp-literal>0.125</SPAN>, <SPAN class=cpp-literal>0.25</SPAN>, <SPAN class=cpp-literal>0.125</SPAN>, <SPAN class=cpp-literal>0.0625</SPAN>, <SPAN class=cpp-literal>0.125</SPAN>, <SPAN class=cpp-literal>0.0625</SPAN>};</PRE>
      <P>Last but not least is the ability to show a convoluted image as a 
      grayscale result. In order to display a filtered image as grayscale, we 
      just add a couple lines to the bottom of the <CODE>Convolve</CODE> 
      function:</P><PRE><SPAN class=cpp-comment>//return new pixel value</SPAN>
<SPAN class=cpp-keyword>if</SPAN> (bGrayscale)
{
    <SPAN class=cpp-keyword>int</SPAN> grayscale=<SPAN class=cpp-literal>0.299</SPAN>*rSum + <SPAN class=cpp-literal>0.587</SPAN>*gSum + <SPAN class=cpp-literal>0.114</SPAN>*bSum;
    rSum=grayscale;
    gSum=grayscale;
    bSum=grayscale;
}

clrReturn = RGB(rSum,gSum,bSum);</PRE>
      <P>This means that the entire <CODE>Convolve</CODE> function now looks 
      like:</P><PRE>COLORREF CImageConvolutionView::Convolve(CDC* pDC, <SPAN class=cpp-keyword>int</SPAN> sourcex, 
    <SPAN class=cpp-keyword>int</SPAN> sourcey, <SPAN class=cpp-keyword>float</SPAN> kernel[<SPAN class=cpp-literal>3</SPAN>][<SPAN class=cpp-literal>3</SPAN>], <SPAN class=cpp-keyword>int</SPAN> nBias,BOOL bGrayscale)
{
    <SPAN class=cpp-keyword>float</SPAN> rSum = <SPAN class=cpp-literal>0</SPAN>, gSum = <SPAN class=cpp-literal>0</SPAN>, bSum = <SPAN class=cpp-literal>0</SPAN>, kSum = <SPAN class=cpp-literal>0</SPAN>;
    COLORREF clrReturn = RGB(<SPAN class=cpp-literal>0</SPAN>,<SPAN class=cpp-literal>0</SPAN>,<SPAN class=cpp-literal>0</SPAN>);
    <SPAN class=cpp-keyword>for</SPAN> (<SPAN class=cpp-keyword>int</SPAN> i=<SPAN class=cpp-literal>0</SPAN>; i &lt;= <SPAN class=cpp-literal>2</SPAN>; i++)<SPAN class=cpp-comment>//loop through rows</SPAN>
    {
        <SPAN class=cpp-keyword>for</SPAN> (<SPAN class=cpp-keyword>int</SPAN> j=<SPAN class=cpp-literal>0</SPAN>; j &lt;= <SPAN class=cpp-literal>2</SPAN>; j++)<SPAN class=cpp-comment>//loop through columns</SPAN>
        {
            <SPAN class=cpp-comment>//get pixel near source pixel</SPAN>
            <SPAN class=cpp-comment>/*
            if x,y is source pixel then we loop 
            through and get pixels at coordinates:
            x-1,y-1
            x-1,y
            x-1,y+1
            x,y-1
            x,y
            x,y+1
            x+1,y-1
            x+1,y
            x+1,y+1
            */</SPAN>
            COLORREF tmpPixel = pDC-&gt;GetPixel(sourcex+(i-(<SPAN class=cpp-literal>2</SPAN>&gt;&gt;<SPAN class=cpp-literal>1</SPAN>)),
                sourcey+(j-(<SPAN class=cpp-literal>2</SPAN>&gt;&gt;<SPAN class=cpp-literal>1</SPAN>)));
            <SPAN class=cpp-comment>//get kernel value</SPAN>
            <SPAN class=cpp-keyword>float</SPAN> fKernel = kernel[i][j];
            <SPAN class=cpp-comment>//multiply each channel by kernel value, and add to sum</SPAN>
            <SPAN class=cpp-comment>//notice how each channel is treated separately</SPAN>
            rSum += (GetRValue(tmpPixel)*fKernel);
            gSum += (GetGValue(tmpPixel)*fKernel);
            bSum += (GetBValue(tmpPixel)*fKernel);
            <SPAN class=cpp-comment>//add the kernel value to the kernel sum</SPAN>
            kSum += fKernel;
        }
    }
    <SPAN class=cpp-comment>//if kernel sum is less than 0, reset to 1 to avoid divide by zero</SPAN>
    <SPAN class=cpp-keyword>if</SPAN> (kSum &lt;= <SPAN class=cpp-literal>0</SPAN>)
        kSum = <SPAN class=cpp-literal>1</SPAN>;
    <SPAN class=cpp-comment>//divide each channel by kernel sum</SPAN>
    rSum/=kSum;
    gSum/=kSum;
    bSum/=kSum;
    <SPAN class=cpp-comment>//add bias if desired</SPAN>
    rSum += nBias;
    gSum += nBias;
    bSum += nBias;
    <SPAN class=cpp-comment>//prevent channel overflow by clamping to 0..255</SPAN>
    <SPAN class=cpp-keyword>if</SPAN> (rSum &gt; <SPAN class=cpp-literal>255</SPAN>)
        rSum = <SPAN class=cpp-literal>255</SPAN>;
    <SPAN class=cpp-keyword>else</SPAN> <SPAN class=cpp-keyword>if</SPAN> (rSum &lt; <SPAN class=cpp-literal>0</SPAN>)
        rSum = <SPAN class=cpp-literal>0</SPAN>;
    <SPAN class=cpp-keyword>if</SPAN> (gSum &gt; <SPAN class=cpp-literal>255</SPAN>)
        gSum = <SPAN class=cpp-literal>255</SPAN>;
    <SPAN class=cpp-keyword>else</SPAN> <SPAN class=cpp-keyword>if</SPAN> (gSum &lt; <SPAN class=cpp-literal>0</SPAN>)
        gSum = <SPAN class=cpp-literal>0</SPAN>;
    <SPAN class=cpp-keyword>if</SPAN> (bSum &gt; <SPAN class=cpp-literal>255</SPAN>)
        bSum = <SPAN class=cpp-literal>255</SPAN>;
    <SPAN class=cpp-keyword>else</SPAN> <SPAN class=cpp-keyword>if</SPAN> (bSum &lt; <SPAN class=cpp-literal>0</SPAN>)
        bSum = <SPAN class=cpp-literal>0</SPAN>;
    <SPAN class=cpp-comment>//return new pixel value</SPAN>
    <SPAN class=cpp-keyword>if</SPAN> (bGrayscale)
    {
        <SPAN class=cpp-keyword>int</SPAN> grayscale=<SPAN class=cpp-literal>0.299</SPAN>*rSum + <SPAN class=cpp-literal>0.587</SPAN>*gSum + <SPAN class=cpp-literal>0.114</SPAN>*bSum;
        rSum=grayscale;
        gSum=grayscale;
        bSum=grayscale;
    }

    clrReturn = RGB(rSum,gSum,bSum);
    <SPAN class=cpp-keyword>return</SPAN> clrReturn;
}</PRE>
      <P>Last but not least, I did a little tweaking to get the program to load 
      a default image from a resource (<CODE>IDB_BITMAP1</CODE>). Then, I added 
      the ability to convolve this default image. The program will still load 
      image from a file, the only difference is that it will now show a default 
      image at startup.</P>
      <P>Please note that this article is, by no means, an example of fast 
      processing of pixels. It is merely meant to show how convolution 
      <B>can</B> be done on images. If you would like a more advanced image 
      processor, then feel free to email me with the subject "WANT 
      CODE:ImageEdit Please". That is an unreleased image processor I have done, 
      though parts are not implemented yet due to lack of time, that contains 
      much more functionality, using the CxImage library as its basis for 
      reading and saving images.</P><!-- Article Ends --></DIV>
      <H2>About Fred Ackers</H2>
      <TABLE width="100%" border=0>
        <TBODY>
        <TR vAlign=top>
          <TD class=smallText noWrap><IMG 
            src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/{7BC68564-16D4-4B28-B138-ABC040157FC6}.jpg"><BR><A 
            href="http://www.codeproject.com/info/supporter.asp#supporters"><IMG 
            height=64 alt="CodeProject Supporter" 
            src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/Supporter.gif" 
            width=48 border=0></A> </TD>
          <TD class=smallText width="100%">Programming using MFC for five 
            years now. Currently studying Graphics in 2D and 3D programs as well 
            as image processing. Previously worked on DSP and the use of FFT for 
            audio application. Programmed using ADO, ODBC, ATL, COM, MFC for 
            shell interfacing, databasing tasks, Internet items, and 
            customization programs.
            <P class=smallText>Click <A 
            href="http://www.codeproject.com/script/profile/whos_who.asp?vt=arts&amp;id=24814">here</A> 
            to view Fred Ackers's online profile.</P></TD></TR></TBODY></TABLE><BR>
      <TABLE cellPadding=4 width="100%" border=0>
        <TBODY>
        <TR vAlign=top>
          <TD width="100%">
            <H2>Other popular articles:</H2>
            <UL>
              <LI><A href="http://www.codeproject.com/bitmap/DFB_vs_DIB.asp">DFB 
              vs. DIB</A><BR><SPAN class=smalltext>The difference between DFB 
              and DIB.</SPAN>
              <LI><A 
              href="http://www.codeproject.com/bitmap/specialfx.asp">Really cool 
              visual FX</A><BR><SPAN class=smalltext>A set of classes for doing 
              stunning visual effects, including water, plasma and fire.</SPAN>
              <LI><A 
              href="http://www.codeproject.com/bitmap/pjaimage.asp">CPJAImage - 
              Yet another image drawing class</A><BR><SPAN class=smalltext>A 
              class that draws an image with various options - transparently, 
              disabled or grayscale, centered on or stretched to fit a given 
              rectangle.</SPAN>
              <LI><A 
              href="http://www.codeproject.com/bitmap/cximage.asp">CxImage</A><BR><SPAN 
              class=smalltext>CxImage is a C++ class to load, save, display, 
              transform BMP, JPEG, GIF, PNG, TIFF, MNG, ICO, PCX, TGA, WMF, 
              WBMP, JBG, J2K images.</SPAN></LI></UL></TD>
          <TD width=360>
            <SCRIPT language=javascript>document.write("<IFRAME src=\"/script/ann/ServeHTML.aspx?C=False&id=786&cb=4157077\" border=0 frameborder=0 scrolling=no width=300 height=250></IFRAME>");</SCRIPT>
          </TD></TR></TBODY></TABLE>
      <FORM action=/script/rating/code/app/insert_vote.asp method=post><INPUT 
      type=hidden value=ImageConvolution/bitmap3/27/2004 name=vote_name> <INPUT 
      type=hidden value=/bitmap/ImageConvolution.asp name=goal> 
      <TABLE cellSpacing=0 cellPadding=1 width="100%" bgColor=#ff9900 
        border=0><TBODY>
        <TR>
          <TD width="100%">
            <TABLE cellSpacing=0 cellPadding=4 width="100%" bgColor=#fbedbb 
            border=0>
              <TBODY>
              <TR>
                <TD class=smalltext vAlign=center>[<A 
                  href="http://www.codeproject.com/bitmap/ImageConvolution.asp#__top">Top</A>]</TD>
                <TD vAlign=center noWrap align=right><I><B>Rate this Article 
                  for us!</B></I>&nbsp;&nbsp;&nbsp;&nbsp; <I>Poor</I><INPUT 
                  type=radio value=1 name=rate><INPUT type=radio value=2 
                  name=rate><INPUT type=radio value=3 name=rate><INPUT 
                  type=radio value=4 name=rate><INPUT type=radio value=5 
                  name=rate><I>Excellent</I>&nbsp;&nbsp;<INPUT class=FormButton type=submit value=Vote> 
                </TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></FORM>
      <TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
        <TBODY>
        <TR vAlign=top>
          <TD vAlign=top>
            <CENTER>
            <SCRIPT language=javascript>document.write("<a href=\"/script/admentor/admentorredir.asp?id=1321&way=ban\" target=_blank><img src=\"/script/ann/ServeImg.aspx?File=%2Fscript%2Fadmentor%2Fimages%2FMSDN2005CD%5F120x60%2Egif&C=False&id=1321&cb=4157079\" alt=\"MSDN Magazine - Your guide to Microsoft tools, development environments, and technologies for Windows and the Web.\" border=0 width=120 height=60></a>");</SCRIPT>
            </CENTER><BR></TD>
          <TD vAlign=top noWrap align=middle><SPAN id=AdBanner5>
            <SCRIPT language=javascript>document.write("<a href=\"/script/admentor/admentorredir.asp?id=1728&way=ban\" target=_blank><img src=\"/script/ann/ServeImg.aspx?File=%2Fscript%2Fadmentor%2Fimages%2Fmainsoft%5F468x60%5Fgrasshopper%2Egif&C=False&id=1728&cb=4157074\" alt=\"Visual Studio .NET on Linux\" border=0 width=468 height=60></a>");</SCRIPT>
            </SPAN></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><A 
name=__comments></A>
<SCRIPT language=JavaScript>
function MsgCategoryForm(MemberID, MsgID, MsgType)
{
	document.write("Rate this message: ");
	document.write("<a href='#xx" + MsgID.toString() + "xx' onclick='CatMsg(" + MemberID.toString() + ", " + MsgID.toString() + ", " + MsgVoteGood.toString() + ")'>Good " + MsgType + "</a> ");
	document.write("<a href='#xx" + MsgID.toString() + "xx' onclick='CatMsg(" + MemberID.toString() + ", " + MsgID.toString() + ", " + MsgVoteBad.toString() + ")'>Bad " + MsgType + "</a> ");
	document.write("<a href='#xx" + MsgID.toString() + "xx' onclick='CatMsg(" + MemberID.toString() + ", " + MsgID.toString() + ", " + MsgVoteWrong.toString() + ")'>Innapropriate / Offtopic</a> ");
	document.write("<a href='#xx" + MsgID.toString() + "xx' onclick='CatMsg(" + MemberID.toString() + ", " + MsgID.toString() + ", " + MsgVoteOffensive.toString() + ")'>Offensive</a> ");
}
function CatMsg(userid, msgid, Category) 
{ 
	open("/script/comments/vote.asp?js=1&user="+userid.toString()+"&msg="+msgid.toString()+"&score="+Category.toString() ,"helpful","toolbar=no,resizable=yes,scrollbars=yes,directories=no,menubar=no,width=300,height=200");
	return false;
}
</SCRIPT>

<SCRIPT language=JavaScript>
function MsgVoteForm(MemberID, MsgID)
{
	document.write("<span id=\"MVF" + MsgID + "\">");
	document.write("Rate this message: ");
	for (var i=1; i<=5;i++)
		document.write("<a href='#xx" + MsgID.toString() + "xx' title='give this message a vote of " + i.toString() + "' onclick='return RateMsg(" + MemberID.toString() + ", " + MsgID.toString() + ", " + i.toString() + ")'><b>" + i.toString() + "</b></a> ");
	document.write(" (out of 5)");
	document.writeln("</span>");
}

// bit is wrapped in a <span> or something with the id of "vote99999" where 99999 is the message ID
function RateMsg(userid, msgid, score)
{

   var req = new ActiveXObject("Msxml2.XMLHTTP"); 

   req.onreadystatechange = function()
   {
      if ( req.readyState == 4 )
      {
         if ( req.status == 200 )
         {
            if ( req.responseText.match(/You have already voted/) )
               status.innerHTML = "<b style='color:red'>Sorry, can't vote twice... <img src='/script/images/smiley_wink.gif'></b>";
            else
               status.innerHTML = "<b>Voted: " + score + "</b>";
         }
         else
         {
            status.innerHTML = "<b style='color:red'>Failed!" + req.statusText + "</b>";
         }
      }
   }
   
   var status = document.getElementById("MVF" + msgid);
   if (!status)
      return;  // should never happen...   
   status.innerHTML = "<b style='color:green'>Voting...</b>";
   
   var strAction = "/script/comments/vote.asp?js=1&user="+userid+"&msg="+msgid+"&score="+score;
   req.open("GET", strAction, true);
   req.send(null);
   return false;
}

</SCRIPT>

<SCRIPT language=JavaScript>
var Selected = "";

var AdTime = new Date();


// Ensures the expanded message appears reasonably close to where 
// it should appear: on screen, and if possible, under the mouse cursor.
function SwitchMessage(e)
{
   if ( !e ) e = window.event;
   var target = e.target ? e.target : e.srcElement;

   // is it a post?
   while ( target && target.id != 'DynMessLink' )
      target = target.parentNode;
   if ( !target || target.id != 'DynMessLink' )
      return;

   if (Selected)
   {
      var body = document.getElementById(Selected + "_h1");
      if (body)
         body.style.display = 'none';
      var head = document.getElementById(Selected + "_h0");
      if (head)
         head.bgColor = '#FEF9E7';
   }

   if (Selected == target.name) // just collapse
      Selected="";
   else
   {
      Selected = target.name;
      var body = document.getElementById(Selected + "_h1");
      if (body)
      {
         if (body.style.display=='none')
            body.style.display='';
         else
            body.style.display = 'none';
      }
      var head = document.getElementById(Selected + "_h0");
      if (head)
         head.bgColor = '#99CCFF';

      if ( body && head && body.style.display != 'none' )
      {
         // the bit that keeps the post on-screen and under the cursor
         //var dif = (getRealPos(head, "Top") + head.offsetHeight/2) - (document.body.scrollTop+e.clientY);
         //document.body.scrollTop += dif;
         document.body.scrollTop = getRealPos(head, "Top") - document.body.clientHeight/10;
         EnsureMessageVisible(target.name, true);
      }
   }

   if ( e.preventDefault )
      e.preventDefault();
   else
      e.returnValue = false;
   return false;
}

// does its best to make a message visible on-screen (vs. scrolled off somewhere).
function EnsureMessageVisible(msgID, bShowTop) {
   var msgHeader = document.getElementById(msgID + "_h0");
   var msgBody = document.getElementById(msgID + "_h1");

   // determine scroll position of top and bottom
   var scrollContainer = document.body;
   var top = getRealPos(msgHeader, 'Top');
   var bottom = getRealPos(msgBody, 'Top') + msgBody.offsetHeight;

   // if not already visible, scroll to make it so
   if ( scrollContainer.scrollTop > top && !bShowTop)
      scrollContainer.scrollTop = top - document.body.clientHeight/10;
   if ( scrollContainer.scrollTop+scrollContainer.clientHeight < bottom )
      scrollContainer.scrollTop = bottom-scrollContainer.clientHeight;
   if ( scrollContainer.scrollTop > top && bShowTop)
      scrollContainer.scrollTop = top - document.body.clientHeight/10;
}

// utility
function getRealPos(i,which)
{
   iPos = 0
   while (i!=null)
   {
      iPos += i["offset" + which];
      i = i.offsetParent;
   }
   return iPos
}


</SCRIPT>

<DIV id=_MessageBoard onclick=SwitchMessage(event)>
<TABLE cellSpacing=0 cellPadding=0 width="100%" bgColor=#ff9900 border=0>
  <TBODY>
  <TR>
    <TD width="100%">
      <TABLE id=ForumTable cellSpacing=1 cellPadding=0 width="100%" 
      bgColor=#ff9900 border=0>
        <FORM 
        action=/script/comments/app/do_filtermessages.asp?main=/bitmap/ImageConvolution.asp&amp;df=100&amp;forumid=36474 
        method=post>
        <TBODY>
        <TR>
          <TD>
            <TABLE cellSpacing=0 cellPadding=3 width="100%" bgColor=white 
            border=0>
              <TBODY>
              <TR bgColor=#fbedbb>
                <TD class=smalltext noWrap><A 
                  href="http://www.codeproject.com/script/comments/faq.asp"><IMG 
                  height=16 
                  src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/forum_faq.gif" 
                  width=16 align=absMiddle border=0> <B>FAQ</B></A>&nbsp;</TD>
                <TD class=smalltext vAlign=top noWrap align=right>Noise 
                  tolerance <SELECT class=smalltext size=1 name=noise><OPTION 
                    value=1>Very High</OPTION> <OPTION value=2>High</OPTION> 
                    <OPTION value=3 selected>Medium</OPTION> <OPTION 
                    value=4>Low</OPTION> <OPTION value=5>Very 
                  low</OPTION></SELECT>&nbsp;&nbsp;</TD>
                <TD class=smalltext vAlign=center noWrap align=right 
                  colSpan=2><A 
                  href="http://www.codeproject.com/script/comments/search_comments.asp?forumid=36474"><IMG 
                  height=15 
                  src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/forum_search.gif" 
                  width=16 border=0> Search comments</A> &nbsp;</TD>
                <TD vAlign=top align=right><INPUT class=FormButton type=submit value="Set Options" name=submit></TD></TR>
              <TR bgColor=#ff9900>
                <TD width="100%">&nbsp;</TD>
                <TD class=smalltext vAlign=top noWrap align=right>View <SELECT 
                  class=smalltext size=1 name=expand><OPTION value=0>Normal 
                    (slow)</OPTION> <OPTION value=2>Preview (slow)</OPTION> 
                    <OPTION value=5 selected>Message View</OPTION> <OPTION 
                    value=6>Topic View</OPTION> <OPTION value=1>Thread 
                    View</OPTION> <OPTION value=3>Expanded (Supporters 
                    only)</OPTION></SELECT>&nbsp;&nbsp;</TD>
                <TD class=smalltext vAlign=top noWrap>Per page <SELECT 
                  class=smalltext size=1 name=perpage><OPTION 
                    value=10>10</OPTION> <OPTION value=25 selected>25</OPTION> 
                    <OPTION value=50>50</OPTION></SELECT></TD>
                <TD colSpan=2>&nbsp;</TD></TR></TBODY></TABLE></TD></TR></FORM>
        <TR bgColor=#fbedbb>
          <TD><A name=xx0xx></A>
            <TABLE cellPadding=2 width="100%" bgColor=#fbedbb border=0>
              <TBODY>
              <TR>
                <TD class=messagetitle><IMG height=16 
                  src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/forum_newmsg.gif" 
                  width=16 align=top border=0><A class=HoverLink 
                  title="Add a new message to the discussions" 
                  href="http://www.codeproject.com/script/comments/user_new.asp?main=/bitmap/ImageConvolution.asp&amp;df=100&amp;forumid=36474" 
                  target=_top name=HoverNL><B>New Message</B></A></TD>
                <TD class=messagetitle>Msgs 1 to 25 of 38 (Total: 38) (<A 
                  href="http://www.codeproject.com/bitmap/ImageConvolution.asp?df=100&amp;forumid=36474">Refresh</A>)</TD>
                <TD noWrap align=right><FONT class=messagetitle><SPAN 
                  class=HoverLink>First</SPAN> <SPAN class=HoverLink>Prev</SPAN> 
                  <A class=HoverLink 
                  href="http://www.codeproject.com/bitmap/ImageConvolution.asp?df=100&amp;forumid=36474&amp;fr=26" 
                  name=HoverNL>Next</A> <SPAN 
                  class=HoverLink>&nbsp;&nbsp;&nbsp;&nbsp;</SPAN> 
              </FONT></TD></TR></TBODY></TABLE></TD></TR>
        <TR bgColor=white>
          <TD>
            <TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
              <TBODY>
              <TR>
                <TD width="100%">
                  <TABLE cellSpacing=0 cellPadding=2 bgColor=#fbedbb border=0>
                    <TBODY>
                    <TR>
                      <TD class=messagetitle width="100%">Subject&nbsp;</TD>
                      <TD class=messagetitle noWrap width=140>Author&nbsp;</TD>
                      <TD style="WIDTH: 9em" noWrap align=right 
                        width=120><FONT 
                    class=messagetitle>Date&nbsp;</FONT></TD></TR></TBODY></TABLE></TD></TR>
              <TR>
                <TD><IMG height=5 
                  src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/t.gif" 
                  width=1 border=0></TD></TR>
              <TR id=1435804_h0 bgColor=#fef9e7>
                <TD width="100%">
                  <TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
                    <TBODY>
                    <TR>
                      <TD bgColor=white><A name=xx1435804xx></A><IMG 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/news_question.gif" 
                        align=absMiddle>&nbsp;</TD>
                      <TD class=messagetitle width="100%"><A 
                        class=messagetitle id=DynMessLink 
                        href="http://www.codeproject.com/bitmap/ImageConvolution.asp?df=100&amp;forumid=36474&amp;select=1435804#xx1435804xx" 
                        name=1435804><B>24 bit RGB</B></A></TD>
                      <TD vAlign=bottom><A 
                        href="http://www.codeproject.com/script/profile/whos_who.asp?id=628485"><IMG 
                        title="Click for User Profile" height=15 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/userinfo.gif" 
                        width=14 border=0></A>&nbsp;</TD>
                      <TD noWrap width=140><FONT 
                        class=messagetitle><B>ñoqui</B>&nbsp;</FONT></TD>
                      <TD style="WIDTH: 9em" noWrap align=right 
                        width=120><FONT class=messagetitle><B>10:00 4 Apr 
                        '06</B>&nbsp;</FONT></TD></TR></TBODY></TABLE></TD></TR>
              <TR id=1435804_h1 style="DISPLAY: none">
                <TD width="100%">
                  <TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
                    <TBODY>
                    <TR>
                      <TD><IMG 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/news_blank.gif" 
                        align=absMiddle>&nbsp;</TD>
                      <TD width="100%" bgColor=#d5eaff>
                        <TABLE cellSpacing=5 cellPadding=0 width="100%" 
border=0>
                          <TBODY>
                          <TR>
                            <TD>
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD colSpan=2><FONT class=messagecontent>How can 
                                i filter a 24bit RGB BMP.file in a way where 
                                pixels almost red convert into a complete red 
                                pixels, pixels almost blue convert into complete 
                                blue pixels, and pixels almost green convert 
                                into a complete green pixels. When i mean a 
                                pixel is almost a color it means that allows the 
                                colum of the color to be(255-10%) and the other 
                                two colums to be upto(0+10%) and upto(0+10%) 
                                what in numbers means (255-25) (25) (25) what 
                                would be then (230) (25) (25). The output file 
                                must be 24 bit RGB bmp.<BR><BR>Thanks a lot. 
                                <BR><BR>noqui<BR><BR>-- modified at 20:38 
                                Tuesday 4th April, 
                                2006<BR>&nbsp;</FONT></TD></TR>
                                <TR vAlign=top>
                                <TD class=messagetitle>[<A 
                                title="Reply to this current thread" 
                                href="http://www.codeproject.com/script/comments/user_reply.asp?main=/bitmap/ImageConvolution.asp&amp;df=100&amp;forumid=36474&amp;select=1435804">Reply</A>][<A 
                                title="Email a reply to the author of this message" 
                                href="http://www.codeproject.com/script/comments/user_mail.asp?main=/bitmap/ImageConvolution.asp&amp;df=100&amp;forumid=36474&amp;select=1435804">Email</A>][<A 
                                title="View only messages within this thread" 
                                href="http://www.codeproject.com/bitmap/ImageConvolution.asp?df=100&amp;tid=1435804&amp;forumid=36474&amp;select=1435804#xx1435804xx">View 
                                Thread</A>][<A 
                                title="Get the URL for this message" 
                                href="http://www.codeproject.com/bitmap/ImageConvolution.asp?msg=1435804#xx1435804xx">Get 
                                Link</A>]</TD>
                                <TD class=messagetitle align=right>
                                <SCRIPT language=Javascript>MsgVoteForm(628485,1435804);</SCRIPT>
                                </TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
              <TR>
                <TD><IMG height=6 
                  src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/t.gif" 
                  width=1 border=0></TD></TR>
              <TR id=1448453_h0 bgColor=#fef9e7>
                <TD width="100%">
                  <TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
                    <TBODY>
                    <TR>
                      <TD bgColor=white><A name=xx1448453xx></A><IMG height=1 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/ind.gif" 
                        width=18><IMG 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/news_answer.gif" 
                        align=absMiddle>&nbsp;</TD>
                      <TD class=messagetitle width="100%"><A 
                        class=messagetitle id=DynMessLink 
                        href="http://www.codeproject.com/bitmap/ImageConvolution.asp?df=100&amp;forumid=36474&amp;select=1448453#xx1448453xx" 
                        name=1448453>Re: 24 bit RGB</A></TD>
                      <TD vAlign=bottom><A 
                        href="http://www.codeproject.com/script/profile/whos_who.asp?id=24814"><IMG 
                        title="CodeProject supporter - Click for Profile" 
                        height=16 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/support_icon.gif" 
                        width=16 border=0></A>&nbsp;</TD>
                      <TD noWrap width=140><FONT class=messagetitle>Fred 
                        Ackers&nbsp;</FONT></TD>
                      <TD style="WIDTH: 9em" noWrap align=right 
                        width=120><FONT class=messagetitle>10:03 13 Apr 
                        '06&nbsp;</FONT></TD></TR></TBODY></TABLE></TD></TR>
              <TR id=1448453_h1 style="DISPLAY: none">
                <TD width="100%">
                  <TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
                    <TBODY>
                    <TR>
                      <TD><IMG height=1 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/ind.gif" 
                        width=18><IMG 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/news_blank.gif" 
                        align=absMiddle>&nbsp;</TD>
                      <TD width="100%" bgColor=#d5eaff>
                        <TABLE cellSpacing=5 cellPadding=0 width="100%" 
border=0>
                          <TBODY>
                          <TR>
                            <TD>
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD colSpan=2><FONT class=messagecontent>
                                <BLOCKQUOTE class=FQ>
                                <DIV class=FQA>ñoqui wrote:</DIV>almost red 
                                convert into a complete red 
                                pixels</BLOCKQUOTE><BR><BR>In order to do this, 
                                you would have to build your own filter 
                                function. This might look something 
                                like:<BR><CODE>for (int x =0; x <WIDTH; 
                                x++)<br>for(int y=0; y &lt; height; 
                                y++)<BR>{<BR>if ((img[x][y].red &gt;= 230) 
                                &amp;&amp; (img[x][y].blue &lt;= 25) &amp;&amp; 
                                (img[x][y].green &lt;= 
                                25))<BR>{<BR>img[x][y].red = 
                                255;<BR>img[x][y].blue = img[x][y].green = 
                                0;<BR>}<BR>//repeat for blue and green color 
                                options<BR>}</CODE> <BR><BR>Nothing is 
                                impossible, It's merely a matter of finding an 
                                answer to the question of HOW? ... And answering 
                                that question is usually the most difficult part 
                                of the job!!!<BR>&nbsp;</FONT></TD></TR>
                                <TR vAlign=top>
                                <TD class=messagetitle>[<A 
                                title="Reply to this current thread" 
                                href="http://www.codeproject.com/script/comments/user_reply.asp?main=/bitmap/ImageConvolution.asp&amp;df=100&amp;forumid=36474&amp;select=1448453">Reply</A>][<A 
                                title="Email a reply to the author of this message" 
                                href="http://www.codeproject.com/script/comments/user_mail.asp?main=/bitmap/ImageConvolution.asp&amp;df=100&amp;forumid=36474&amp;select=1448453">Email</A>][<A 
                                title="View only messages within this thread" 
                                href="http://www.codeproject.com/bitmap/ImageConvolution.asp?df=100&amp;tid=1435804&amp;forumid=36474&amp;select=1448453#xx1448453xx">View 
                                Thread</A>][<A 
                                title="Get the URL for this message" 
                                href="http://www.codeproject.com/bitmap/ImageConvolution.asp?msg=1448453#xx1448453xx">Get 
                                Link</A>]</TD>
                                <TD class=messagetitle align=right>Score: 4.0 (1 
                                vote).
                                <SCRIPT language=Javascript>MsgVoteForm(24814,1448453);</SCRIPT>
                                 
                    </TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
              <TR>
                <TD><IMG height=6 
                  src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/t.gif" 
                  width=1 border=0></TD></TR>
              <TR id=1448533_h0 bgColor=#fef9e7>
                <TD width="100%">
                  <TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
                    <TBODY>
                    <TR>
                      <TD bgColor=white><A name=xx1448533xx></A><IMG height=1 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/ind.gif" 
                        width=36><IMG 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/news_general.gif" 
                        align=absMiddle>&nbsp;</TD>
                      <TD class=messagetitle width="100%"><A 
                        class=messagetitle id=DynMessLink 
                        href="http://www.codeproject.com/bitmap/ImageConvolution.asp?df=100&amp;forumid=36474&amp;select=1448533#xx1448533xx" 
                        name=1448533>Re: 24 bit RGB</A></TD>
                      <TD vAlign=bottom><A 
                        href="http://www.codeproject.com/script/profile/whos_who.asp?id=628485"><IMG 
                        title="Click for User Profile" height=15 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/userinfo.gif" 
                        width=14 border=0></A>&nbsp;</TD>
                      <TD noWrap width=140><FONT 
                        class=messagetitle>ñoqui&nbsp;</FONT></TD>
                      <TD style="WIDTH: 9em" noWrap align=right 
                        width=120><FONT class=messagetitle>10:40 13 Apr 
                        '06&nbsp;</FONT></TD></TR></TBODY></TABLE></TD></TR>
              <TR id=1448533_h1 style="DISPLAY: none">
                <TD width="100%">
                  <TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
                    <TBODY>
                    <TR>
                      <TD><IMG height=1 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/ind.gif" 
                        width=36><IMG 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/news_blank.gif" 
                        align=absMiddle>&nbsp;</TD>
                      <TD width="100%" bgColor=#d5eaff>
                        <TABLE cellSpacing=5 cellPadding=0 width="100%" 
border=0>
                          <TBODY>
                          <TR>
                            <TD>
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD colSpan=2><FONT class=messagecontent>Then it 
                                must look something like this:<BR><BR>for (int x 
                                =0; x for(int y=0; y &lt; height; 
                                y++)<BR>{<BR>if ((img[x][y].red &gt;= 230) 
                                &amp;&amp; (img[x][y].blue &lt;= 25) &amp;&amp; 
                                (img[x][y].green &lt;= 
                                25))<BR>{<BR>img[x][y].red = 
                                255;<BR>img[x][y].blue = img[x][y].green = 
                                0;<BR>}<BR><BR>if ((img[x][y].blue &gt;= 230) 
                                &amp;&amp; (img[x][y].red &lt;= 25) &amp;&amp; 
                                (img[x][y].green &lt;= 
                                25))<BR>{<BR>img[x][y].blue = 
                                255;<BR>img[x][y].red = img[x][y].green = 
                                0;<BR>}<BR>if ((img[x][y].green &gt;= 230) 
                                &amp;&amp; (img[x][y].blue &lt;= 25) &amp;&amp; 
                                (img[x][y].red &lt;= 
                                25))<BR>{<BR>img[x][y].green = 
                                255;<BR>img[x][y].blue = img[x][y].red = 
                                0;<BR>}<BR>} <BR><BR>Thanks a lot FRED, i will 
                                try it.<BR>From Argentina, 
                                noqui<BR><BR>&nbsp;</FONT></TD></TR>
                                <TR vAlign=top>
                                <TD class=messagetitle>[<A 
                                title="Reply to this current thread" 
                                href="http://www.codeproject.com/script/comments/user_reply.asp?main=/bitmap/ImageConvolution.asp&amp;df=100&amp;forumid=36474&amp;select=1448533">Reply</A>][<A 
                                title="Email a reply to the author of this message" 
                                href="http://www.codeproject.com/script/comments/user_mail.asp?main=/bitmap/ImageConvolution.asp&amp;df=100&amp;forumid=36474&amp;select=1448533">Email</A>][<A 
                                title="View only messages within this thread" 
                                href="http://www.codeproject.com/bitmap/ImageConvolution.asp?df=100&amp;tid=1435804&amp;forumid=36474&amp;select=1448533#xx1448533xx">View 
                                Thread</A>][<A 
                                title="Get the URL for this message" 
                                href="http://www.codeproject.com/bitmap/ImageConvolution.asp?msg=1448533#xx1448533xx">Get 
                                Link</A>]</TD>
                                <TD class=messagetitle align=right>
                                <SCRIPT language=Javascript>MsgVoteForm(628485,1448533);</SCRIPT>
                                </TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
              <TR>
                <TD><IMG height=5 
                  src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/t.gif" 
                  width=1 border=0></TD></TR>
              <TR height=1>
                <TD bgColor=#ff9900><IMG height=1 
                  src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/t.gif" 
                  width=1></TD></TR>
              <TR id=1327459_h0 bgColor=#fef9e7>
                <TD width="100%">
                  <TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
                    <TBODY>
                    <TR>
                      <TD bgColor=white><A name=xx1327459xx></A><IMG 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/news_question.gif" 
                        align=absMiddle>&nbsp;</TD>
                      <TD class=messagetitle width="100%"><A 
                        class=messagetitle id=DynMessLink 
                        href="http://www.codeproject.com/bitmap/ImageConvolution.asp?df=100&amp;forumid=36474&amp;select=1327459#xx1327459xx" 
                        name=1327459><B>Does not compile in MSVC 2003</B></A></TD>
                      <TD vAlign=bottom><A 
                        href="http://www.codeproject.com/script/profile/whos_who.asp?id=824632"><IMG 
                        title="Click for User Profile" height=15 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/userinfo.gif" 
                        width=14 border=0></A>&nbsp;</TD>
                      <TD noWrap width=140><FONT class=messagetitle><B>Dark 
                        Alchemist</B>&nbsp;</FONT></TD>
                      <TD style="WIDTH: 9em" noWrap align=right 
                        width=120><FONT class=messagetitle><B>14:27 6 Jan 
                        '06</B>&nbsp;</FONT></TD></TR></TBODY></TABLE></TD></TR>
              <TR id=1327459_h1 style="DISPLAY: none">
                <TD width="100%">
                  <TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
                    <TBODY>
                    <TR>
                      <TD><IMG 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/news_blank.gif" 
                        align=absMiddle>&nbsp;</TD>
                      <TD width="100%" bgColor=#d5eaff>
                        <TABLE cellSpacing=5 cellPadding=0 width="100%" 
border=0>
                          <TBODY>
                          <TR>
                            <TD>
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD colSpan=2><FONT 
                                class=messagecontent><CODE>Compiling...<BR>StdAfx.cpp<BR>WINVER 
                                not defined. Defaulting to 0x0501 (Windows XP 
                                and Windows .NET 
                                Server)<BR>Compiling...<BR>MainFrm.cpp<BR>MainFrm.cpp(110) 
                                : warning C4244: '=' : conversion from 'int' to 
                                'float', possible loss of 
                                data<BR>MainFrm.cpp(111) : warning C4244: '=' : 
                                conversion from 'int' to 'float', possible loss 
                                of data<BR>MainFrm.cpp(112) : warning C4244: '=' 
                                : conversion from 'int' to 'float', possible 
                                loss of data<BR>MainFrm.cpp(113) : warning 
                                C4244: '=' : conversion from 'int' to 'float', 
                                possible loss of data<BR>MainFrm.cpp(114) : 
                                warning C4244: '=' : conversion from 'int' to 
                                'float', possible loss of 
                                data<BR>MainFrm.cpp(115) : warning C4244: '=' : 
                                conversion from 'int' to 'float', possible loss 
                                of data<BR>MainFrm.cpp(116) : warning C4244: '=' 
                                : conversion from 'int' to 'float', possible 
                                loss of data<BR>MainFrm.cpp(117) : warning 
                                C4244: '=' : conversion from 'int' to 'float', 
                                possible loss of data<BR>MainFrm.cpp(118) : 
                                warning C4244: '=' : conversion from 'int' to 
                                'float', possible loss of 
                                data<BR>ImageConvolutionView.cpp<BR>ImageConvolutionView.cpp(248) 
                                : warning C4244: 'initializing' : conversion 
                                from 'double' to 'int', possible loss of 
                                data<BR>ImageConvolutionView.cpp(249) : warning 
                                C4244: '=' : conversion from 'int' to 'float', 
                                possible loss of 
                                data<BR>ImageConvolutionView.cpp(250) : warning 
                                C4244: '=' : conversion from 'int' to 'float', 
                                possible loss of 
                                data<BR>ImageConvolutionView.cpp(251) : warning 
                                C4244: '=' : conversion from 'int' to 'float', 
                                possible loss of 
                                data<BR>ImageConvolutionDoc.cpp<BR>ImageConvolution.cpp<BR>ImageConvolution.cpp(58) 
                                : warning C4996: 'CWinApp::Enable3dControls' was 
                                declared deprecated<BR>C:\Program 
                                Files\Microsoft Visual Studio .NET 
                                2003\Vc7\atlmfc\include\afxwin.h(4369) : see 
                                declaration of 
                                'CWinApp::Enable3dControls'<BR>ConvolveDlg.cpp<BR>ConvolveDlg.cpp(18) 
                                : error C2143: syntax error : missing ')' before 
                                ','<BR>ConvolveDlg.cpp(18) : error C2365: 'IDD' 
                                : redefinition; previous definition was a 
                                'enumerator'<BR>c:\unzipped\ImageConvolution\ConvolveDlg.h(21) 
                                : see declaration of 
                                'IDD'<BR>ConvolveDlg.cpp(18) : error C2244: 
                                'IDD' : unable to match function definition to 
                                an existing 
                                declaration<BR>c:\unzipped\ImageConvolution\ConvolveDlg.h(21) 
                                : see declaration of 
                                'IDD'<BR>definition<BR>'IDD'<BR>existing 
                                declarations<BR>ConvolveDlg.cpp(18) : error 
                                C2059: syntax error : ')'<BR>ConvolveDlg.cpp(20) 
                                : error C2143: syntax error : missing ';' before 
                                '{'<BR>ConvolveDlg.cpp(20) : error C2447: '{' : 
                                missing function header (old-style formal 
                                list?)<BR>Generating Code...<BR><BR>Build log 
                                was saved at 
                                "file://c:\unzipped\ImageConvolution\Release\BuildLog.htm"<BR>ImageConvolution 
                                - 6 error(s), 14 warning(s)</CODE><BR><BR>That 
                                says it all for MSVC .NET 2003 (7.1). So, how do 
                                I get this thing 
                                compiled?<BR>&nbsp;</FONT></TD></TR>
                                <TR vAlign=top>
                                <TD class=messagetitle>[<A 
                                title="Reply to this current thread" 
                                href="http://www.codeproject.com/script/comments/user_reply.asp?main=/bitmap/ImageConvolution.asp&amp;df=100&amp;forumid=36474&amp;select=1327459">Reply</A>][<A 
                                title="Email a reply to the author of this message" 
                                href="http://www.codeproject.com/script/comments/user_mail.asp?main=/bitmap/ImageConvolution.asp&amp;df=100&amp;forumid=36474&amp;select=1327459">Email</A>][<A 
                                title="View only messages within this thread" 
                                href="http://www.codeproject.com/bitmap/ImageConvolution.asp?df=100&amp;tid=1327459&amp;forumid=36474&amp;select=1327459#xx1327459xx">View 
                                Thread</A>][<A 
                                title="Get the URL for this message" 
                                href="http://www.codeproject.com/bitmap/ImageConvolution.asp?msg=1327459#xx1327459xx">Get 
                                Link</A>]</TD>
                                <TD class=messagetitle align=right>Score: 1.0 (1 
                                vote).
                                <SCRIPT language=Javascript>MsgVoteForm(824632,1327459);</SCRIPT>
                                 
                    </TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
              <TR>
                <TD><IMG height=6 
                  src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/t.gif" 
                  width=1 border=0></TD></TR>
              <TR id=1428263_h0 bgColor=#fef9e7>
                <TD width="100%">
                  <TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
                    <TBODY>
                    <TR>
                      <TD bgColor=white><A name=xx1428263xx></A><IMG height=1 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/ind.gif" 
                        width=18><IMG 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/news_answer.gif" 
                        align=absMiddle>&nbsp;</TD>
                      <TD class=messagetitle width="100%"><A 
                        class=messagetitle id=DynMessLink 
                        href="http://www.codeproject.com/bitmap/ImageConvolution.asp?df=100&amp;forumid=36474&amp;select=1428263#xx1428263xx" 
                        name=1428263>Re: Does not compile in MSVC 2003</A></TD>
                      <TD vAlign=bottom><A 
                        href="http://www.codeproject.com/script/profile/whos_who.asp?id=24814"><IMG 
                        title="CodeProject supporter - Click for Profile" 
                        height=16 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/support_icon.gif" 
                        width=16 border=0></A>&nbsp;</TD>
                      <TD noWrap width=140><FONT 
                        class=messagetitle>Aqiruse&nbsp;</FONT></TD>
                      <TD style="WIDTH: 9em" noWrap align=right 
                        width=120><FONT class=messagetitle>15:08 29 Mar 
                        '06&nbsp;</FONT></TD></TR></TBODY></TABLE></TD></TR>
              <TR id=1428263_h1 style="DISPLAY: none">
                <TD width="100%">
                  <TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
                    <TBODY>
                    <TR>
                      <TD><IMG height=1 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/ind.gif" 
                        width=18><IMG 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/news_blank.gif" 
                        align=absMiddle>&nbsp;</TD>
                      <TD width="100%" bgColor=#d5eaff>
                        <TABLE cellSpacing=5 cellPadding=0 width="100%" 
border=0>
                          <TBODY>
                          <TR>
                            <TD>
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD colSpan=2><FONT class=messagecontent>Please 
                                download the updated version, which includes 
                                corrections to for MSVC 2003 <BR><BR>Nothing is 
                                impossible, It's merely a matter of finding an 
                                answer to the question of HOW? ... And answering 
                                that question is usually the most difficult part 
                                of the job!!!<BR>&nbsp;</FONT></TD></TR>
                                <TR vAlign=top>
                                <TD class=messagetitle>[<A 
                                title="Reply to this current thread" 
                                href="http://www.codeproject.com/script/comments/user_reply.asp?main=/bitmap/ImageConvolution.asp&amp;df=100&amp;forumid=36474&amp;select=1428263">Reply</A>][<A 
                                title="Email a reply to the author of this message" 
                                href="http://www.codeproject.com/script/comments/user_mail.asp?main=/bitmap/ImageConvolution.asp&amp;df=100&amp;forumid=36474&amp;select=1428263">Email</A>][<A 
                                title="View only messages within this thread" 
                                href="http://www.codeproject.com/bitmap/ImageConvolution.asp?df=100&amp;tid=1327459&amp;forumid=36474&amp;select=1428263#xx1428263xx">View 
                                Thread</A>][<A 
                                title="Get the URL for this message" 
                                href="http://www.codeproject.com/bitmap/ImageConvolution.asp?msg=1428263#xx1428263xx">Get 
                                Link</A>]</TD>
                                <TD class=messagetitle align=right>
                                <SCRIPT language=Javascript>MsgVoteForm(24814,1428263);</SCRIPT>
                                </TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
              <TR>
                <TD><IMG height=5 
                  src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/t.gif" 
                  width=1 border=0></TD></TR>
              <TR height=1>
                <TD bgColor=#ff9900><IMG height=1 
                  src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/t.gif" 
                  width=1></TD></TR>
              <TR id=1242665_h0 bgColor=#fef9e7>
                <TD width="100%">
                  <TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
                    <TBODY>
                    <TR>
                      <TD bgColor=white><A name=xx1242665xx></A><IMG 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/news_general.gif" 
                        align=absMiddle>&nbsp;</TD>
                      <TD class=messagetitle width="100%"><A 
                        class=messagetitle id=DynMessLink 
                        href="http://www.codeproject.com/bitmap/ImageConvolution.asp?df=100&amp;forumid=36474&amp;select=1242665#xx1242665xx" 
                        name=1242665><B>please , help ?</B></A></TD>
                      <TD vAlign=bottom><A 
                        href="http://www.codeproject.com/script/profile/whos_who.asp?id=1434437"><IMG 
                        title="Click for User Profile" height=15 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/userinfo.gif" 
                        width=14 border=0></A>&nbsp;</TD>
                      <TD noWrap width=140><FONT 
                        class=messagetitle><B>dynamica123</B>&nbsp;</FONT></TD>
                      <TD style="WIDTH: 9em" noWrap align=right 
                        width=120><FONT class=messagetitle><B>4:03 2 Oct 
                        '05</B>&nbsp;</FONT></TD></TR></TBODY></TABLE></TD></TR>
              <TR id=1242665_h1 style="DISPLAY: none">
                <TD width="100%">
                  <TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
                    <TBODY>
                    <TR>
                      <TD><IMG 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/news_blank.gif" 
                        align=absMiddle>&nbsp;</TD>
                      <TD width="100%" bgColor=#d5eaff>
                        <TABLE cellSpacing=5 cellPadding=0 width="100%" 
border=0>
                          <TBODY>
                          <TR>
                            <TD>
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD colSpan=2><FONT class=messagecontent>I want 
                                to crop a region from the image programmatically 
                                after transforming it to grayscale ? 
                                <BR>&nbsp;</FONT></TD></TR>
                                <TR vAlign=top>
                                <TD class=messagetitle>[<A 
                                title="Reply to this current thread" 
                                href="http://www.codeproject.com/script/comments/user_reply.asp?main=/bitmap/ImageConvolution.asp&amp;df=100&amp;forumid=36474&amp;select=1242665">Reply</A>][<A 
                                title="Email a reply to the author of this message" 
                                href="http://www.codeproject.com/script/comments/user_mail.asp?main=/bitmap/ImageConvolution.asp&amp;df=100&amp;forumid=36474&amp;select=1242665">Email</A>][<A 
                                title="View only messages within this thread" 
                                href="http://www.codeproject.com/bitmap/ImageConvolution.asp?df=100&amp;tid=1242665&amp;forumid=36474&amp;select=1242665#xx1242665xx">View 
                                Thread</A>][<A 
                                title="Get the URL for this message" 
                                href="http://www.codeproject.com/bitmap/ImageConvolution.asp?msg=1242665#xx1242665xx">Get 
                                Link</A>]</TD>
                                <TD class=messagetitle align=right>
                                <SCRIPT language=Javascript>MsgVoteForm(1434437,1242665);</SCRIPT>
                                </TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
              <TR>
                <TD><IMG height=5 
                  src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/t.gif" 
                  width=1 border=0></TD></TR>
              <TR height=1>
                <TD bgColor=#ff9900><IMG height=1 
                  src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/t.gif" 
                  width=1></TD></TR>
              <TR id=1071630_h0 bgColor=#fef9e7>
                <TD width="100%">
                  <TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
                    <TBODY>
                    <TR>
                      <TD bgColor=white><A name=xx1071630xx></A><IMG 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/news_general.gif" 
                        align=absMiddle>&nbsp;</TD>
                      <TD class=messagetitle width="100%"><A 
                        class=messagetitle id=DynMessLink 
                        href="http://www.codeproject.com/bitmap/ImageConvolution.asp?df=100&amp;forumid=36474&amp;select=1071630#xx1071630xx" 
                        name=1071630><B>Terrible</B></A></TD>
                      <TD vAlign=bottom><A 
                        href="http://www.codeproject.com/script/profile/whos_who.asp?id=6556"><IMG 
                        title="Click for User Profile" height=15 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/userinfo.gif" 
                        width=14 border=0></A>&nbsp;</TD>
                      <TD noWrap width=140><FONT 
                        class=messagetitle><B>Christian 
Graus</B>&nbsp;</FONT></TD>
                      <TD style="WIDTH: 9em" noWrap align=right 
                        width=120><FONT class=messagetitle><B>22:02 30 Mar 
                        '05</B>&nbsp;</FONT></TD></TR></TBODY></TABLE></TD></TR>
              <TR id=1071630_h1 style="DISPLAY: none">
                <TD width="100%">
                  <TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
                    <TBODY>
                    <TR>
                      <TD><IMG 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/news_blank.gif" 
                        align=absMiddle>&nbsp;</TD>
                      <TD width="100%" bgColor=#d5eaff>
                        <TABLE cellSpacing=5 cellPadding=0 width="100%" 
border=0>
                          <TBODY>
                          <TR>
                            <TD>
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD colSpan=2><FONT class=messagecontent>Two 
                                problems I see here<BR><BR>1. You're using 
                                GetPixel/SetPixel. This is incredibly 
                                slow<BR><BR>2. You're accessing an image via a 
                                DC. This means it's device dependant, which 
                                means no matter what it is on disc, it's going 
                                to be the bit depth of the screen.<BR><BR>If you 
                                use a DIBSection, then you can get around both 
                                these issues.<BR><BR>One more - it looks to me 
                                like the function you're showing needs to be 
                                called for each pixel - this is another gross 
                                inefficiency if I am right. A function call has 
                                a cost, and image processing is costly before 
                                you start.<BR><BR>Christian<BR><BR>I have 
                                several lifelong friends that are New Yorkers 
                                but I have always gravitated toward the 
                                weirdo's. - Richard 
                                Stringer<BR>&nbsp;</FONT></TD></TR>
                                <TR vAlign=top>
                                <TD class=messagetitle>[<A 
                                title="Reply to this current thread" 
                                href="http://www.codeproject.com/script/comments/user_reply.asp?main=/bitmap/ImageConvolution.asp&amp;df=100&amp;forumid=36474&amp;select=1071630">Reply</A>][<A 
                                title="Email a reply to the author of this message" 
                                href="http://www.codeproject.com/script/comments/user_mail.asp?main=/bitmap/ImageConvolution.asp&amp;df=100&amp;forumid=36474&amp;select=1071630">Email</A>][<A 
                                title="View only messages within this thread" 
                                href="http://www.codeproject.com/bitmap/ImageConvolution.asp?df=100&amp;tid=1071630&amp;forumid=36474&amp;select=1071630#xx1071630xx">View 
                                Thread</A>][<A 
                                title="Get the URL for this message" 
                                href="http://www.codeproject.com/bitmap/ImageConvolution.asp?msg=1071630#xx1071630xx">Get 
                                Link</A>]</TD>
                                <TD class=messagetitle align=right>Score: 3.0 (2 
                                votes).
                                <SCRIPT language=Javascript>MsgVoteForm(6556,1071630);</SCRIPT>
                                 
                    </TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
              <TR>
                <TD><IMG height=6 
                  src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/t.gif" 
                  width=1 border=0></TD></TR>
              <TR id=1071735_h0 bgColor=#fef9e7>
                <TD width="100%">
                  <TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
                    <TBODY>
                    <TR>
                      <TD bgColor=white><A name=xx1071735xx></A><IMG height=1 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/ind.gif" 
                        width=18><IMG 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/news_general.gif" 
                        align=absMiddle>&nbsp;</TD>
                      <TD class=messagetitle width="100%"><A 
                        class=messagetitle id=DynMessLink 
                        href="http://www.codeproject.com/bitmap/ImageConvolution.asp?df=100&amp;forumid=36474&amp;select=1071735#xx1071735xx" 
                        name=1071735>Re: Terrible</A></TD>
                      <TD vAlign=bottom><A 
                        href="http://www.codeproject.com/script/profile/whos_who.asp?id=46125"><IMG 
                        title="Click for User Profile" height=15 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/userinfo.gif" 
                        width=14 border=0></A>&nbsp;</TD>
                      <TD noWrap width=140><FONT class=messagetitle>Georgi 
                        Petrov&nbsp;</FONT></TD>
                      <TD style="WIDTH: 9em" noWrap align=right 
                        width=120><FONT class=messagetitle>1:17 31 Mar 
                        '05&nbsp;</FONT></TD></TR></TBODY></TABLE></TD></TR>
              <TR id=1071735_h1 style="DISPLAY: none">
                <TD width="100%">
                  <TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
                    <TBODY>
                    <TR>
                      <TD><IMG height=1 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/ind.gif" 
                        width=18><IMG 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/news_blank.gif" 
                        align=absMiddle>&nbsp;</TD>
                      <TD width="100%" bgColor=#d5eaff>
                        <TABLE cellSpacing=5 cellPadding=0 width="100%" 
border=0>
                          <TBODY>
                          <TR>
                            <TD>
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD colSpan=2><FONT class=messagecontent>This is 
                                not the problem, because can be fixed very 
                                easy.<BR>Also I have searching for faster code 
                                and I found it.<BR>The main problem in 
                                convolution is the proper filter selecion, but 
                                FFT is still slow for 2.4GHz CPU, so 3x3 5x5 
                                kernels are OK <BR>&nbsp;</FONT></TD></TR>
                                <TR vAlign=top>
                                <TD class=messagetitle>[<A 
                                title="Reply to this current thread" 
                                href="http://www.codeproject.com/script/comments/user_reply.asp?main=/bitmap/ImageConvolution.asp&amp;df=100&amp;forumid=36474&amp;select=1071735">Reply</A>][<A 
                                title="Email a reply to the author of this message" 
                                href="http://www.codeproject.com/script/comments/user_mail.asp?main=/bitmap/ImageConvolution.asp&amp;df=100&amp;forumid=36474&amp;select=1071735">Email</A>][<A 
                                title="View only messages within this thread" 
                                href="http://www.codeproject.com/bitmap/ImageConvolution.asp?df=100&amp;tid=1071630&amp;forumid=36474&amp;select=1071735#xx1071735xx">View 
                                Thread</A>][<A 
                                title="Get the URL for this message" 
                                href="http://www.codeproject.com/bitmap/ImageConvolution.asp?msg=1071735#xx1071735xx">Get 
                                Link</A>]</TD>
                                <TD class=messagetitle align=right>Score: 1.0 (1 
                                vote).
                                <SCRIPT language=Javascript>MsgVoteForm(46125,1071735);</SCRIPT>
                                 
                    </TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
              <TR>
                <TD><IMG height=6 
                  src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/t.gif" 
                  width=1 border=0></TD></TR>
              <TR id=1072381_h0 bgColor=#fef9e7>
                <TD width="100%">
                  <TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
                    <TBODY>
                    <TR>
                      <TD bgColor=white><A name=xx1072381xx></A><IMG height=1 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/ind.gif" 
                        width=36><IMG 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/news_general.gif" 
                        align=absMiddle>&nbsp;</TD>
                      <TD class=messagetitle style="COLOR: #aa0000" 
                        width="100%"><A class=messagetitle id=DynMessLink 
                        style="COLOR: #aa0000" 
                        href="http://www.codeproject.com/bitmap/ImageConvolution.asp?df=100&amp;forumid=36474&amp;select=1072381#xx1072381xx" 
                        name=1072381>Re: Terrible</A></TD>
                      <TD vAlign=bottom><A 
                        href="http://www.codeproject.com/script/profile/whos_who.asp?id=6556"><IMG 
                        title="Click for User Profile" height=15 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/userinfo.gif" 
                        width=14 border=0></A>&nbsp;</TD>
                      <TD noWrap width=140><FONT class=messagetitle 
                        style="COLOR: #aa0000">Christian Graus&nbsp;</FONT></TD>
                      <TD style="WIDTH: 9em" noWrap align=right 
                        width=120><FONT class=messagetitle 
                        style="COLOR: #aa0000">18:03 31 Mar 
                    '05&nbsp;</FONT></TD></TR></TBODY></TABLE></TD></TR>
              <TR id=1072381_h1 style="DISPLAY: none">
                <TD width="100%">
                  <TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
                    <TBODY>
                    <TR>
                      <TD><IMG height=1 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/ind.gif" 
                        width=36><IMG 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/news_blank.gif" 
                        align=absMiddle>&nbsp;</TD>
                      <TD width="100%" bgColor=#d5eaff>
                        <TABLE cellSpacing=5 cellPadding=0 width="100%" 
border=0>
                          <TBODY>
                          <TR>
                            <TD>
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD colSpan=2><FONT 
                                class=messagecontent><SMALL><B>Georgi Petrov 
                                wrote:</B></SMALL><BR><I>This is not the 
                                problem, because can be fixed very 
                                easy.</I><BR><BR>No, it can't. You need to 
                                fundamentally change how your code works. You 
                                need to either use GDI+, or use a DIBSection 
                                wrapper to create images in the first place, and 
                                you need to work independantly of any device 
                                context.<BR><BR><SMALL><B>Georgi Petrov 
                                wrote:</B></SMALL><BR><I>The main problem in 
                                convolution is the proper filter 
                                selecion</I><BR><BR>That depends. The 'proper' 
                                filter won't speed your code up, or make it 
                                useful to people wanting to work on images to 
                                save them again ( if you load a 24 bit image on 
                                an 8 bit display and use this code, you'll 
                                generate an 8 bit image to save 
                                ).<BR><BR><SMALL><B>Georgi Petrov 
                                wrote:</B></SMALL><BR><I>FFT is still slow for 
                                2.4GHz CPU, so 3x3 5x5 kernels are OK 
                                </I><BR><BR>Where did fast fourier transforms 
                                enter the discussion ? Or does FFT mean 
                                something else here ?<BR><BR>No matter what, 
                                your code is significantly slower than it could 
                                be.<BR><BR><BR>Christian<BR><BR>I have several 
                                lifelong friends that are New Yorkers but I have 
                                always gravitated toward the weirdo's. - Richard 
                                Stringer<BR>&nbsp;</FONT></TD></TR>
                                <TR vAlign=top>
                                <TD class=messagetitle>[<A 
                                title="Reply to this current thread" 
                                href="http://www.codeproject.com/script/comments/user_reply.asp?main=/bitmap/ImageConvolution.asp&amp;df=100&amp;forumid=36474&amp;select=1072381">Reply</A>][<A 
                                title="Email a reply to the author of this message" 
                                href="http://www.codeproject.com/script/comments/user_mail.asp?main=/bitmap/ImageConvolution.asp&amp;df=100&amp;forumid=36474&amp;select=1072381">Email</A>][<A 
                                title="View only messages within this thread" 
                                href="http://www.codeproject.com/bitmap/ImageConvolution.asp?df=100&amp;tid=1071630&amp;forumid=36474&amp;select=1072381#xx1072381xx">View 
                                Thread</A>][<A 
                                title="Get the URL for this message" 
                                href="http://www.codeproject.com/bitmap/ImageConvolution.asp?msg=1072381#xx1072381xx">Get 
                                Link</A>]</TD>
                                <TD class=messagetitle align=right>Score: 5.0 (1 
                                vote).
                                <SCRIPT language=Javascript>MsgVoteForm(6556,1072381);</SCRIPT>
                                 
                    </TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
              <TR>
                <TD><IMG height=6 
                  src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/t.gif" 
                  width=1 border=0></TD></TR>
              <TR id=1072844_h0 bgColor=#fef9e7>
                <TD width="100%">
                  <TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
                    <TBODY>
                    <TR>
                      <TD bgColor=white><A name=xx1072844xx></A><IMG height=1 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/ind.gif" 
                        width=54><IMG 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/news_general.gif" 
                        align=absMiddle>&nbsp;</TD>
                      <TD class=messagetitle width="100%"><A 
                        class=messagetitle id=DynMessLink 
                        href="http://www.codeproject.com/bitmap/ImageConvolution.asp?df=100&amp;forumid=36474&amp;select=1072844#xx1072844xx" 
                        name=1072844>Re: Terrible</A></TD>
                      <TD vAlign=bottom><A 
                        href="http://www.codeproject.com/script/profile/whos_who.asp?id=46125"><IMG 
                        title="Click for User Profile" height=15 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/userinfo.gif" 
                        width=14 border=0></A>&nbsp;</TD>
                      <TD noWrap width=140><FONT class=messagetitle>Georgi 
                        Petrov&nbsp;</FONT></TD>
                      <TD style="WIDTH: 9em" noWrap align=right 
                        width=120><FONT class=messagetitle>7:19 1 Apr 
                        '05&nbsp;</FONT></TD></TR></TBODY></TABLE></TD></TR>
              <TR id=1072844_h1 style="DISPLAY: none">
                <TD width="100%">
                  <TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
                    <TBODY>
                    <TR>
                      <TD><IMG height=1 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/ind.gif" 
                        width=54><IMG 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/news_blank.gif" 
                        align=absMiddle>&nbsp;</TD>
                      <TD width="100%" bgColor=#d5eaff>
                        <TABLE cellSpacing=5 cellPadding=0 width="100%" 
border=0>
                          <TBODY>
                          <TR>
                            <TD>
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD colSpan=2><FONT class=messagecontent>Yes 
                                code is swower, but Fast Fourier Transform for 
                                images is swower too. So the image byt reading 
                                speed is not so essential if we work with 
                                images, but for films you are correct! CGI+ is 
                                not very diferernt than CGI, and even more you 
                                can take a pointer to bitmap bits direct and to 
                                read them without CGI.<BR><BR>This code works, 
                                and if we need faster code we can go somewere 
                                else to search it. CDC* access is very easy to 
                                understand. many of real time applications are 
                                build to work on a particualr system, so there 
                                is not a big problem to use display adpater 
                                color values if they are 32bit.<BR><BR>And 
                                better to make an article where you explayn 
                                everything that you know<IMG 
                                src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/smiley_wink.gif" 
                                align=absMiddle> This will help you to save your 
                                time writing with diferent 
                                friends.<BR><BR>best<BR><BR>&nbsp;</FONT></TD></TR>
                                <TR vAlign=top>
                                <TD class=messagetitle>[<A 
                                title="Reply to this current thread" 
                                href="http://www.codeproject.com/script/comments/user_reply.asp?main=/bitmap/ImageConvolution.asp&amp;df=100&amp;forumid=36474&amp;select=1072844">Reply</A>][<A 
                                title="Email a reply to the author of this message" 
                                href="http://www.codeproject.com/script/comments/user_mail.asp?main=/bitmap/ImageConvolution.asp&amp;df=100&amp;forumid=36474&amp;select=1072844">Email</A>][<A 
                                title="View only messages within this thread" 
                                href="http://www.codeproject.com/bitmap/ImageConvolution.asp?df=100&amp;tid=1071630&amp;forumid=36474&amp;select=1072844#xx1072844xx">View 
                                Thread</A>][<A 
                                title="Get the URL for this message" 
                                href="http://www.codeproject.com/bitmap/ImageConvolution.asp?msg=1072844#xx1072844xx">Get 
                                Link</A>]</TD>
                                <TD class=messagetitle align=right>
                                <SCRIPT language=Javascript>MsgVoteForm(46125,1072844);</SCRIPT>
                                </TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
              <TR>
                <TD><IMG height=6 
                  src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/t.gif" 
                  width=1 border=0></TD></TR>
              <TR id=1073262_h0 bgColor=#fef9e7>
                <TD width="100%">
                  <TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
                    <TBODY>
                    <TR>
                      <TD bgColor=white><A name=xx1073262xx></A><IMG height=1 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/ind.gif" 
                        width=72><IMG 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/news_general.gif" 
                        align=absMiddle>&nbsp;</TD>
                      <TD class=messagetitle width="100%"><A 
                        class=messagetitle id=DynMessLink 
                        href="http://www.codeproject.com/bitmap/ImageConvolution.asp?df=100&amp;forumid=36474&amp;select=1073262#xx1073262xx" 
                        name=1073262>Re: Terrible</A></TD>
                      <TD vAlign=bottom><A 
                        href="http://www.codeproject.com/script/profile/whos_who.asp?id=6556"><IMG 
                        title="Click for User Profile" height=15 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/userinfo.gif" 
                        width=14 border=0></A>&nbsp;</TD>
                      <TD noWrap width=140><FONT class=messagetitle>Christian 
                        Graus&nbsp;</FONT></TD>
                      <TD style="WIDTH: 9em" noWrap align=right 
                        width=120><FONT class=messagetitle>14:49 1 Apr 
                        '05&nbsp;</FONT></TD></TR></TBODY></TABLE></TD></TR>
              <TR id=1073262_h1 style="DISPLAY: none">
                <TD width="100%">
                  <TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
                    <TBODY>
                    <TR>
                      <TD><IMG height=1 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/ind.gif" 
                        width=72><IMG 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/news_blank.gif" 
                        align=absMiddle>&nbsp;</TD>
                      <TD width="100%" bgColor=#d5eaff>
                        <TABLE cellSpacing=5 cellPadding=0 width="100%" 
border=0>
                          <TBODY>
                          <TR>
                            <TD>
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD colSpan=2><FONT 
                                class=messagecontent><SMALL><B>Georgi Petrov 
                                wrote:</B></SMALL><BR><I>Yes code is swower, but 
                                Fast Fourier Transform for images is swower 
                                too</I><BR><BR>So what ? FFT is slower than what 
                                ? It's slower than adding two ints together, for 
                                sure. That doesn't mean that when I write a FFT 
                                routine ( or any other routine ), that I don't 
                                do it properly because it will be slow 
                                anyway.<BR><BR><SMALL><B>Georgi Petrov 
                                wrote:</B></SMALL><BR><I>So the image byt 
                                reading speed is not so essential if we work 
                                with images</I><BR><BR>Bollocks. Given a choice 
                                between an app that takes 15 seconds to apply a 
                                simple filter, and one that takes 3, which would 
                                you choose ?<BR><BR><SMALL><B>Georgi Petrov 
                                wrote:</B></SMALL><BR><I>CGI+ is not very 
                                diferernt than CGI</I><BR><BR>Do you mean GDI+ 
                                and GDI ? You're ( once again ) sorely 
                                mistaken.<BR><BR><SMALL><B>Georgi Petrov 
                                wrote:</B></SMALL><BR><I>even more you can take 
                                a pointer to bitmap bits direct and to read them 
                                without CGI.</I><BR><BR>You've lost me 
                                here.<BR><BR><SMALL><B>Georgi Petrov 
                                wrote:</B></SMALL><BR><I>. CDC* access is very 
                                easy to understand</I><BR><BR>Yes - if you 
                                sought to write code that was not production 
                                value, in order to make the process easier to 
                                understand, that's cool. You should have said 
                                so.<BR><BR><SMALL><B>Georgi Petrov 
                                wrote:</B></SMALL><BR><I>many of real time 
                                applications are build to work on a particualr 
                                system</I><BR><BR>Really ? Where ? Windows is 
                                designed to hide these specifics so that 
                                programmers can code to a universal abstraction. 
                                How do you find out how to write code that 
                                dodges this and writes direct to the graphics 
                                card ?<BR><BR><SMALL><B>Georgi Petrov 
                                wrote:</B></SMALL><BR><I>so there is not a big 
                                problem to use display adpater color values if 
                                they are 32bit.</I><BR><BR>Well, there's no real 
                                difference between 24 and 32 bit displays, but 
                                even then, if an image is not 24 bit, it's 
                                unacceptable that if an image is saved after a 
                                transform, it will be changed in ways the user 
                                did not anticipate. <BR><BR><SMALL><B>Georgi 
                                Petrov wrote:</B></SMALL><BR><I>And better to 
                                make an article where you explayn everything 
                                that you know This will help you to save your 
                                time writing with diferent 
                                friends.</I><BR><BR>Did you not check for other 
                                image processing articles here before writing 
                                one ? I've written a series in C# called 'Image 
                                Processing for dummies'. The GDI+ code I use 
                                easily translates to C++, in fact I wrote it in 
                                C++ first and translated it to C#. <IMG 
                                src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/smiley_smile.gif" 
                                align=absMiddle> <BR><BR>Christian<BR><BR>I have 
                                several lifelong friends that are New Yorkers 
                                but I have always gravitated toward the 
                                weirdo's. - Richard 
                                Stringer<BR>&nbsp;</FONT></TD></TR>
                                <TR vAlign=top>
                                <TD class=messagetitle>[<A 
                                title="Reply to this current thread" 
                                href="http://www.codeproject.com/script/comments/user_reply.asp?main=/bitmap/ImageConvolution.asp&amp;df=100&amp;forumid=36474&amp;select=1073262">Reply</A>][<A 
                                title="Email a reply to the author of this message" 
                                href="http://www.codeproject.com/script/comments/user_mail.asp?main=/bitmap/ImageConvolution.asp&amp;df=100&amp;forumid=36474&amp;select=1073262">Email</A>][<A 
                                title="View only messages within this thread" 
                                href="http://www.codeproject.com/bitmap/ImageConvolution.asp?df=100&amp;tid=1071630&amp;forumid=36474&amp;select=1073262#xx1073262xx">View 
                                Thread</A>][<A 
                                title="Get the URL for this message" 
                                href="http://www.codeproject.com/bitmap/ImageConvolution.asp?msg=1073262#xx1073262xx">Get 
                                Link</A>]</TD>
                                <TD class=messagetitle align=right>
                                <SCRIPT language=Javascript>MsgVoteForm(6556,1073262);</SCRIPT>
                                </TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
              <TR>
                <TD><IMG height=6 
                  src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/t.gif" 
                  width=1 border=0></TD></TR>
              <TR id=1428511_h0 bgColor=#fef9e7>
                <TD width="100%">
                  <TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
                    <TBODY>
                    <TR>
                      <TD bgColor=white><A name=xx1428511xx></A><IMG height=1 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/ind.gif" 
                        width=90><IMG 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/news_general.gif" 
                        align=absMiddle>&nbsp;</TD>
                      <TD class=messagetitle width="100%"><A 
                        class=messagetitle id=DynMessLink 
                        href="http://www.codeproject.com/bitmap/ImageConvolution.asp?df=100&amp;forumid=36474&amp;select=1428511#xx1428511xx" 
                        name=1428511>Re: Terrible</A></TD>
                      <TD vAlign=bottom><A 
                        href="http://www.codeproject.com/script/profile/whos_who.asp?id=196"><IMG 
                        title="Click for User Profile" height=15 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/userinfo.gif" 
                        width=14 border=0></A>&nbsp;</TD>
                      <TD noWrap width=140><FONT class=messagetitle>Rick 
                        York&nbsp;</FONT></TD>
                      <TD style="WIDTH: 9em" noWrap align=right 
                        width=120><FONT class=messagetitle>18:21 29 Mar 
                        '06&nbsp;</FONT></TD></TR></TBODY></TABLE></TD></TR>
              <TR id=1428511_h1 style="DISPLAY: none">
                <TD width="100%">
                  <TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
                    <TBODY>
                    <TR>
                      <TD><IMG height=1 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/ind.gif" 
                        width=90><IMG 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/news_blank.gif" 
                        align=absMiddle>&nbsp;</TD>
                      <TD width="100%" bgColor=#d5eaff>
                        <TABLE cellSpacing=5 cellPadding=0 width="100%" 
border=0>
                          <TBODY>
                          <TR>
                            <TD>
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD colSpan=2><FONT class=messagecontent>
                                <BLOCKQUOTE class=FQ>
                                <DIV class=FQA>Christian Graus wrote:</DIV>Yes - 
                                if you sought to write code that was not 
                                production value, in order to make the process 
                                easier to understand, that's cool. You should 
                                have said so.</BLOCKQUOTE><BR><BR>The author 
                                did. From the article : "Please note that this 
                                article is, by no means, an example of fast 
                                processing of pixels. It is merely meant to show 
                                how convolution can be done on 
                                images."<BR><BR>&nbsp;</FONT></TD></TR>
                                <TR vAlign=top>
                                <TD class=messagetitle>[<A 
                                title="Reply to this current thread" 
                                href="http://www.codeproject.com/script/comments/user_reply.asp?main=/bitmap/ImageConvolution.asp&amp;df=100&amp;forumid=36474&amp;select=1428511">Reply</A>][<A 
                                title="Email a reply to the author of this message" 
                                href="http://www.codeproject.com/script/comments/user_mail.asp?main=/bitmap/ImageConvolution.asp&amp;df=100&amp;forumid=36474&amp;select=1428511">Email</A>][<A 
                                title="View only messages within this thread" 
                                href="http://www.codeproject.com/bitmap/ImageConvolution.asp?df=100&amp;tid=1071630&amp;forumid=36474&amp;select=1428511#xx1428511xx">View 
                                Thread</A>][<A 
                                title="Get the URL for this message" 
                                href="http://www.codeproject.com/bitmap/ImageConvolution.asp?msg=1428511#xx1428511xx">Get 
                                Link</A>]</TD>
                                <TD class=messagetitle align=right>
                                <SCRIPT language=Javascript>MsgVoteForm(196,1428511);</SCRIPT>
                                </TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
              <TR>
                <TD><IMG height=6 
                  src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/t.gif" 
                  width=1 border=0></TD></TR>
              <TR id=1428513_h0 bgColor=#fef9e7>
                <TD width="100%">
                  <TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
                    <TBODY>
                    <TR>
                      <TD bgColor=white><A name=xx1428513xx></A><IMG height=1 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/ind.gif" 
                        width=100><IMG 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/news_general.gif" 
                        align=absMiddle>&nbsp;</TD>
                      <TD class=messagetitle width="100%"><A 
                        class=messagetitle id=DynMessLink 
                        href="http://www.codeproject.com/bitmap/ImageConvolution.asp?df=100&amp;forumid=36474&amp;select=1428513#xx1428513xx" 
                        name=1428513>Re: Terrible</A></TD>
                      <TD vAlign=bottom><A 
                        href="http://www.codeproject.com/script/profile/whos_who.asp?id=6556"><IMG 
                        title="Click for User Profile" height=15 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/userinfo.gif" 
                        width=14 border=0></A>&nbsp;</TD>
                      <TD noWrap width=140><FONT class=messagetitle>Christian 
                        Graus&nbsp;</FONT></TD>
                      <TD style="WIDTH: 9em" noWrap align=right 
                        width=120><FONT class=messagetitle>18:23 29 Mar 
                        '06&nbsp;</FONT></TD></TR></TBODY></TABLE></TD></TR>
              <TR id=1428513_h1 style="DISPLAY: none">
                <TD width="100%">
                  <TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
                    <TBODY>
                    <TR>
                      <TD><IMG height=1 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/ind.gif" 
                        width=100><IMG 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/news_blank.gif" 
                        align=absMiddle>&nbsp;</TD>
                      <TD width="100%" bgColor=#d5eaff>
                        <TABLE cellSpacing=5 cellPadding=0 width="100%" 
border=0>
                          <TBODY>
                          <TR>
                            <TD>
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD colSpan=2><FONT class=messagecontent>I don't 
                                recall it saying that before, 
                                however.<BR><BR><BR>Christian Graus - Microsoft 
                                MVP - C++<BR>&nbsp;</FONT></TD></TR>
                                <TR vAlign=top>
                                <TD class=messagetitle>[<A 
                                title="Reply to this current thread" 
                                href="http://www.codeproject.com/script/comments/user_reply.asp?main=/bitmap/ImageConvolution.asp&amp;df=100&amp;forumid=36474&amp;select=1428513">Reply</A>][<A 
                                title="Email a reply to the author of this message" 
                                href="http://www.codeproject.com/script/comments/user_mail.asp?main=/bitmap/ImageConvolution.asp&amp;df=100&amp;forumid=36474&amp;select=1428513">Email</A>][<A 
                                title="View only messages within this thread" 
                                href="http://www.codeproject.com/bitmap/ImageConvolution.asp?df=100&amp;tid=1071630&amp;forumid=36474&amp;select=1428513#xx1428513xx">View 
                                Thread</A>][<A 
                                title="Get the URL for this message" 
                                href="http://www.codeproject.com/bitmap/ImageConvolution.asp?msg=1428513#xx1428513xx">Get 
                                Link</A>]</TD>
                                <TD class=messagetitle align=right>
                                <SCRIPT language=Javascript>MsgVoteForm(6556,1428513);</SCRIPT>
                                </TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
              <TR>
                <TD><IMG height=6 
                  src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/t.gif" 
                  width=1 border=0></TD></TR>
              <TR id=1429178_h0 bgColor=#fef9e7>
                <TD width="100%">
                  <TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
                    <TBODY>
                    <TR>
                      <TD bgColor=white><A name=xx1429178xx></A><IMG height=1 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/ind.gif" 
                        width=110><IMG 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/news_general.gif" 
                        align=absMiddle>&nbsp;</TD>
                      <TD class=messagetitle width="100%"><A 
                        class=messagetitle id=DynMessLink 
                        href="http://www.codeproject.com/bitmap/ImageConvolution.asp?df=100&amp;forumid=36474&amp;select=1429178#xx1429178xx" 
                        name=1429178>Re: Terrible</A></TD>
                      <TD vAlign=bottom><A 
                        href="http://www.codeproject.com/script/profile/whos_who.asp?id=24814"><IMG 
                        title="CodeProject supporter - Click for Profile" 
                        height=16 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/support_icon.gif" 
                        width=16 border=0></A>&nbsp;</TD>
                      <TD noWrap width=140><FONT class=messagetitle>Fred 
                        Ackers&nbsp;</FONT></TD>
                      <TD style="WIDTH: 9em" noWrap align=right 
                        width=120><FONT class=messagetitle>6:22 30 Mar 
                        '06&nbsp;</FONT></TD></TR></TBODY></TABLE></TD></TR>
              <TR id=1429178_h1 style="DISPLAY: none">
                <TD width="100%">
                  <TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
                    <TBODY>
                    <TR>
                      <TD><IMG height=1 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/ind.gif" 
                        width=110><IMG 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/news_blank.gif" 
                        align=absMiddle>&nbsp;</TD>
                      <TD width="100%" bgColor=#d5eaff>
                        <TABLE cellSpacing=5 cellPadding=0 width="100%" 
border=0>
                          <TBODY>
                          <TR>
                            <TD>
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD colSpan=2><FONT class=messagecontent>You are 
                                correct. It did not say that before. I read your 
                                post, and thought that you made an important 
                                point. So I decided to point out that its not 
                                meant for fast processing, its just to show 
                                people how to do a simple convolution... And of 
                                course to update the solution to VC++.NET 2003 
                                as well.<BR><BR>Nothing is impossible, It's 
                                merely a matter of finding an answer to the 
                                question of HOW? ... And answering that question 
                                is usually the most difficult part of the 
                                job!!!<BR><BR>-- modified at 6:23 Thursday 30th 
                                March, 2006<BR>&nbsp;</FONT></TD></TR>
                                <TR vAlign=top>
                                <TD class=messagetitle>[<A 
                                title="Reply to this current thread" 
                                href="http://www.codeproject.com/script/comments/user_reply.asp?main=/bitmap/ImageConvolution.asp&amp;df=100&amp;forumid=36474&amp;select=1429178">Reply</A>][<A 
                                title="Email a reply to the author of this message" 
                                href="http://www.codeproject.com/script/comments/user_mail.asp?main=/bitmap/ImageConvolution.asp&amp;df=100&amp;forumid=36474&amp;select=1429178">Email</A>][<A 
                                title="View only messages within this thread" 
                                href="http://www.codeproject.com/bitmap/ImageConvolution.asp?df=100&amp;tid=1071630&amp;forumid=36474&amp;select=1429178#xx1429178xx">View 
                                Thread</A>][<A 
                                title="Get the URL for this message" 
                                href="http://www.codeproject.com/bitmap/ImageConvolution.asp?msg=1429178#xx1429178xx">Get 
                                Link</A>]</TD>
                                <TD class=messagetitle align=right>
                                <SCRIPT language=Javascript>MsgVoteForm(24814,1429178);</SCRIPT>
                                </TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
              <TR>
                <TD><IMG height=6 
                  src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/t.gif" 
                  width=1 border=0></TD></TR>
              <TR id=1440926_h0 bgColor=#fef9e7>
                <TD width="100%">
                  <TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
                    <TBODY>
                    <TR>
                      <TD bgColor=white><A name=xx1440926xx></A><IMG height=1 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/ind.gif" 
                        width=90><IMG 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/news_general.gif" 
                        align=absMiddle>&nbsp;</TD>
                      <TD class=messagetitle width="100%"><A 
                        class=messagetitle id=DynMessLink 
                        href="http://www.codeproject.com/bitmap/ImageConvolution.asp?df=100&amp;forumid=36474&amp;select=1440926#xx1440926xx" 
                        name=1440926>Re: Terrible</A></TD>
                      <TD vAlign=bottom><A 
                        href="http://www.codeproject.com/script/profile/whos_who.asp?id=704720"><IMG 
                        title="Click for User Profile" height=15 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/userinfo.gif" 
                        width=14 border=0></A>&nbsp;</TD>
                      <TD noWrap width=140><FONT 
                        class=messagetitle>JKaminski&nbsp;</FONT></TD>
                      <TD style="WIDTH: 9em" noWrap align=right 
                        width=120><FONT class=messagetitle>8:55 7 Apr 
                        '06&nbsp;</FONT></TD></TR></TBODY></TABLE></TD></TR>
              <TR id=1440926_h1 style="DISPLAY: none">
                <TD width="100%">
                  <TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
                    <TBODY>
                    <TR>
                      <TD><IMG height=1 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/ind.gif" 
                        width=90><IMG 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/news_blank.gif" 
                        align=absMiddle>&nbsp;</TD>
                      <TD width="100%" bgColor=#d5eaff>
                        <TABLE cellSpacing=5 cellPadding=0 width="100%" 
border=0>
                          <TBODY>
                          <TR>
                            <TD>
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD colSpan=2><FONT class=messagecontent>
                                <BLOCKQUOTE class=FQ>
                                <DIV class=FQA>Christian Graus 
                                wrote:</DIV>Georgi Petrov wrote:<BR>Yes code is 
                                swower, but Fast Fourier Transform for images is 
                                swower too<BR><BR>So what ? FFT is slower than 
                                what ? It's slower than adding two ints 
                                together, for sure. That doesn't mean that when 
                                I write a FFT routine ( or any other routine ), 
                                that I don't do it properly because it will be 
                                slow anyway.</BLOCKQUOTE><BR><BR>I feel that I 
                                need to clarify an obvious misunderstanding 
                                here. Georgi Petrov meant that convolution of 
                                images can alternatively be done in Fourier 
                                domain, by using the FFT to switch between 
                                domains. If the filter kernel is larger than - 
                                let's say - 7x7, then this method may become 
                                acutally faster than doing convolution in 
                                spatial domain. But for smaller kernels, the FFT 
                                is clearly the bottleneck.<BR><BR>Take 
                                care,<BR>Juergen <BR>&nbsp;</FONT></TD></TR>
                                <TR vAlign=top>
                                <TD class=messagetitle>[<A 
                                title="Reply to this current thread" 
                                href="http://www.codeproject.com/script/comments/user_reply.asp?main=/bitmap/ImageConvolution.asp&amp;df=100&amp;forumid=36474&amp;select=1440926">Reply</A>][<A 
                                title="Email a reply to the author of this message" 
                                href="http://www.codeproject.com/script/comments/user_mail.asp?main=/bitmap/ImageConvolution.asp&amp;df=100&amp;forumid=36474&amp;select=1440926">Email</A>][<A 
                                title="View only messages within this thread" 
                                href="http://www.codeproject.com/bitmap/ImageConvolution.asp?df=100&amp;tid=1071630&amp;forumid=36474&amp;select=1440926#xx1440926xx">View 
                                Thread</A>][<A 
                                title="Get the URL for this message" 
                                href="http://www.codeproject.com/bitmap/ImageConvolution.asp?msg=1440926#xx1440926xx">Get 
                                Link</A>]</TD>
                                <TD class=messagetitle align=right>
                                <SCRIPT language=Javascript>MsgVoteForm(704720,1440926);</SCRIPT>
                                </TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
              <TR>
                <TD><IMG height=6 
                  src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/t.gif" 
                  width=1 border=0></TD></TR>
              <TR id=1073265_h0 bgColor=#fef9e7>
                <TD width="100%">
                  <TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
                    <TBODY>
                    <TR>
                      <TD bgColor=white><A name=xx1073265xx></A><IMG height=1 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/ind.gif" 
                        width=72><IMG 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/news_general.gif" 
                        align=absMiddle>&nbsp;</TD>
                      <TD class=messagetitle width="100%"><A 
                        class=messagetitle id=DynMessLink 
                        href="http://www.codeproject.com/bitmap/ImageConvolution.asp?df=100&amp;forumid=36474&amp;select=1073265#xx1073265xx" 
                        name=1073265>Re: Terrible</A></TD>
                      <TD vAlign=bottom><A 
                        href="http://www.codeproject.com/script/profile/whos_who.asp?id=6556"><IMG 
                        title="Click for User Profile" height=15 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/userinfo.gif" 
                        width=14 border=0></A>&nbsp;</TD>
                      <TD noWrap width=140><FONT class=messagetitle>Christian 
                        Graus&nbsp;</FONT></TD>
                      <TD style="WIDTH: 9em" noWrap align=right 
                        width=120><FONT class=messagetitle>14:50 1 Apr 
                        '05&nbsp;</FONT></TD></TR></TBODY></TABLE></TD></TR>
              <TR id=1073265_h1 style="DISPLAY: none">
                <TD width="100%">
                  <TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
                    <TBODY>
                    <TR>
                      <TD><IMG height=1 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/ind.gif" 
                        width=72><IMG 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/news_blank.gif" 
                        align=absMiddle>&nbsp;</TD>
                      <TD width="100%" bgColor=#d5eaff>
                        <TABLE cellSpacing=5 cellPadding=0 width="100%" 
border=0>
                          <TBODY>
                          <TR>
                            <TD>
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD colSpan=2><FONT class=messagecontent>Hell - 
                                I just realised you're not the author, the 
                                author has not responded to me at all. Not that 
                                I mind, but it changes the perspective of some 
                                comments I made. <BR><BR>Christian<BR><BR>I have 
                                several lifelong friends that are New Yorkers 
                                but I have always gravitated toward the 
                                weirdo's. - Richard 
                                Stringer<BR>&nbsp;</FONT></TD></TR>
                                <TR vAlign=top>
                                <TD class=messagetitle>[<A 
                                title="Reply to this current thread" 
                                href="http://www.codeproject.com/script/comments/user_reply.asp?main=/bitmap/ImageConvolution.asp&amp;df=100&amp;forumid=36474&amp;select=1073265">Reply</A>][<A 
                                title="Email a reply to the author of this message" 
                                href="http://www.codeproject.com/script/comments/user_mail.asp?main=/bitmap/ImageConvolution.asp&amp;df=100&amp;forumid=36474&amp;select=1073265">Email</A>][<A 
                                title="View only messages within this thread" 
                                href="http://www.codeproject.com/bitmap/ImageConvolution.asp?df=100&amp;tid=1071630&amp;forumid=36474&amp;select=1073265#xx1073265xx">View 
                                Thread</A>][<A 
                                title="Get the URL for this message" 
                                href="http://www.codeproject.com/bitmap/ImageConvolution.asp?msg=1073265#xx1073265xx">Get 
                                Link</A>]</TD>
                                <TD class=messagetitle align=right>
                                <SCRIPT language=Javascript>MsgVoteForm(6556,1073265);</SCRIPT>
                                </TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
              <TR>
                <TD><IMG height=5 
                  src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/t.gif" 
                  width=1 border=0></TD></TR>
              <TR height=1>
                <TD bgColor=#ff9900><IMG height=1 
                  src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/t.gif" 
                  width=1></TD></TR>
              <TR id=908400_h0 bgColor=#fef9e7>
                <TD width="100%">
                  <TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
                    <TBODY>
                    <TR>
                      <TD bgColor=white><A name=xx908400xx></A><IMG 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/news_general.gif" 
                        align=absMiddle>&nbsp;</TD>
                      <TD class=messagetitle width="100%"><A 
                        class=messagetitle id=DynMessLink 
                        href="http://www.codeproject.com/bitmap/ImageConvolution.asp?df=100&amp;forumid=36474&amp;select=908400#xx908400xx" 
                        name=908400><B>O! Yes it is excelent</B></A></TD>
                      <TD vAlign=bottom><A 
                        href="http://www.codeproject.com/script/profile/whos_who.asp?id=46125"><IMG 
                        title="Click for User Profile" height=15 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/userinfo.gif" 
                        width=14 border=0></A>&nbsp;</TD>
                      <TD noWrap width=140><FONT class=messagetitle><B>Georgi 
                        Petrov</B>&nbsp;</FONT></TD>
                      <TD style="WIDTH: 9em" noWrap align=right 
                        width=120><FONT class=messagetitle><B>6:45 26 Aug 
                        '04</B>&nbsp;</FONT></TD></TR></TBODY></TABLE></TD></TR>
              <TR id=908400_h1 style="DISPLAY: none">
                <TD width="100%">
                  <TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
                    <TBODY>
                    <TR>
                      <TD><IMG 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/news_blank.gif" 
                        align=absMiddle>&nbsp;</TD>
                      <TD width="100%" bgColor=#d5eaff>
                        <TABLE cellSpacing=5 cellPadding=0 width="100%" 
border=0>
                          <TBODY>
                          <TR>
                            <TD>
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD colSpan=2><FONT class=messagecontent>You did 
                                an excelent work, do you like to join me.<BR>I 
                                need someone like you, for open project 
                                ECG_1.<BR>It is not ready yet, but I like to 
                                expand my(our) work on free open code project 
                                for medical records DSP and image DSP too.<BR>So 
                                I plane to include some features, like CCD 
                                imagin software, and much more DSP 
                                capabilities.<BR>http://www.codeproject.com/tools/ecg_dsp.asp<BR><BR>&nbsp;</FONT></TD></TR>
                                <TR vAlign=top>
                                <TD class=messagetitle>[<A 
                                title="Reply to this current thread" 
                                href="http://www.codeproject.com/script/comments/user_reply.asp?main=/bitmap/ImageConvolution.asp&amp;df=100&amp;forumid=36474&amp;select=908400">Reply</A>][<A 
                                title="Email a reply to the author of this message" 
                                href="http://www.codeproject.com/script/comments/user_mail.asp?main=/bitmap/ImageConvolution.asp&amp;df=100&amp;forumid=36474&amp;select=908400">Email</A>][<A 
                                title="View only messages within this thread" 
                                href="http://www.codeproject.com/bitmap/ImageConvolution.asp?df=100&amp;tid=908400&amp;forumid=36474&amp;select=908400#xx908400xx">View 
                                Thread</A>][<A 
                                title="Get the URL for this message" 
                                href="http://www.codeproject.com/bitmap/ImageConvolution.asp?msg=908400#xx908400xx">Get 
                                Link</A>]</TD>
                                <TD class=messagetitle align=right>
                                <SCRIPT language=Javascript>MsgVoteForm(46125,908400);</SCRIPT>
                                </TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
              <TR>
                <TD><IMG height=6 
                  src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/t.gif" 
                  width=1 border=0></TD></TR>
              <TR id=1071632_h0 bgColor=#fef9e7>
                <TD width="100%">
                  <TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
                    <TBODY>
                    <TR>
                      <TD bgColor=white><A name=xx1071632xx></A><IMG height=1 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/ind.gif" 
                        width=18><IMG 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/news_general.gif" 
                        align=absMiddle>&nbsp;</TD>
                      <TD class=messagetitle width="100%"><A 
                        class=messagetitle id=DynMessLink 
                        href="http://www.codeproject.com/bitmap/ImageConvolution.asp?df=100&amp;forumid=36474&amp;select=1071632#xx1071632xx" 
                        name=1071632>Re: O! Yes it is excelent</A></TD>
                      <TD vAlign=bottom><A 
                        href="http://www.codeproject.com/script/profile/whos_who.asp?id=6556"><IMG 
                        title="Click for User Profile" height=15 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/userinfo.gif" 
                        width=14 border=0></A>&nbsp;</TD>
                      <TD noWrap width=140><FONT class=messagetitle>Christian 
                        Graus&nbsp;</FONT></TD>
                      <TD style="WIDTH: 9em" noWrap align=right 
                        width=120><FONT class=messagetitle>22:04 30 Mar 
                        '05&nbsp;</FONT></TD></TR></TBODY></TABLE></TD></TR>
              <TR id=1071632_h1 style="DISPLAY: none">
                <TD width="100%">
                  <TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
                    <TBODY>
                    <TR>
                      <TD><IMG height=1 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/ind.gif" 
                        width=18><IMG 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/news_blank.gif" 
                        align=absMiddle>&nbsp;</TD>
                      <TD width="100%" bgColor=#d5eaff>
                        <TABLE cellSpacing=5 cellPadding=0 width="100%" 
border=0>
                          <TBODY>
                          <TR>
                            <TD>
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD colSpan=2><FONT class=messagecontent>Are you 
                                going to include DICOM support 
                                ?<BR><BR><BR>Christian<BR><BR>I have several 
                                lifelong friends that are New Yorkers but I have 
                                always gravitated toward the weirdo's. - Richard 
                                Stringer<BR>&nbsp;</FONT></TD></TR>
                                <TR vAlign=top>
                                <TD class=messagetitle>[<A 
                                title="Reply to this current thread" 
                                href="http://www.codeproject.com/script/comments/user_reply.asp?main=/bitmap/ImageConvolution.asp&amp;df=100&amp;forumid=36474&amp;select=1071632">Reply</A>][<A 
                                title="Email a reply to the author of this message" 
                                href="http://www.codeproject.com/script/comments/user_mail.asp?main=/bitmap/ImageConvolution.asp&amp;df=100&amp;forumid=36474&amp;select=1071632">Email</A>][<A 
                                title="View only messages within this thread" 
                                href="http://www.codeproject.com/bitmap/ImageConvolution.asp?df=100&amp;tid=908400&amp;forumid=36474&amp;select=1071632#xx1071632xx">View 
                                Thread</A>][<A 
                                title="Get the URL for this message" 
                                href="http://www.codeproject.com/bitmap/ImageConvolution.asp?msg=1071632#xx1071632xx">Get 
                                Link</A>]</TD>
                                <TD class=messagetitle align=right>
                                <SCRIPT language=Javascript>MsgVoteForm(6556,1071632);</SCRIPT>
                                </TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
              <TR>
                <TD><IMG height=6 
                  src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/t.gif" 
                  width=1 border=0></TD></TR>
              <TR id=1071734_h0 bgColor=#fef9e7>
                <TD width="100%">
                  <TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
                    <TBODY>
                    <TR>
                      <TD bgColor=white><A name=xx1071734xx></A><IMG height=1 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/ind.gif" 
                        width=36><IMG 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/news_general.gif" 
                        align=absMiddle>&nbsp;</TD>
                      <TD class=messagetitle width="100%"><A 
                        class=messagetitle id=DynMessLink 
                        href="http://www.codeproject.com/bitmap/ImageConvolution.asp?df=100&amp;forumid=36474&amp;select=1071734#xx1071734xx" 
                        name=1071734>Re: O! Yes it is excelent</A></TD>
                      <TD vAlign=bottom><A 
                        href="http://www.codeproject.com/script/profile/whos_who.asp?id=46125"><IMG 
                        title="Click for User Profile" height=15 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/userinfo.gif" 
                        width=14 border=0></A>&nbsp;</TD>
                      <TD noWrap width=140><FONT class=messagetitle>Georgi 
                        Petrov&nbsp;</FONT></TD>
                      <TD style="WIDTH: 9em" noWrap align=right 
                        width=120><FONT class=messagetitle>1:15 31 Mar 
                        '05&nbsp;</FONT></TD></TR></TBODY></TABLE></TD></TR>
              <TR id=1071734_h1 style="DISPLAY: none">
                <TD width="100%">
                  <TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
                    <TBODY>
                    <TR>
                      <TD><IMG height=1 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/ind.gif" 
                        width=36><IMG 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/news_blank.gif" 
                        align=absMiddle>&nbsp;</TD>
                      <TD width="100%" bgColor=#d5eaff>
                        <TABLE cellSpacing=5 cellPadding=0 width="100%" 
border=0>
                          <TBODY>
                          <TR>
                            <TD>
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD colSpan=2><FONT class=messagecontent>What is 
                                DICOM?<BR><IMG 
                                src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/smiley_wink.gif" 
                                align=absMiddle> <BR>&nbsp;</FONT></TD></TR>
                                <TR vAlign=top>
                                <TD class=messagetitle>[<A 
                                title="Reply to this current thread" 
                                href="http://www.codeproject.com/script/comments/user_reply.asp?main=/bitmap/ImageConvolution.asp&amp;df=100&amp;forumid=36474&amp;select=1071734">Reply</A>][<A 
                                title="Email a reply to the author of this message" 
                                href="http://www.codeproject.com/script/comments/user_mail.asp?main=/bitmap/ImageConvolution.asp&amp;df=100&amp;forumid=36474&amp;select=1071734">Email</A>][<A 
                                title="View only messages within this thread" 
                                href="http://www.codeproject.com/bitmap/ImageConvolution.asp?df=100&amp;tid=908400&amp;forumid=36474&amp;select=1071734#xx1071734xx">View 
                                Thread</A>][<A 
                                title="Get the URL for this message" 
                                href="http://www.codeproject.com/bitmap/ImageConvolution.asp?msg=1071734#xx1071734xx">Get 
                                Link</A>]</TD>
                                <TD class=messagetitle align=right>
                                <SCRIPT language=Javascript>MsgVoteForm(46125,1071734);</SCRIPT>
                                </TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
              <TR>
                <TD><IMG height=6 
                  src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/t.gif" 
                  width=1 border=0></TD></TR>
              <TR id=1072376_h0 bgColor=#fef9e7>
                <TD width="100%">
                  <TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
                    <TBODY>
                    <TR>
                      <TD bgColor=white><A name=xx1072376xx></A><IMG height=1 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/ind.gif" 
                        width=54><IMG 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/news_general.gif" 
                        align=absMiddle>&nbsp;</TD>
                      <TD class=messagetitle width="100%"><A 
                        class=messagetitle id=DynMessLink 
                        href="http://www.codeproject.com/bitmap/ImageConvolution.asp?df=100&amp;forumid=36474&amp;select=1072376#xx1072376xx" 
                        name=1072376>Re: O! Yes it is excelent</A></TD>
                      <TD vAlign=bottom><A 
                        href="http://www.codeproject.com/script/profile/whos_who.asp?id=6556"><IMG 
                        title="Click for User Profile" height=15 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/userinfo.gif" 
                        width=14 border=0></A>&nbsp;</TD>
                      <TD noWrap width=140><FONT class=messagetitle>Christian 
                        Graus&nbsp;</FONT></TD>
                      <TD style="WIDTH: 9em" noWrap align=right 
                        width=120><FONT class=messagetitle>18:00 31 Mar 
                        '05&nbsp;</FONT></TD></TR></TBODY></TABLE></TD></TR>
              <TR id=1072376_h1 style="DISPLAY: none">
                <TD width="100%">
                  <TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
                    <TBODY>
                    <TR>
                      <TD><IMG height=1 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/ind.gif" 
                        width=54><IMG 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/news_blank.gif" 
                        align=absMiddle>&nbsp;</TD>
                      <TD width="100%" bgColor=#d5eaff>
                        <TABLE cellSpacing=5 cellPadding=0 width="100%" 
border=0>
                          <TBODY>
                          <TR>
                            <TD>
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD colSpan=2><FONT class=messagecontent>DICOM 
                                is THE image format for medical images. 
                                <BR><BR>Christian<BR><BR>I have several lifelong 
                                friends that are New Yorkers but I have always 
                                gravitated toward the weirdo's. - Richard 
                                Stringer<BR>&nbsp;</FONT></TD></TR>
                                <TR vAlign=top>
                                <TD class=messagetitle>[<A 
                                title="Reply to this current thread" 
                                href="http://www.codeproject.com/script/comments/user_reply.asp?main=/bitmap/ImageConvolution.asp&amp;df=100&amp;forumid=36474&amp;select=1072376">Reply</A>][<A 
                                title="Email a reply to the author of this message" 
                                href="http://www.codeproject.com/script/comments/user_mail.asp?main=/bitmap/ImageConvolution.asp&amp;df=100&amp;forumid=36474&amp;select=1072376">Email</A>][<A 
                                title="View only messages within this thread" 
                                href="http://www.codeproject.com/bitmap/ImageConvolution.asp?df=100&amp;tid=908400&amp;forumid=36474&amp;select=1072376#xx1072376xx">View 
                                Thread</A>][<A 
                                title="Get the URL for this message" 
                                href="http://www.codeproject.com/bitmap/ImageConvolution.asp?msg=1072376#xx1072376xx">Get 
                                Link</A>]</TD>
                                <TD class=messagetitle align=right>
                                <SCRIPT language=Javascript>MsgVoteForm(6556,1072376);</SCRIPT>
                                </TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
              <TR>
                <TD><IMG height=5 
                  src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/t.gif" 
                  width=1 border=0></TD></TR>
              <TR height=1>
                <TD bgColor=#ff9900><IMG height=1 
                  src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/t.gif" 
                  width=1></TD></TR>
              <TR id=903214_h0 bgColor=#fef9e7>
                <TD width="100%">
                  <TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
                    <TBODY>
                    <TR>
                      <TD bgColor=white><A name=xx903214xx></A><IMG 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/news_general.gif" 
                        align=absMiddle>&nbsp;</TD>
                      <TD class=messagetitle width="100%"><A 
                        class=messagetitle id=DynMessLink 
                        href="http://www.codeproject.com/bitmap/ImageConvolution.asp?df=100&amp;forumid=36474&amp;select=903214#xx903214xx" 
                        name=903214><B>Grayscale conversion</B></A></TD>
                      <TD vAlign=bottom><IMG height=13 
                        alt="Unconfirmed/Anonymous posting" 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/usersuss.gif" 
                        width=15></A>&nbsp;</TD>
                      <TD noWrap width=140><FONT 
                        class=messagetitle><B>Erik_Egsgard</B>&nbsp;</FONT></TD>
                      <TD style="WIDTH: 9em" noWrap align=right 
                        width=120><FONT class=messagetitle><B>9:45 20 Aug 
                        '04</B>&nbsp;</FONT></TD></TR></TBODY></TABLE></TD></TR>
              <TR id=903214_h1 style="DISPLAY: none">
                <TD width="100%">
                  <TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
                    <TBODY>
                    <TR>
                      <TD><IMG 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/news_blank.gif" 
                        align=absMiddle>&nbsp;</TD>
                      <TD width="100%" bgColor=#d5eaff>
                        <TABLE cellSpacing=5 cellPadding=0 width="100%" 
border=0>
                          <TBODY>
                          <TR>
                            <TD>
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD colSpan=2><FONT class=messagecontent>Nice 
                                article.<IMG 
                                src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/smiley_smile.gif" 
                                align=absMiddle><BR><BR>But the ratios of R, G 
                                and B you are using to convert to grayscale are 
                                incorrect. The standard color space for computer 
                                graphics is sRGB (for more details see <A 
                                href="http://www.codeproject.com/bitmap/">http://www.codeproject.com/bitmap/</A>). 
                                <BR><BR>The sRGB ratios for converting to 
                                "grayscale" (aka luma) are:<BR><BR>gray = 0.2126 
                                * R + 0.701 * G + 0.0722 * 
                                B<BR><BR><BR>&nbsp;</FONT></TD></TR>
                                <TR vAlign=top>
                                <TD class=messagetitle>[<A 
                                title="Reply to this current thread" 
                                href="http://www.codeproject.com/script/comments/user_reply.asp?main=/bitmap/ImageConvolution.asp&amp;df=100&amp;forumid=36474&amp;select=903214">Reply</A>][<A 
                                title="Email a reply to the author of this message" 
                                href="http://www.codeproject.com/script/comments/user_mail.asp?main=/bitmap/ImageConvolution.asp&amp;df=100&amp;forumid=36474&amp;select=903214">Email</A>][<A 
                                title="View only messages within this thread" 
                                href="http://www.codeproject.com/bitmap/ImageConvolution.asp?df=100&amp;tid=903214&amp;forumid=36474&amp;select=903214#xx903214xx">View 
                                Thread</A>][<A 
                                title="Get the URL for this message" 
                                href="http://www.codeproject.com/bitmap/ImageConvolution.asp?msg=903214#xx903214xx">Get 
                                Link</A>]</TD>
                                <TD class=messagetitle align=right>[<A 
                                href="http://www.codeproject.com/script/comments/owner_modify_pw.asp?main=/bitmap/ImageConvolution.asp&amp;df=100&amp;forumid=36474&amp;select=903214"><I>Modify</I></A>|<A 
                                href="http://www.codeproject.com/script/comments/owner_delete_pw.asp?main=/bitmap/ImageConvolution.asp&amp;df=100&amp;forumid=36474&amp;select=903214"><I>Delete</I></A>]<BR>
                                <SCRIPT language=Javascript>MsgVoteForm(0,903214);</SCRIPT>
                                </TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
              <TR>
                <TD><IMG height=6 
                  src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/t.gif" 
                  width=1 border=0></TD></TR>
              <TR id=903762_h0 bgColor=#fef9e7>
                <TD width="100%">
                  <TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
                    <TBODY>
                    <TR>
                      <TD bgColor=white><A name=xx903762xx></A><IMG height=1 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/ind.gif" 
                        width=18><IMG 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/news_general.gif" 
                        align=absMiddle>&nbsp;</TD>
                      <TD class=messagetitle width="100%"><A 
                        class=messagetitle id=DynMessLink 
                        href="http://www.codeproject.com/bitmap/ImageConvolution.asp?df=100&amp;forumid=36474&amp;select=903762#xx903762xx" 
                        name=903762>Re: Grayscale conversion</A></TD>
                      <TD vAlign=bottom><A 
                        href="http://www.codeproject.com/script/profile/whos_who.asp?id=24814"><IMG 
                        title="CodeProject supporter - Click for Profile" 
                        height=16 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/support_icon.gif" 
                        width=16 border=0></A>&nbsp;</TD>
                      <TD noWrap width=140><FONT 
                        class=messagetitle>Aqiruse&nbsp;</FONT></TD>
                      <TD style="WIDTH: 9em" noWrap align=right 
                        width=120><FONT class=messagetitle>19:58 20 Aug 
                        '04&nbsp;</FONT></TD></TR></TBODY></TABLE></TD></TR>
              <TR id=903762_h1 style="DISPLAY: none">
                <TD width="100%">
                  <TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
                    <TBODY>
                    <TR>
                      <TD><IMG height=1 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/ind.gif" 
                        width=18><IMG 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/news_blank.gif" 
                        align=absMiddle>&nbsp;</TD>
                      <TD width="100%" bgColor=#d5eaff>
                        <TABLE cellSpacing=5 cellPadding=0 width="100%" 
border=0>
                          <TBODY>
                          <TR>
                            <TD>
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD colSpan=2><FONT 
                                class=messagecontent>According to other 
                                documents such as <A 
                                href="http://www.efg2.com/Lab/ImageProcessing/HistoStretchGrays.htm">http://www.efg2.com/Lab/ImageProcessing/HistoStretchGrays.htm</A> 
                                the numbers I used are correct. These also 
                                support the figures I used:<BR><A 
                                href="http://www.dfanning.com/ip_tips/color2gray.html">http://www.dfanning.com/ip_tips/color2gray.html</A><BR><A 
                                href="http://www.mathworks.com/access/helpdesk/help/techdoc/creating_plots/chimag15.html">http://www.mathworks.com/access/helpdesk/help/techdoc/creating_plots/chimag15.html</A><BR><A 
                                href="http://www.jasonwaltman.com/thesis/filter-grayscale.html">http://www.jasonwaltman.com/thesis/filter-grayscale.html</A> 
                                <BR><BR>Nothing is impossible, It's merely a 
                                matter of finding an answer to the question of 
                                HOW? ... And answering that question is usually 
                                the most difficult part of the 
                                job!!!<BR>&nbsp;</FONT></TD></TR>
                                <TR vAlign=top>
                                <TD class=messagetitle>[<A 
                                title="Reply to this current thread" 
                                href="http://www.codeproject.com/script/comments/user_reply.asp?main=/bitmap/ImageConvolution.asp&amp;df=100&amp;forumid=36474&amp;select=903762">Reply</A>][<A 
                                title="Email a reply to the author of this message" 
                                href="http://www.codeproject.com/script/comments/user_mail.asp?main=/bitmap/ImageConvolution.asp&amp;df=100&amp;forumid=36474&amp;select=903762">Email</A>][<A 
                                title="View only messages within this thread" 
                                href="http://www.codeproject.com/bitmap/ImageConvolution.asp?df=100&amp;tid=903214&amp;forumid=36474&amp;select=903762#xx903762xx">View 
                                Thread</A>][<A 
                                title="Get the URL for this message" 
                                href="http://www.codeproject.com/bitmap/ImageConvolution.asp?msg=903762#xx903762xx">Get 
                                Link</A>]</TD>
                                <TD class=messagetitle align=right>
                                <SCRIPT language=Javascript>MsgVoteForm(24814,903762);</SCRIPT>
                                </TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
              <TR>
                <TD><IMG height=6 
                  src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/t.gif" 
                  width=1 border=0></TD></TR>
              <TR id=904333_h0 bgColor=#fef9e7>
                <TD width="100%">
                  <TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
                    <TBODY>
                    <TR>
                      <TD bgColor=white><A name=xx904333xx></A><IMG height=1 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/ind.gif" 
                        width=36><IMG 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/news_general.gif" 
                        align=absMiddle>&nbsp;</TD>
                      <TD class=messagetitle width="100%"><A 
                        class=messagetitle id=DynMessLink 
                        href="http://www.codeproject.com/bitmap/ImageConvolution.asp?df=100&amp;forumid=36474&amp;select=904333#xx904333xx" 
                        name=904333>Re: Grayscale conversion</A></TD>
                      <TD vAlign=bottom><IMG height=13 
                        alt="Unconfirmed/Anonymous posting" 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/usersuss.gif" 
                        width=15></A>&nbsp;</TD>
                      <TD noWrap width=140><FONT 
                        class=messagetitle>Erik_Egsgard&nbsp;</FONT></TD>
                      <TD style="WIDTH: 9em" noWrap align=right 
                        width=120><FONT class=messagetitle>0:29 22 Aug 
                        '04&nbsp;</FONT></TD></TR></TBODY></TABLE></TD></TR>
              <TR id=904333_h1 style="DISPLAY: none">
                <TD width="100%">
                  <TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
                    <TBODY>
                    <TR>
                      <TD><IMG height=1 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/ind.gif" 
                        width=36><IMG 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/news_blank.gif" 
                        align=absMiddle>&nbsp;</TD>
                      <TD width="100%" bgColor=#d5eaff>
                        <TABLE cellSpacing=5 cellPadding=0 width="100%" 
border=0>
                          <TBODY>
                          <TR>
                            <TD>
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD colSpan=2><FONT class=messagecontent>Yes, 
                                but all those links are wrong. There is in fact 
                                a lot of incorrect information on color science 
                                on the internet.<BR><BR>To quote from one of 
                                those sources: "This "Y" value is the grayscale 
                                component in the YIQ color space used in NTSC 
                                television"<BR><BR>This statement is correct, 
                                the equation you are using will produce the 
                                grayscale component when dealing with NTSC 
                                television. However as I mentioned in my first 
                                message, the standard for computer graphics is 
                                sRGB.<BR><BR>sRGB uses different primaries than 
                                NTSC so a different equation to convert to 
                                "grayscale" is needed. 
                                <BR>&nbsp;</FONT></TD></TR>
                                <TR vAlign=top>
                                <TD class=messagetitle>[<A 
                                title="Reply to this current thread" 
                                href="http://www.codeproject.com/script/comments/user_reply.asp?main=/bitmap/ImageConvolution.asp&amp;df=100&amp;forumid=36474&amp;select=904333">Reply</A>][<A 
                                title="Email a reply to the author of this message" 
                                href="http://www.codeproject.com/script/comments/user_mail.asp?main=/bitmap/ImageConvolution.asp&amp;df=100&amp;forumid=36474&amp;select=904333">Email</A>][<A 
                                title="View only messages within this thread" 
                                href="http://www.codeproject.com/bitmap/ImageConvolution.asp?df=100&amp;tid=903214&amp;forumid=36474&amp;select=904333#xx904333xx">View 
                                Thread</A>][<A 
                                title="Get the URL for this message" 
                                href="http://www.codeproject.com/bitmap/ImageConvolution.asp?msg=904333#xx904333xx">Get 
                                Link</A>]</TD>
                                <TD class=messagetitle align=right>[<A 
                                href="http://www.codeproject.com/script/comments/owner_modify_pw.asp?main=/bitmap/ImageConvolution.asp&amp;df=100&amp;forumid=36474&amp;select=904333"><I>Modify</I></A>|<A 
                                href="http://www.codeproject.com/script/comments/owner_delete_pw.asp?main=/bitmap/ImageConvolution.asp&amp;df=100&amp;forumid=36474&amp;select=904333"><I>Delete</I></A>]<BR>
                                <SCRIPT language=Javascript>MsgVoteForm(0,904333);</SCRIPT>
                                </TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
              <TR>
                <TD><IMG height=6 
                  src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/t.gif" 
                  width=1 border=0></TD></TR>
              <TR id=906238_h0 bgColor=#fef9e7>
                <TD width="100%">
                  <TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
                    <TBODY>
                    <TR>
                      <TD bgColor=white><A name=xx906238xx></A><IMG height=1 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/ind.gif" 
                        width=36><IMG 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/news_general.gif" 
                        align=absMiddle>&nbsp;</TD>
                      <TD class=messagetitle width="100%"><A 
                        class=messagetitle id=DynMessLink 
                        href="http://www.codeproject.com/bitmap/ImageConvolution.asp?df=100&amp;forumid=36474&amp;select=906238#xx906238xx" 
                        name=906238>Re: Grayscale conversion</A></TD>
                      <TD vAlign=bottom><IMG height=13 
                        alt="Unconfirmed/Anonymous posting" 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/usersuss.gif" 
                        width=15></A>&nbsp;</TD>
                      <TD noWrap width=140><FONT 
                        class=messagetitle>Erik_Egsgard&nbsp;</FONT></TD>
                      <TD style="WIDTH: 9em" noWrap align=right 
                        width=120><FONT class=messagetitle>8:57 24 Aug 
                        '04&nbsp;</FONT></TD></TR></TBODY></TABLE></TD></TR>
              <TR id=906238_h1 style="DISPLAY: none">
                <TD width="100%">
                  <TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
                    <TBODY>
                    <TR>
                      <TD><IMG height=1 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/ind.gif" 
                        width=36><IMG 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/news_blank.gif" 
                        align=absMiddle>&nbsp;</TD>
                      <TD width="100%" bgColor=#d5eaff>
                        <TABLE cellSpacing=5 cellPadding=0 width="100%" 
border=0>
                          <TBODY>
                          <TR>
                            <TD>
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD colSpan=2><FONT class=messagecontent>Looking 
                                back at my messages, I thought it might be 
                                helpful to include some links to my 
                                sources.<BR><BR>So I stopped being lazy and 
                                here's a link to the Color FAQ (lots of good 
                                info), questions 8 and 11 deal with RGB 
                                weighting.<BR><BR><A 
                                href="http://www.codeproject.com/bitmap/">http://www.codeproject.com/bitmap/</A><BR><BR>&nbsp;</FONT></TD></TR>
                                <TR vAlign=top>
                                <TD class=messagetitle>[<A 
                                title="Reply to this current thread" 
                                href="http://www.codeproject.com/script/comments/user_reply.asp?main=/bitmap/ImageConvolution.asp&amp;df=100&amp;forumid=36474&amp;select=906238">Reply</A>][<A 
                                title="Email a reply to the author of this message" 
                                href="http://www.codeproject.com/script/comments/user_mail.asp?main=/bitmap/ImageConvolution.asp&amp;df=100&amp;forumid=36474&amp;select=906238">Email</A>][<A 
                                title="View only messages within this thread" 
                                href="http://www.codeproject.com/bitmap/ImageConvolution.asp?df=100&amp;tid=903214&amp;forumid=36474&amp;select=906238#xx906238xx">View 
                                Thread</A>][<A 
                                title="Get the URL for this message" 
                                href="http://www.codeproject.com/bitmap/ImageConvolution.asp?msg=906238#xx906238xx">Get 
                                Link</A>]</TD>
                                <TD class=messagetitle align=right>[<A 
                                href="http://www.codeproject.com/script/comments/owner_modify_pw.asp?main=/bitmap/ImageConvolution.asp&amp;df=100&amp;forumid=36474&amp;select=906238"><I>Modify</I></A>|<A 
                                href="http://www.codeproject.com/script/comments/owner_delete_pw.asp?main=/bitmap/ImageConvolution.asp&amp;df=100&amp;forumid=36474&amp;select=906238"><I>Delete</I></A>]<BR>
                                <SCRIPT language=Javascript>MsgVoteForm(0,906238);</SCRIPT>
                                </TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
              <TR>
                <TD><IMG height=6 
                  src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/t.gif" 
                  width=1 border=0></TD></TR>
              <TR id=967740_h0 bgColor=#fef9e7>
                <TD width="100%">
                  <TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
                    <TBODY>
                    <TR>
                      <TD bgColor=white><A name=xx967740xx></A><IMG height=1 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/ind.gif" 
                        width=54><IMG 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/news_general.gif" 
                        align=absMiddle>&nbsp;</TD>
                      <TD class=messagetitle width="100%"><A 
                        class=messagetitle id=DynMessLink 
                        href="http://www.codeproject.com/bitmap/ImageConvolution.asp?df=100&amp;forumid=36474&amp;select=967740#xx967740xx" 
                        name=967740>Re: Grayscale conversion</A></TD>
                      <TD vAlign=bottom><A 
                        href="http://www.codeproject.com/script/profile/whos_who.asp?id=46125"><IMG 
                        title="Click for User Profile" height=15 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/userinfo.gif" 
                        width=14 border=0></A>&nbsp;</TD>
                      <TD noWrap width=140><FONT class=messagetitle>Georgi 
                        Petrov&nbsp;</FONT></TD>
                      <TD style="WIDTH: 9em" noWrap align=right 
                        width=120><FONT class=messagetitle>6:52 8 Nov 
                        '04&nbsp;</FONT></TD></TR></TBODY></TABLE></TD></TR>
              <TR id=967740_h1 style="DISPLAY: none">
                <TD width="100%">
                  <TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
                    <TBODY>
                    <TR>
                      <TD><IMG height=1 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/ind.gif" 
                        width=54><IMG 
                        src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/news_blank.gif" 
                        align=absMiddle>&nbsp;</TD>
                      <TD width="100%" bgColor=#d5eaff>
                        <TABLE cellSpacing=5 cellPadding=0 width="100%" 
border=0>
                          <TBODY>
                          <TR>
                            <TD>
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD colSpan=2><FONT 
                                class=messagecontent>Hi,<BR>thank you vry 
                                much.<BR>Hm...<BR>do you think to separate your 
                                code in a single class?<BR><IMG 
                                src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/smiley_smile.gif" 
                                align=absMiddle>)<BR>I have some dificulties 
                                making a strange histogram filter.<BR>I separate 
                                image in to 5x5 rectangles and then search the 
                                max value and set the resulting in 2x2 position 
                                inside the rectangle <BR>&nbsp;</FONT></TD></TR>
                                <TR vAlign=top>
                                <TD class=messagetitle>[<A 
                                title="Reply to this current thread" 
                                href="http://www.codeproject.com/script/comments/user_reply.asp?main=/bitmap/ImageConvolution.asp&amp;df=100&amp;forumid=36474&amp;select=967740">Reply</A>][<A 
                                title="Email a reply to the author of this message" 
                                href="http://www.codeproject.com/script/comments/user_mail.asp?main=/bitmap/ImageConvolution.asp&amp;df=100&amp;forumid=36474&amp;select=967740">Email</A>][<A 
                                title="View only messages within this thread" 
                                href="http://www.codeproject.com/bitmap/ImageConvolution.asp?df=100&amp;tid=903214&amp;forumid=36474&amp;select=967740#xx967740xx">View 
                                Thread</A>][<A 
                                title="Get the URL for this message" 
                                href="http://www.codeproject.com/bitmap/ImageConvolution.asp?msg=967740#xx967740xx">Get 
                                Link</A>]</TD>
                                <TD class=messagetitle align=right>
                                <SCRIPT language=Javascript>MsgVoteForm(46125,967740);</SCRIPT>
                                </TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
              <TR>
                <TD><IMG height=5 
                  src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/t.gif" 
                  width=1 border=0></TD></TR></TBODY></TABLE></TD></TR>
        <TR bgColor=#fbedbb>
          <TD>
            <TABLE cellPadding=2 width="100%">
              <TBODY>
              <TR>
                <TD class=messagetitle>Last Visit: 10:35 Sunday 4th June, 
                2006</TD>
                <TD noWrap align=right><FONT class=messagetitle><SPAN 
                  class=HoverLink>First</SPAN> <SPAN class=HoverLink>Prev</SPAN> 
                  <A class=HoverLink 
                  href="http://www.codeproject.com/bitmap/ImageConvolution.asp?df=100&amp;forumid=36474&amp;fr=26" 
                  name=HoverNL>Next</A> <SPAN 
                  class=HoverLink>&nbsp;&nbsp;&nbsp;&nbsp;</SPAN> 
              </FONT></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></DIV>
<P class=smallText><IMG 
src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/news_general.gif" 
align=absMiddle> General comment &nbsp;&nbsp; <IMG 
src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/news_info.gif" 
align=absMiddle> News / Info &nbsp;&nbsp; <IMG 
src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/news_question.gif" 
align=absMiddle> Question &nbsp;&nbsp; <IMG 
src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/news_answer.gif" 
align=absMiddle> Answer &nbsp;&nbsp; <IMG 
src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/news_game.gif" 
align=absMiddle> Joke / Game &nbsp;&nbsp; <IMG 
src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/news_sticky.gif" 
align=absMiddle> Admin message</P><BR>
<TABLE cellSpacing=5 width="100%">
  <TBODY>
  <TR vAlign=top>
    <TD><FONT style="FONT-SIZE: 7pt" size=1><A 
      href="http://www.codeproject.com/?cat=1">All Topics</A>, <A 
      href="http://www.codeproject.com/?cat=2">MFC / C++</A> &gt;&gt; <A 
      href="http://www.codeproject.com/bitmap/">Bitmaps &amp; Palettes</A> 
      &gt;&gt; <A href="http://www.codeproject.com/bitmap/#Bitmaps">Bitmaps</A> 
      <BR>Updated: 29 Mar 2006 12:05 </FONT></TD>
    <TD align=right><FONT style="FONT-SIZE: 7pt" size=1>Article content 
      copyright Fred Ackers, 2004<BR>everything else Copyright © <A 
      href="mailto:webmaster@codeproject.com">CodeProject</A>, 1999-2006</A>. 
      <BR>Web01 | <A href="http://www.codeproject.com/info/MediaKit">Advertise 
      on The Code Project</A> | <A 
      href="http://www.codeproject.com/info/privacy.asp">Privacy</A> 
  </FONT></TD></TR></TBODY></TABLE><BR>
<CENTER>
<TABLE cellSpacing=0 cellPadding=0 width="95%" border=0>
  <TBODY>
  <TR>
    <TD bgColor=#ff9900 height=1><IMG height=1 
      src="Convolution of Bitmaps - The Code Project - Bitmaps &amp; Palettes_files/space.gif"></TD></TR>
  <TR>
    <TD align=middle><FONT size=1><A 
      href="http://www.theultimatetoolbox.com/">The Ultimate Toolbox</A>  <A 
      href="http://www.aspalliance.com/">ASP Alliance</A>  <A 
      href="http://www.developerfusion.co.uk/">Developer Fusion</A>  <A 
      href="http://www.developersdex.com/">Developersdex</A>  <A 
      href="http://www.devguru.com/">DevGuru</A>  <A 
      href="http://www.programmersheaven.com/">Programmers Heaven</A>  <A 
      href="http://www.planet-source-code.com/">Planet Source Code</A>  <A 
      href="http://www.tek-tips.com/">Tek-Tips Forums</A>  
</FONT></TD></TR></TBODY></TABLE></CENTER></BODY></HTML>

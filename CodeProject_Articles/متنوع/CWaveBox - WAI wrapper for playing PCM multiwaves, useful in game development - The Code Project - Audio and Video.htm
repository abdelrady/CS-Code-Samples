<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- saved from url=(0045)http://www.codeproject.com/audio/CWaveBox.asp -->
<HTML><HEAD><TITLE>CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video</TITLE>
<META http-equiv=Reply-to content=mailto:webmaster@codeproject.com>
<META http-equiv=Content-Type content="text/html; charset=ISO-8859-1">
<META content=en-US name=MS.LOCALE>
<META content="Multiwave player ('Waveform Audio Interface' PCM wave wrapper)." 
name=Description>
<META content=kbArticle name=Search.TopicType>
<META content=zenith__ name=Author>
<META content="14 Apr 2005 14:00:00 GMT" name=Search.PublishDate>
<META content="14 Apr 2005 14:00:00 GMT" name=Search.RevisedDate>
<META 
content="Free source code, , Visual C++, MFC, Windows, PCM, wave, multiwave, waveOutWrite, waveOutProc, 'Waveform Audio Interface'" 
name=keywords>
<META 
content="Article content copyright zenith__, 2005, everthing else Copyright © CodeProject, 1999-2007, All Rights Reserved." 
name=Copyright><LINK title="CodeProject Lounge Postings" 
href="http://www.codeproject.com/webservices/LoungeRSS.aspx" 
type=application/rss+xml rel=alternate><LINK 
title="CodeProject Latest articles - All topics" 
href="http://www.codeproject.com/webservices/articlerss.aspx?cat=1" 
type=application/rss+xml rel=alternate><LINK 
title="CodeProject Latest articles - MFC / C++" 
href="http://www.codeproject.com/webservices/articlerss.aspx?cat=2" 
type=application/rss+xml rel=alternate><LINK 
title="CodeProject Latest articles - C#" 
href="http://www.codeproject.com/webservices/articlerss.aspx?cat=3" 
type=application/rss+xml rel=alternate><LINK 
title="CodeProject Latest articles - ASP.NET" 
href="http://www.codeproject.com/webservices/articlerss.aspx?cat=4" 
type=application/rss+xml rel=alternate><LINK 
title="CodeProject Latest articles - .NET" 
href="http://www.codeproject.com/webservices/articlerss.aspx?cat=5" 
type=application/rss+xml rel=alternate><LINK 
title="CodeProject Latest articles - VB.NET" 
href="http://www.codeproject.com/webservices/articlerss.aspx?cat=6" 
type=application/rss+xml rel=alternate><LINK title="The Code Project" 
href="http://www.codeproject.com/info/OpenSearch.xml" 
type=application/opensearchdescription+xml rel=search><LINK href="/favicon.ico" 
type=image/ico rel=icon><LINK href="/favicon.ico" rel="SHORTCUT ICON"><LINK 
href="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/global.css" 
type=text/css rel=stylesheet>
<SCRIPT language=javascript 
src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/oncopy.js"></SCRIPT>

<SCRIPT language=javascript>
if (top != self) top.location.href = location.href;
if (typeof(DemoUrl) != "undefined")
	document.write('<me' + 'ta http' + '-equiv="re' + 'fresh" con' + 'tent="1;url=' + DemoUrl + '">');
</SCRIPT>

<META content="MSHTML 6.00.2900.2180" name=GENERATOR></HEAD>
<BODY style="MARGIN: 0px" oncopy="return copyCode();" text=black vLink=navy 
aLink=red link=blue bgColor=white>
<SCRIPT 
src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/urchin.js" 
type=text/javascript>
</SCRIPT>

<SCRIPT type=text/javascript>
_uacct = "UA-1735123-1";
urchinTracker();
</SCRIPT>

<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=HeaderLogo><A href="http://www.codeproject.com/"><IMG height=90 
      alt=Home 
      src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/codeproject225x90.gif" 
      border=0></A></TD>
    <TD class=HeaderBanner><SPAN id=AdBanner4>
      <SCRIPT language=javascript>document.write("<a href=\"/script/admentor/admentorredir.asp?id=4164&way=ban\" target=_blank><img src=\"/script/ann/ServeImg.aspx?File=%2Fscript%2Fadmentor%2Fimages%2F9rays%5F755%5Fflygrid%5F728x90v2%2Ejpg&C=False&id=4164&cb=1536845\" alt=\"\" border=0 width=728 height=90></a>");</SCRIPT>
      </SPAN></TD></TR>
  <TR>
    <TD colSpan=2>
      <TABLE class=MemberNavBar cellSpacing=0 cellPadding=5 width="100%" 
      border=0>
        <TBODY>
        <TR vAlign=center>
          <TD class=smallText style="FONT-WEIGHT: bold">4,547,362 members and 
            growing! &nbsp; 10,474 now online. </TD>
          <TD class=userNavText align=right><A 
            href="http://www.codeproject.com/script/profile/whos_who.asp?id=2959938">abdelrady2030 
            </A>| <A 
            href="http://www.codeproject.com/script/profile/modify.asp?ct=/audio/CWaveBox.asp"><B>My 
            Settings</B></A> | <A 
            href="http://www.codeproject.com/script/profile/bookmark_list.asp">My 
            Bookmarks</A> | <A 
            href="http://www.codeproject.com/script/articles/list_articles.asp?userid=2959938">My 
            Articles</A> | <A 
            href="http://www.codeproject.com/script/profile/logoff.asp?ct=/audio/CWaveBox.asp">Sign 
            out</A> </TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD colSpan=2>
      <TABLE class=SiteNavBar id=tblSiteToolbar cellSpacing=0 cellPadding=0>
        <TBODY>
        <TR>
          <TD><A href="http://www.codeproject.com/">Home</A></TD>
          <TD noWrap><A 
            href="http://www.codeproject.com/index.asp?cat=2">MFC/C++</A></TD>
          <TD><A href="http://www.codeproject.com/index.asp?cat=3">C#</A></TD>
          <TD noWrap><A 
            href="http://www.codeproject.com/index.asp?cat=4">ASP.NET</A></TD>
          <TD noWrap><A 
            href="http://www.codeproject.com/index.asp?cat=6">VB.NET</A></TD>
          <TD noWrap><A 
            href="http://www.codeproject.com/index.asp?cat=8">Architect</A></TD>
          <TD noWrap><A 
            href="http://www.codeproject.com/index.asp?cat=9">SQL</A></TD>
          <TD class=SelCat noWrap><A 
            href="http://www.codeproject.com/index.asp?cat=1">All Topics</A></TD>
          <TD width="100%">&nbsp;</TD>
          <TD>
            <DIV id=MenuPos 
            style="WIDTH: 300px; POSITION: relative; TOP: 1px; HEIGHT: 22px">
            <TABLE id=MPH 
            style="BORDER-TOP-WIDTH: 0px; BORDER-LEFT-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; HEIGHT: 20px; BORDER-RIGHT-WIDTH: 0px" 
            cellSpacing=0 cellPadding=0 width=300>
              <TBODY>
              <TR vAlign=center>
                <TD 
                style="BORDER-TOP-WIDTH: 0px; BORDER-LEFT-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-RIGHT-WIDTH: 0px" 
                noWrap><A 
                  href="http://www.codeproject.com/info/faq.asp">Help!</A></TD>
                <TD 
                style="BORDER-TOP-WIDTH: 0px; BORDER-LEFT-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-RIGHT-WIDTH: 0px" 
                noWrap><A 
                  href="http://www.codeproject.com/info/latest.asp">Articles</A></TD>
                <TD 
                style="BORDER-TOP-WIDTH: 0px; BORDER-LEFT-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-RIGHT-WIDTH: 0px" 
                noWrap><A 
                  href="http://www.codeproject.com/script/comments/forums.asp">Message 
                  Boards</A></TD>
                <TD 
                style="BORDER-TOP-WIDTH: 0px; BORDER-LEFT-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-RIGHT-WIDTH: 0px" 
                noWrap><A 
                  href="http://www.codeproject.com/lounge.asp">Lounge</A></TD></TR></TBODY></TABLE></DIV></TD></TR></TBODY></TABLE>
      <SCRIPT type=text/javascript>function Go(){return}</SCRIPT>

      <SCRIPT 
      src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/cpmenu_var.js" 
      type=text/javascript></SCRIPT>

      <SCRIPT 
      src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/menu10_com.js" 
      type=text/javascript></SCRIPT>

      <SCRIPT type=text/javascript>
var MPH = document.getElementById("MPH");
if (MPH) MPH.style.display='none';
</SCRIPT>
    </TD></TR>
  <TR>
    <TD colSpan=2>
      <TABLE class=ArticleHeader cellSpacing=0 cellPadding=3 width="100%">
        <TBODY>
        <TR vAlign=top>
          <TD class=smallText style="PADDING-RIGHT: 10px"><A 
            href="http://www.codeproject.com/?cat=1">All Topics</A>, <A 
            href="http://www.codeproject.com/?cat=2">MFC/C++</A> &gt;&gt; <A 
            href="http://www.codeproject.com/audio/">Audio and Video</A> 
            &gt;&gt; <A 
            href="http://www.codeproject.com/audio/#Audio">Audio</A><BR><BR>
            <DIV style="FONT-WEIGHT: bold; FONT-SIZE: 16pt">CWaveBox - WAI 
            wrapper for playing PCM multiwaves, useful in game 
            development</DIV><B>By <A 
            href="http://www.codeproject.com/script/Articles/list_articles.asp?userid=866695">zenith__</A></B>. 
            <BR><BR>
            <DIV style="FONT-SIZE: 12px">Multiwave player ('Waveform Audio 
            Interface' PCM wave wrapper).</DIV></TD>
          <TD class=smallText style="WIDTH: 200px">C++ (VC6), C#<BR>Windows 
            (WinXP), WinCE, .NET<BR>MFC, Win32, VS (VS6)<BR>Dev<BR><SPAN 
            style="PADDING-RIGHT: 2ex">Posted</SPAN>: <B>15 Apr 
            2005</B><BR><SPAN style="PADDING-RIGHT: 3ex">Views</SPAN>: 
            <B>49,142</B> </TD></TR></TD></TR></TD></TR></TBODY></TABLE>
      <TABLE cellSpacing=0 cellPadding=0 border=0>
        <TBODY>
        <TR vAlign=top>
          <TD class=LHNavBar rowSpan=2><!-- Yes, there are IE hacks that will allow us to create a min-width DIV 
	     (eg http://www.webreference.com/programming/min-width/) but I couldn't
	     be arsed. Wait for it in v2.0 -->
            <DIV class=FeatureBlockHeader>Announcements</DIV>
            <DIV class="FeatureBlockContent RHFeatureBar">
            <DIV style="PADDING-TOP: 3px"><IMG style="MARGIN-LEFT: 0px" 
            height=16 alt=Jobs 
            src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/staff_sm.gif" 
            width=12 align=absMiddle> <A 
            href="http://www.codeproject.com/info/jobs/">http://www.codeproject.com/info/jobs/</A></DIV>
            <DIV style="PADDING-TOP: 3px"><IMG style="MARGIN-LEFT: 0px" 
            height=20 alt=Comp 
            src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/prize_winner_sm.gif" 
            width=10 align=absMiddle> <A 
            href="http://www.codeproject.com/script/competitions/monthly/">Monthly 
            Competition</A></DIV></DIV>
            <CENTER>
            <SCRIPT language=javascript>document.write("<IFRAME src=\"/script/ann/ServeHTML.aspx?C=False&id=4246&cb=1536854\" border=0 frameborder=0 scrolling=no width=160 height=600></IFRAME>");</SCRIPT>
            </CENTER><BR><BR><IMG height=1 
            src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/t.gif" 
            width=160> </TD>
          <TD width="100%">
            <TABLE class=SearchHeaderBar cellSpacing=0 width="100%">
              <TBODY>
              <TR>
                <TD vAlign=center noWrap align=right width="60%">
                  <FORM style="MARGIN: 0px" name=Search action=/info/search.asp 
                  method=post><B>Search &nbsp;</B><INPUT class=smallText 
                  style="WIDTH: 200px" name=target> <SELECT 
                  style="FONT-WEIGHT: bold; FONT-SIZE: 8pt" name=st> <OPTION 
                    value=kw selected>Articles</OPTION> <OPTION 
                    value=au>Authors</OPTION></SELECT> <INPUT style="FONT-WEIGHT: bold; FONT-SIZE: 8pt" type=submit value=" Go! "> 
                  &nbsp; </FORM></TD>
                <TD class=tinyText noWrap><A 
                  href="http://www.codeproject.com/info/search.asp">Advanced 
                  Search</A><BR><A 
                  href="http://www.codeproject.com/script/articles/sections.asp">Sitemap</A> 
                </TD></TR></TBODY></TABLE>
            <TABLE width="100%">
              <TBODY>
              <TR vAlign=top>
                <TD class=SmallText noWrap>
                  <TABLE>
                    <TBODY>
                    <TR>
                      <TD class=smallText noWrap><IMG 
                        src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/print.gif" 
                        align=absMiddle> <A 
                        href="http://www.codeproject.com/audio/CWaveBox.asp?print=true" 
                        target=_print>Print</A></TD>
                      <TD class=smallText noWrap><IMG 
                        src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/sitebuild_icon.gif" 
                        align=absMiddle><A 
                        href="http://www.codeproject.com/script/submit/ReportProblem.asp?GUID=CWaveBox%2Faudio4%2F15%2F2005">Broken 
                        Article?</A></TD>
                      <TD class=smallText noWrap><IMG 
                        src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/link.gif" 
                        align=absMiddle><A 
                        href="http://www.codeproject.com/script/profile/add_bookmark.asp?t=0&amp;ct=%2Faudio%2FCWaveBox%2Easp&amp;guid=CWaveBox%2Faudio4%2F15%2F2005">Bookmark</A></TD>
                      <TD class=smallText noWrap><IMG 
                        src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/mail_small.gif" 
                        align=absMiddle> <A 
                        href="http://www.codeproject.com/audio/CWaveBox.asp#__comments">Discuss</A></TD>
                      <TD class=smallText noWrap><IMG 
                        src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/mail.gif" 
                        align=absMiddle> <A 
                        href="http://www.codeproject.com/script/recommend/form.asp?guid=CWaveBox%2Faudio4%2F15%2F2005">Send 
                        to a friend</A></TD></TR></TBODY></TABLE></TD>
                <TD noWrap align=right><A name=__top></A>
                  <TABLE>
                    <TBODY>
                    <TR>
                      <TD class=smallText align=right>15 votes for this 
                        article.</TD>
                      <TD>
                        <TABLE cellSpacing=0 cellPadding=0 border=2>
                          <TBODY>
                          <TR>
                            <TD><IMG height=5 
                              src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/red.gif" 
                              width=20 border=0></TD>
                            <TD><IMG height=5 
                              src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/red.gif" 
                              width=20 border=0></TD>
                            <TD><IMG height=5 
                              src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/red.gif" 
                              width=20 border=0></TD>
                            <TD><IMG height=5 
                              src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/red.gif" 
                              width=20 border=0></TD>
                            <TD><IMG height=5 
                              src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/red.gif" 
                              width=9 border=0><IMG height=5 
                              src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/white.gif" 
                              width=11 border=0></TD></TR></TBODY></TABLE></TD></TR>
                    <TR>
                      <TD class=smallText align=right colSpan=2><A 
                        title="Calculated as rating x Log10(# votes)" 
                        href="http://www.codeproject.com/script/articles/top_articles.asp?st=2">Popularity: 
                        5.25</A>. Rating: <B>4.46</B> out of 
                  5.</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
        <TR>
          <TD class=ArticlePane><SPAN id=intelliTXT>
            <DIV id=contentdiv><!-- Article Starts -->
            <UL class=download>
              <LI><A 
              href="http://www.codeproject.com/audio/CWaveBox/CWaveBox_demo.zip">Download 
              demo project - 375 Kb</A> 
              <LI><A 
              href="http://www.codeproject.com/audio/CWaveBox/CWaveBox_src.zip">Download 
              source - 5.84 Kb</A> </LI></UL>
            <P><IMG height=310 alt="Sample Image" 
            src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/CWaveBox.gif" 
            width=250></P>
            <H2>Introduction</H2>
            <P>Have you ever desired to play Waves in your Windows application 
            or game without being lost with SDK / MFC anomalies which give you 
            only a part of something, which is in fact useless if you're going 
            to do some serious work? Here, I'll collect all needed parts and 
            upgrade it to the higher level so you can think about more serious 
            work with sound.</P>
            <P>The <CODE>CWaveBox</CODE> class relies on the SDK 'Waveform Audio 
            Interface' API to play / produce (PCM uncompressed) multiwaves at 
            once. Mixing and timing of multiple waves is required in games for 
            adding interactive special/dimensional sound effects into. This 
            class enables you possibility for that through the Windows WAI 
            driver, by wrapping it with only one worker thread for multiwave 
            support. I've seen a lots of examples about this topic concentrated 
            about queuing / streaming WAI with two or more Wave data blocks 
            continuously to avoid gap when switching, but few or just one of 
            them only has properly freed / closed WAI interface which prevents 
            unstoppable waste of memory if not anything else. Memory waste / 
            leak of that (or any other) type is unknown with 
            <CODE>CWaveBox</CODE>. Playing performance is enhanced by caching 
            Wave and playing from RAM, so, this class isn't for 'classic 
            players' from file, which costs additional time for 'on the play' 
            caching when CPU time is not critical. If you want to, feel free and 
            recode it for such a thing, I won't be mad ;-). This class if fully 
            portable to Windows CE, so you can play within at Pocket PC 
also.</P>
            <H2>Background</H2>
            <P>Whole idea for coding this class came from 'need for a sound' 
            better than that from '<CODE>PlaySound</CODE>', 
            '<CODE>sndPlaySound</CODE>' or any other partial solution. This 
            class is already implemented in one board game, with great AI, for 
            Pocket PC (which my friend Vrx and I have coded). Special thanks to 
            people who have been translating the game tutorial into eight world 
            languages, and some of them have 'stuck into translation' ;-). Here 
            is a great tutorial at this topic: <A 
            href="http://www.insomniavisions.com/documents/tutorials/wave.php" 
            target=_blank>Using the Windows waveOut Interface</A>.</P>
            <P>Special thanks to the guy who wrote and coded the tutorial and 
            WinAmp <CODE>waveOut</CODE> plug-in. I hope he wouldn't criticize 
            me, because I have borrowed a few functions 
            (<CODE>allocateBlocks</CODE>, <CODE>freeBlocks</CODE> and 
            <CODE>waveOutProc</CODE>) from his tutorial / code and some of the 
            variables notation. I'm a lazy ass. ;-).</P>
            <P>All Waves mixed in the demo are downloaded from <A 
            href="http://www.members.tripod.com/~buggerluggs/ie/wav-dir184.htm" 
            target=_blank>here</A>.</P>
            <H2>Code, brief overview:</H2>
            <P>The <CODE>CWaveBox</CODE> class is structured with the WAVE model 
            which is used for storing wave <CODE>data</CODE>, <CODE>size</CODE>, 
            <CODE>wfx</CODE> (format info) loaded by the <CODE>Load</CODE> 
            method and Wave message <CODE>WMSG</CODE> set by <CODE>Play</CODE> 
            method, to provide INTERFACE model with all required information and 
            serves <CODE>PlayThread</CODE> as sub interface to the WAI driver in 
            order to successfully establish the WAI instance and play for every 
            Wave.</P>
            <H4>WaveBox.h</H4><PRE><SPAN class=cpp-comment>// WaveBox.h: interface for the CWave class.</SPAN>
<SPAN class=cpp-comment>//</SPAN>
<SPAN class=cpp-comment>//////////////////////////////////////////////////////////////////////</SPAN>

<SPAN class=cpp-preprocessor>#if !defined(AFX_WAVEBOX_H__DE24CFE1_7501_4DA3_AF18_667A845AAE49__INCLUDED_)</SPAN>
<SPAN class=cpp-preprocessor>#define AFX_WAVEBOX_H__DE24CFE1_7501_4DA3_AF18_667A845AAE49__INCLUDED_</SPAN>

<SPAN class=cpp-preprocessor>#if _MSC_VER &gt; 1000</SPAN>
<SPAN class=cpp-preprocessor>#pragma once</SPAN>
<SPAN class=cpp-preprocessor>#endif // _MSC_VER &gt; 1000</SPAN>


<SPAN class=cpp-comment>/////////////////////////////////////////////////////////////////////////////////</SPAN>
<SPAN class=cpp-comment>/////////////////////////////////////////////////////////////////////////////////</SPAN>
<SPAN class=cpp-comment>////</SPAN>
<SPAN class=cpp-comment>////                                                               by Zen '05</SPAN>
<SPAN class=cpp-comment>////</SPAN>
<SPAN class=cpp-comment>////                                    WaveBox class v0.95</SPAN>
<SPAN class=cpp-comment>////                                  ~~~~~~~~~~~~~~~~~~~~~~</SPAN>
<SPAN class=cpp-comment>////                                  ( PCM multiwave player )</SPAN>
<SPAN class=cpp-comment>////                                        play &amp; joy</SPAN>
<SPAN class=cpp-comment>////</SPAN>
<SPAN class=cpp-comment>////</SPAN>
<SPAN class=cpp-comment>////    </SPAN>
<SPAN class=cpp-comment>////</SPAN>

<SPAN class=cpp-comment>/// precompiler</SPAN>
<SPAN class=cpp-preprocessor>#include &lt;windows.h&gt;</SPAN>
<SPAN class=cpp-preprocessor>#include &lt;mmsystem.h&gt;</SPAN>

<SPAN class=cpp-comment>/// wave &amp; PCM marks</SPAN>
<SPAN class=cpp-preprocessor>#define WAVE_FILE_MARK          "RIFF"</SPAN>
<SPAN class=cpp-preprocessor>#define WAVE_HEAD_MARK          "WAVEfmt "</SPAN>
<SPAN class=cpp-preprocessor>#define WAVE_DATA_MARK          "data"</SPAN>
<SPAN class=cpp-preprocessor>#define WAVE_PCM_16             16</SPAN>
<SPAN class=cpp-preprocessor>#define WAVE_PCM_1               1</SPAN>

<SPAN class=cpp-comment>/// wfx header offsets</SPAN>
<SPAN class=cpp-preprocessor>#define OFFSET_FILE_LEFT         4</SPAN>
<SPAN class=cpp-preprocessor>#define OFFSET_HEAD_MARK         8</SPAN>
<SPAN class=cpp-preprocessor>#define OFFSET_WAVE_PCM1        16</SPAN>
<SPAN class=cpp-preprocessor>#define OFFSET_WAVE_PCM2        20</SPAN>
<SPAN class=cpp-preprocessor>#define OFFSET_CHANNELS         22</SPAN>
<SPAN class=cpp-preprocessor>#define OFFSET_SAMPLESPERSEC    24</SPAN>
<SPAN class=cpp-preprocessor>#define OFFSET_AVGBYTESPERSEC   28</SPAN>
<SPAN class=cpp-preprocessor>#define OFFSET_BLOCKALIGN       32</SPAN>
<SPAN class=cpp-preprocessor>#define OFFSET_BITSPERSAMPLE    34</SPAN>
<SPAN class=cpp-preprocessor>#define OFFSET_DATA_MARK        36</SPAN>
<SPAN class=cpp-preprocessor>#define OFFSET_DATA_SIZE        40</SPAN>
<SPAN class=cpp-preprocessor>#define OFFSET_WAVEDATA         44</SPAN>
<SPAN class=cpp-preprocessor>#define HEADER_SIZE             OFFSET_WAVEDATA</SPAN>
<SPAN class=cpp-preprocessor>#define EOF_EXTRA_INFO          60</SPAN>


<SPAN class=cpp-comment>/// messages</SPAN>
<SPAN class=cpp-keyword>typedef</SPAN> <SPAN class=cpp-keyword>unsigned</SPAN> <SPAN class=cpp-keyword>int</SPAN>            WMsg;   <SPAN class=cpp-comment>// wave messages</SPAN>
<SPAN class=cpp-keyword>typedef</SPAN> <SPAN class=cpp-keyword>unsigned</SPAN> <SPAN class=cpp-keyword>int</SPAN>            TMsg;   <SPAN class=cpp-comment>// thread messages</SPAN>

<SPAN class=cpp-preprocessor>#define WMSG_WAIT               0       // wave wait</SPAN>
<SPAN class=cpp-preprocessor>#define WMSG_START              1       // wave play</SPAN>
<SPAN class=cpp-preprocessor>#define TMSG_ALIVE              1       // thread alive</SPAN>
<SPAN class=cpp-preprocessor>#define TMSG_CLOSE              0       // thread close</SPAN>
<SPAN class=cpp-preprocessor>#define INT_FREE                0       // interface free</SPAN>
<SPAN class=cpp-preprocessor>#define INT_USED                1       // interface used</SPAN>
<SPAN class=cpp-preprocessor>#define THREAD_EXIT     0xABECEDA       // thread exit code</SPAN>

<SPAN class=cpp-comment>/// performance predefines</SPAN>
<SPAN class=cpp-preprocessor>#define SUPPORT_WAVES          10       // predefined wave count</SPAN>
<SPAN class=cpp-preprocessor>#define SUPPORT_INTERFACES     10       // predefined interface count</SPAN>

<SPAN class=cpp-comment>/// buffering</SPAN>
<SPAN class=cpp-preprocessor>#define READ_BLOCK           8192       // read wave ( file ) block size</SPAN>
<SPAN class=cpp-preprocessor>#define BLOCK_SIZE           8192       // queue block size</SPAN>
<SPAN class=cpp-preprocessor>#define BLOCK_COUNT            20       // queue block count</SPAN>
<SPAN class=cpp-preprocessor>#define BP_TURN                 1       // blocks per turn</SPAN>


<SPAN class=cpp-keyword>static</SPAN>  CRITICAL_SECTION        cs;     <SPAN class=cpp-comment>// critical section</SPAN>

<SPAN class=cpp-keyword>static</SPAN> <SPAN class=cpp-keyword>unsigned</SPAN> <SPAN class=cpp-keyword>int</SPAN> __stdcall 
             PlayThread( LPVOID lp );   <SPAN class=cpp-comment>// main play thread</SPAN>
<SPAN class=cpp-keyword>static</SPAN> <SPAN class=cpp-keyword>void</SPAN> CALLBACK waveOutProc(  HWAVEOUT  hWaveOut, <SPAN class=cpp-comment>// waveOut prototype</SPAN>
                                   UINT      uMsg, 
                                   DWORD     dwInstance,  
                                   DWORD     dwParam1,    
                                   DWORD     dwParam2);
<SPAN class=cpp-keyword>class</SPAN> CWaveBox 
{
    <SPAN class=cpp-keyword>struct</SPAN> WAVE
    {
        <SPAN class=cpp-keyword>char</SPAN>            *data;      <SPAN class=cpp-comment>/// wave    </SPAN>
        <SPAN class=cpp-keyword>unsigned</SPAN> <SPAN class=cpp-keyword>long</SPAN>    size;      <SPAN class=cpp-comment>/// size</SPAN>
        WAVEFORMATEX     wfx;       <SPAN class=cpp-comment>/// wfx</SPAN>
        WMsg             WMSG;      <SPAN class=cpp-comment>/// { 0,1 } wait / play</SPAN>
    };
    
    <SPAN class=cpp-keyword>struct</SPAN> INTERFACE
    {
        <SPAN class=cpp-comment>/// interface</SPAN>
        HWAVEOUT        dev;        <SPAN class=cpp-comment>/// device handle</SPAN>
        <SPAN class=cpp-keyword>unsigned</SPAN> <SPAN class=cpp-keyword>int</SPAN>    state;      <SPAN class=cpp-comment>/// { 0,1 } free / used</SPAN>

        <SPAN class=cpp-comment>/// wave</SPAN>
        WAVE           *wave;       <SPAN class=cpp-comment>/// current wave</SPAN>

        <SPAN class=cpp-comment>/// wave interface</SPAN>
        <SPAN class=cpp-keyword>unsigned</SPAN> <SPAN class=cpp-keyword>long</SPAN>   wpos;       <SPAN class=cpp-comment>/// current play position</SPAN>
        WAVEHDR*        wblock;     <SPAN class=cpp-comment>/// wave block</SPAN>
        volatile <SPAN class=cpp-keyword>int</SPAN>    wfreeblock; <SPAN class=cpp-comment>/// free blocks left</SPAN>
        <SPAN class=cpp-keyword>int</SPAN>             wcurrblock; <SPAN class=cpp-comment>/// current block</SPAN>
    };

<SPAN class=cpp-keyword>public</SPAN>:
    
    <SPAN class=cpp-comment>/// members</SPAN>
    INTERFACE       I[SUPPORT_INTERFACES]; <SPAN class=cpp-comment>// interface(s)</SPAN>
    WAVE            W[SUPPORT_WAVES];      <SPAN class=cpp-comment>// wave(s)</SPAN>
    <SPAN class=cpp-keyword>unsigned</SPAN> <SPAN class=cpp-keyword>int</SPAN>    wload;  <SPAN class=cpp-comment>// current wave(s) loaded</SPAN>
    TMsg            TMSG;   <SPAN class=cpp-comment>// thread msg { 1,0 } alive / close</SPAN>

    <SPAN class=cpp-comment>/// prototypes </SPAN>
    <SPAN class=cpp-keyword>int</SPAN> Load( TCHAR       *file );   <SPAN class=cpp-comment>// load wave into WaveBox</SPAN>
    <SPAN class=cpp-keyword>int</SPAN> Play( <SPAN class=cpp-keyword>unsigned</SPAN> <SPAN class=cpp-keyword>int</SPAN> wave );
    <SPAN class=cpp-comment>// play n wave from WaveBox ( starts play thread )</SPAN>

             CWaveBox();  <SPAN class=cpp-comment>// play thread created suspended</SPAN>
    <SPAN class=cpp-keyword>virtual</SPAN> ~CWaveBox();  <SPAN class=cpp-comment>// play thread terminated</SPAN>

    <SPAN class=cpp-comment>/// waveOut open &amp; close</SPAN>
    <SPAN class=cpp-keyword>int</SPAN> AddInterface( HWAVEOUT      *dev, <SPAN class=cpp-comment>/// push wave wfx to interface</SPAN>
                      WAVEFORMATEX  *wfx,
                      volatile <SPAN class=cpp-keyword>int</SPAN>  *wfreeblock );      
    <SPAN class=cpp-keyword>int</SPAN> RemoveInterface( HWAVEOUT dev );
    <SPAN class=cpp-comment>/// pull wave wfx from interface</SPAN>

<SPAN class=cpp-keyword>protected</SPAN>:
    
    <SPAN class=cpp-comment>/// thread</SPAN>
    HANDLE          thread;   <SPAN class=cpp-comment>/// play thread handle</SPAN>
    <SPAN class=cpp-keyword>unsigned</SPAN> <SPAN class=cpp-keyword>int</SPAN>    run;      <SPAN class=cpp-comment>/// suspended / resumed</SPAN>

    <SPAN class=cpp-comment>/// prototypes</SPAN>

    <SPAN class=cpp-comment>/// alloc heap for wave header blocks</SPAN>
    WAVEHDR*    allocateBlocks( <SPAN class=cpp-keyword>int</SPAN> size, <SPAN class=cpp-keyword>int</SPAN> count );
    <SPAN class=cpp-comment>/// free heap</SPAN>
    <SPAN class=cpp-keyword>void</SPAN>        freeBlocks( WAVEHDR* blockArray );
};

<SPAN class=cpp-preprocessor>#endif // !defined(AFX_WAVEBOX_H__DE24CFE1_7501_4DA3_AF18_667A845AAE49__INCLUDED_)</SPAN></PRE>
            <H4>CWaveBox()</H4>
            <P>In the constructor, <CODE>PlayThread</CODE> is created in 
            suspended mode, so will be resumed at first play. All supported 
            interfaces are set to initial state and Wave block headers are 
            created at heap (queuing blocks). A <CODE>LPVOID</CODE> argument 
            class instance is passed so <CODE>PlayThread</CODE> can easily 
            access any of the public methods/members inside the class.</P><PRE>CWaveBox::CWaveBox()
{ 
    <SPAN class=cpp-comment>// init wave(s) counter</SPAN>
    wload   = <SPAN class=cpp-literal>0</SPAN>;

    <SPAN class=cpp-comment>// thread suspended &lt; used for resuming thread at first play &gt;</SPAN>
    run     = <SPAN class=cpp-literal>0</SPAN>;

    <SPAN class=cpp-comment>// create suspended player thread</SPAN>
    thread  = CreateThread(  NULL,
                             <SPAN class=cpp-literal>0</SPAN>,
                             (LPTHREAD_START_ROUTINE)PlayThread,
                             (LPVOID)<SPAN class=cpp-keyword>this</SPAN>,
                             CREATE_SUSPENDED,
                             NULL  );
    

    <SPAN class=cpp-comment>// alloc mem for interface(s)</SPAN>
    <SPAN class=cpp-keyword>for</SPAN>( <SPAN class=cpp-keyword>unsigned</SPAN> <SPAN class=cpp-keyword>int</SPAN> i = <SPAN class=cpp-literal>0</SPAN>; i &lt; SUPPORT_INTERFACES; i++ )
    {
        I[i].wblock     = allocateBlocks( BLOCK_SIZE, BLOCK_COUNT );
        I[i].wfreeblock = BLOCK_COUNT;
        I[i].wcurrblock = <SPAN class=cpp-literal>0</SPAN>;
        I[i].state      = INT_FREE;
        I[i].wpos       = <SPAN class=cpp-literal>0</SPAN>;
    }
    
    <SPAN class=cpp-comment>// init msg</SPAN>
    <SPAN class=cpp-keyword>for</SPAN>( i = <SPAN class=cpp-literal>0</SPAN>; i &lt; SUPPORT_WAVES; i++ )    W[i].WMSG = WMSG_WAIT;

    <SPAN class=cpp-comment>// init cs</SPAN>
    InitializeCriticalSection( &amp;cs );
}</PRE>
            <H4>Load</H4>
            <P>First of all, Wave header is read from file and must pass several 
            verifications to satisfy the 'PCM wave' model. Then, Wave 
            <CODE>wfx</CODE> structure is filled and the whole <CODE>data</CODE> 
            block is loaded into memory.</P>
            <P><B>Note</B>: Load all waves (you want to play) before starting 
            the <CODE>Play</CODE> method, because there is no additional 
            <CODE>Load</CODE> supported if <CODE>PlayThread</CODE> is resumed by 
            starting at first <CODE>Play</CODE>. (See <CODE>wload</CODE>, it's 
            also used in <CODE>PlayThread</CODE> and is not protected by 
            critical section.)</P><PRE><SPAN class=cpp-keyword>int</SPAN> CWaveBox::Load( TCHAR *file )
{
    <SPAN class=cpp-keyword>if</SPAN>( wload == SUPPORT_WAVES )
        <SPAN class=cpp-keyword>return</SPAN> -<SPAN class=cpp-literal>1</SPAN>;

    HANDLE hFile;

    <SPAN class=cpp-comment>// open file</SPAN>
    <SPAN class=cpp-keyword>if</SPAN>((hFile = CreateFile( file,
                            GENERIC_READ,
                            FILE_SHARE_READ,
                            NULL,
                            OPEN_EXISTING,
                            <SPAN class=cpp-literal>0</SPAN>,
                            NULL )) == INVALID_HANDLE_VALUE)    <SPAN class=cpp-keyword>return</SPAN> -<SPAN class=cpp-literal>1</SPAN>;

    
    <SPAN class=cpp-comment>// read wave header</SPAN>
    <SPAN class=cpp-keyword>char</SPAN>            header[HEADER_SIZE];
    <SPAN class=cpp-keyword>unsigned</SPAN> <SPAN class=cpp-keyword>long</SPAN>   rbytes  = <SPAN class=cpp-literal>0</SPAN>;
    
    <SPAN class=cpp-keyword>if</SPAN>( !ReadFile(hFile, header, <SPAN class=cpp-keyword>sizeof</SPAN>(header), &amp;rbytes, NULL) )
    { CloseHandle(hFile);   <SPAN class=cpp-keyword>return</SPAN> -<SPAN class=cpp-literal>1</SPAN>; }

    <SPAN class=cpp-keyword>if</SPAN>( !rbytes || rbytes &lt; <SPAN class=cpp-keyword>sizeof</SPAN>(header) )
    { CloseHandle(hFile);   <SPAN class=cpp-keyword>return</SPAN> -<SPAN class=cpp-literal>1</SPAN>; }

    <SPAN class=cpp-comment>/// check if this is a wave file</SPAN>
    <SPAN class=cpp-keyword>if</SPAN>( strncmp( header, WAVE_FILE_MARK, strlen( WAVE_FILE_MARK )) )
    { CloseHandle(hFile);   <SPAN class=cpp-keyword>return</SPAN> -<SPAN class=cpp-literal>1</SPAN>; }

    <SPAN class=cpp-keyword>if</SPAN>( strncmp( header + OFFSET_HEAD_MARK, 
        WAVE_HEAD_MARK, strlen( WAVE_HEAD_MARK )) )
    { CloseHandle(hFile);   <SPAN class=cpp-keyword>return</SPAN> -<SPAN class=cpp-literal>1</SPAN>; }

    <SPAN class=cpp-comment>/// check if wave is uncompressed PCM format</SPAN>
    <SPAN class=cpp-keyword>if</SPAN> (    ((*(DWORD*)(header + OFFSET_WAVE_PCM1)) != WAVE_PCM_16 )
         || ((*(WORD *)(header + OFFSET_WAVE_PCM2)) != WAVE_PCM_1  ))
    {CloseHandle(hFile);     <SPAN class=cpp-keyword>return</SPAN> -<SPAN class=cpp-literal>1</SPAN>; }

    <SPAN class=cpp-comment>/// check for 'data' mark</SPAN>
    <SPAN class=cpp-keyword>if</SPAN>( !strncmp( header + OFFSET_DATA_MARK, 
                  WAVE_DATA_MARK, strlen( WAVE_DATA_MARK )) )
        W[wload].size = *((DWORD*)(header + OFFSET_DATA_SIZE ));
        <SPAN class=cpp-comment>/* size of data */</SPAN>  
    <SPAN class=cpp-keyword>else</SPAN>
    {   <SPAN class=cpp-comment>/// if data block size cant be read</SPAN>
        <SPAN class=cpp-comment>/// try to predict data block without extra info</SPAN>
        <SPAN class=cpp-comment>/// this is unusualy case</SPAN>
        W[wload].size  = *((DWORD*)(header + OFFSET_FILE_LEFT ));  
        W[wload].size -=  ( HEADER_SIZE - EOF_EXTRA_INFO );
        <SPAN class=cpp-comment>/* size of data */</SPAN> 
    }

    <SPAN class=cpp-comment>// fill WAVEFORMATEX from wave header</SPAN>
    W[wload].wfx.nSamplesPerSec  = 
       *((DWORD*)(header + OFFSET_SAMPLESPERSEC )); <SPAN class=cpp-comment>/* sample rate */</SPAN>
    W[wload].wfx.wBitsPerSample  = 
       *((WORD *)(header + OFFSET_BITSPERSAMPLE )); <SPAN class=cpp-comment>/* sample size */</SPAN>
    W[wload].wfx.nChannels       = 
       *((WORD *)(header + OFFSET_CHANNELS      )); <SPAN class=cpp-comment>/* channels    */</SPAN>
    W[wload].wfx.cbSize          = <SPAN class=cpp-literal>0</SPAN>;  <SPAN class=cpp-comment>/* size of _extra_ info */</SPAN>
    W[wload].wfx.wFormatTag      = WAVE_FORMAT_PCM;
    W[wload].wfx.nBlockAlign     = 
       *((WORD *)(header + OFFSET_BLOCKALIGN    ));
    W[wload].wfx.nAvgBytesPerSec = 
       *((DWORD*)(header + OFFSET_AVGBYTESPERSEC));

    <SPAN class=cpp-comment>// get mem for wave data block</SPAN>
    <SPAN class=cpp-keyword>if</SPAN>((W[wload].data = ( <SPAN class=cpp-keyword>char</SPAN> *) calloc( W[wload].size, 
                                  <SPAN class=cpp-keyword>sizeof</SPAN>( <SPAN class=cpp-keyword>char</SPAN> ))) == NULL)
    { CloseHandle(hFile); <SPAN class=cpp-keyword>return</SPAN> -<SPAN class=cpp-literal>1</SPAN>; }
 
    <SPAN class=cpp-keyword>char</SPAN>            buffer[READ_BLOCK];
    
    <SPAN class=cpp-keyword>unsigned</SPAN> <SPAN class=cpp-keyword>long</SPAN>   size         = W[wload].size; 
    <SPAN class=cpp-keyword>unsigned</SPAN> <SPAN class=cpp-keyword>long</SPAN>   read_block   = <SPAN class=cpp-literal>0</SPAN>;
                    rbytes       = <SPAN class=cpp-literal>0</SPAN>;
                      
    <SPAN class=cpp-keyword>do</SPAN>  <SPAN class=cpp-comment>/// copy uncompressed PCM wave data block</SPAN>
    {
        <SPAN class=cpp-keyword>if</SPAN>( ( size -= rbytes ) &gt;= READ_BLOCK )  read_block = READ_BLOCK;
        <SPAN class=cpp-keyword>else</SPAN>
        <SPAN class=cpp-keyword>if</SPAN>( size &amp;&amp; size &lt; READ_BLOCK )         read_block = size;
        <SPAN class=cpp-keyword>else</SPAN>                                    <SPAN class=cpp-keyword>break</SPAN>;

        <SPAN class=cpp-keyword>if</SPAN>( !ReadFile(hFile, buffer, read_block, &amp;rbytes, NULL) )
            <SPAN class=cpp-keyword>break</SPAN>;
        <SPAN class=cpp-keyword>if</SPAN>( rbytes == <SPAN class=cpp-literal>0</SPAN> )
            <SPAN class=cpp-keyword>break</SPAN>;
        <SPAN class=cpp-keyword>if</SPAN>( rbytes &lt; <SPAN class=cpp-keyword>sizeof</SPAN>(buffer) ) 
            memset(buffer + rbytes, <SPAN class=cpp-literal>0</SPAN>, <SPAN class=cpp-keyword>sizeof</SPAN>(buffer) - rbytes);
        
        memcpy( &amp;W[wload].data[W[wload].size - size], buffer, rbytes );         

    }<SPAN class=cpp-keyword>while</SPAN>( <SPAN class=cpp-literal>1</SPAN> );    

    <SPAN class=cpp-comment>// close file handle</SPAN>
    CloseHandle(hFile);
    
    <SPAN class=cpp-comment>// return current wave count</SPAN>
    <SPAN class=cpp-keyword>return</SPAN> ++wload;
}</PRE>
            <H4>Play</H4>
            <P><CODE>Play</CODE> method is pretty simple, all what it's doing is 
            to set <CODE>WMSG_START</CODE> for every <CODE>wave</CODE> index 
            which is passed as an argument so <CODE>PlayThread</CODE> can start 
            work. Only when first <CODE>Play</CODE> is started, 
            <CODE>PlayThread</CODE> will be resumed and thread message 
            <CODE>TMSG_ALIVE</CODE> set.</P><PRE><SPAN class=cpp-keyword>int</SPAN> CWaveBox::Play( <SPAN class=cpp-keyword>unsigned</SPAN> <SPAN class=cpp-keyword>int</SPAN> wave )
{
    <SPAN class=cpp-comment>// check wave id</SPAN>
    <SPAN class=cpp-keyword>if</SPAN>( wave &lt; <SPAN class=cpp-literal>0</SPAN> || wave &gt;= wload )
        <SPAN class=cpp-keyword>return</SPAN> -<SPAN class=cpp-literal>1</SPAN>;
    
    <SPAN class=cpp-comment>// set play message</SPAN>
    EnterCriticalSection(&amp;cs);
    W[wave].WMSG = WMSG_START;
    LeaveCriticalSection(&amp;cs);

    <SPAN class=cpp-comment>// resume thread &lt; at first play &gt;</SPAN>
    <SPAN class=cpp-keyword>if</SPAN>( !run ){ run = <SPAN class=cpp-literal>1</SPAN>; TMSG = TMSG_ALIVE; ResumeThread( thread ); }
    
    <SPAN class=cpp-keyword>return</SPAN> <SPAN class=cpp-literal>1</SPAN>;
}</PRE>
            <H4>Queue Model (streaming multiple waves)</H4>
            <P>The <CODE>PlayThread</CODE> model works in order to serve as a 
            WAI server for preparing and sending as many buffers of 
            <CODE>BLOCK_SIZE</CODE> to the current WAI queue, as is limited with 
            <CODE>BLOCK_COUNT</CODE> constant. There can be 
            <CODE>SUPPORT_INTERFACES</CODE> queues, or WAI driver threads 
            working. For example, if Wave of 1 second is played 10 times with 
            10ms of delay between each <CODE>Play</CODE>, 
            <CODE>PlayThread</CODE> will link Wave with 10 different 
            <CODE>INTERFACE</CODE>s in order to play the Wave 10 times. Each 
            thread <CODE>INTERFACE</CODE> serves each WAI queue/thread required 
            for playing current Wave linked with current <CODE>INTERFACE</CODE>. 
            So, eventually effect will be new delayed Wave of approx. 1.1 
            seconds consisting of 10 Waves with latency of 10ms between 
each.</P>
            <P>To provide continuous and synchronous buffering without noise or 
            gap as side effects, the idea is to control buffers queuing / 
            streaming. When <CODE>WAVE</CODE> is linked to the thread 
            <CODE>INTERFACE</CODE> it must be linked with the WAI interface or 
            the device for playing (see <CODE>HWAVEOUT</CODE>). By calling 
            <CODE>AddInterface</CODE> method, pointer of 
            <CODE>INTERFACE</CODE>'s <CODE>wfreeblock</CODE> counter is passed 
            as an argument so it will be returned in callback 
            <CODE>waveOutProc</CODE>, when buffer is played from the WAI queue, 
            or <CODE>WOM_DONE</CODE> message arrives. By decreasing 
            <CODE>wfreeblock</CODE> counter in case of buffer is sent to the WAI 
            queue for playing, and increasing inside of <CODE>waveOutProc</CODE> 
            when buffer is finished / played, keeping of limited 
            <CODE>BLOCK_COUNT</CODE> queued buffers is simply controlled. If any 
            of the <CODE>wfreeblock</CODE> buffers is freed, a new one is sent 
            to the queue, so audio streaming will be continuous and synchronous 
            over all <CODE>INTERFACE</CODE>s. You can turn on 
            <CODE>PlayThread</CODE> to its limits by playing n 
            <CODE>SUPPORT_WAVES</CODE> at m <CODE>SUPPORT_INTERFACES</CODE> 
            inside of other CPU time spending processes (for ex., GUI related). 
            I'm sure that will satisfy any of the proper coded tasks and play 
            without gap for a reasonably count of waves / interfaces at 
once.</P><PRE><SPAN class=cpp-comment>/// performance predefines</SPAN>
<SPAN class=cpp-preprocessor>#define SUPPORT_WAVES          10       // predefined wave count</SPAN>
<SPAN class=cpp-preprocessor>#define SUPPORT_INTERFACES     10       // predefined interface count</SPAN>

<SPAN class=cpp-comment>/// buffering</SPAN>
<SPAN class=cpp-preprocessor>#define READ_BLOCK           8192       // read wave file block</SPAN>
<SPAN class=cpp-preprocessor>#define BLOCK_SIZE           8192       // queue block size</SPAN>
<SPAN class=cpp-preprocessor>#define BLOCK_COUNT            20       // queue block count</SPAN>
<SPAN class=cpp-preprocessor>#define BP_TURN                 1       // blocks per turn</SPAN>


<SPAN class=cpp-comment>/// AddInterface is wrapper method around WAI API waveOutOpen</SPAN>

<SPAN class=cpp-keyword>int</SPAN> CWaveBox::AddInterface( HWAVEOUT    *dev, 
                         WAVEFORMATEX   *wfx, 
                         volatile <SPAN class=cpp-keyword>int</SPAN>   *wfreeblock )
{
    <SPAN class=cpp-comment>// check for free device</SPAN>
    <SPAN class=cpp-keyword>if</SPAN>( !waveOutGetNumDevs() )
        <SPAN class=cpp-keyword>return</SPAN> -<SPAN class=cpp-literal>1</SPAN>;
    
    <SPAN class=cpp-comment>// try to open the default wave device. WAVE_MAPPER is</SPAN>
    <SPAN class=cpp-comment>// a constant defined in mmsystem.h, it always points to the</SPAN>
    <SPAN class=cpp-comment>// default wave device on the system (some people have 2 or</SPAN>
    <SPAN class=cpp-comment>// more sound cards).</SPAN>
    
    <SPAN class=cpp-keyword>if</SPAN>(waveOutOpen( dev,
                    WAVE_MAPPER, 
                    wfx, 
                    (DWORD)waveOutProc, 
                    (DWORD)wfreeblock, 
                    CALLBACK_FUNCTION   ) != MMSYSERR_NOERROR ) <SPAN class=cpp-keyword>return</SPAN> -<SPAN class=cpp-literal>1</SPAN>;
    
    <SPAN class=cpp-keyword>return</SPAN> <SPAN class=cpp-literal>1</SPAN>;
}

<SPAN class=cpp-comment>/// waveOutProc is CALLBACK function</SPAN>
<SPAN class=cpp-comment>/// and serve as a message queue of WAI where all</SPAN>
<SPAN class=cpp-comment>/// devices HWAVEOUT ( threads ) notifies</SPAN>
<SPAN class=cpp-comment>/// when any of action / message occurs</SPAN>

<SPAN class=cpp-keyword>static</SPAN> <SPAN class=cpp-keyword>void</SPAN> CALLBACK waveOutProc( HWAVEOUT  hWaveOut, 
                                  UINT      uMsg, 
                                  DWORD     dwInstance,  
                                  DWORD     dwParam1,    
                                  DWORD     dwParam2     )
{
    <SPAN class=cpp-comment>// pointer to free block counter</SPAN>
    <SPAN class=cpp-keyword>int</SPAN>* freeBlockCounter = (<SPAN class=cpp-keyword>int</SPAN>*)dwInstance;
  
    <SPAN class=cpp-comment>// ignore calls that occur due to openining and closing the device.</SPAN>
    <SPAN class=cpp-keyword>if</SPAN>(uMsg != WOM_DONE)
        <SPAN class=cpp-keyword>return</SPAN>;

    <SPAN class=cpp-comment>// increase free block counter</SPAN>
    EnterCriticalSection(&amp;cs);
    (*freeBlockCounter)++;
    LeaveCriticalSection(&amp;cs);
}</PRE>
            <H4>PlayThread</H4>
            <P>You should read the 'Queue Model' paragraph if you have skipped 
            it, because it is an intro for you to completely understand how 
            <CODE>PlayThread</CODE> is modelled to interact with the WAI driver 
            and play multiple Waves. The <CODE>PlayThread</CODE> responses for 
            two types of messages. First types are Wave <CODE>WMsg</CODE> 
            messages set by <CODE>Play</CODE> method, so let's first discuss 
            what they trigger.</P>
            <P>When <CODE>WMSG_START</CODE> arrives for a particularl wave 
            <CODE>wb-&gt;W[i];</CODE>, the thread continues searching for the 
            first <CODE>INT_FREE</CODE> interface to link the Wave within. When 
            free interface is matched and <CODE>HWAVEOUT</CODE> handle of device 
            is opened by <CODE>AddInterface</CODE> method and assigned to the 
            current interface, <CODE>WAVE</CODE> pointer is saved so interface 
            can work with. Then, interface is marked as <CODE>INT_USED</CODE>, 
            so you'll see later, the thread will know to play it and current 
            attached Waves. <CODE>wb-&gt;W[i].WMSG;</CODE> message is set back 
            to <CODE>WMSG_WAIT</CODE> state, so if requested, it can be played 
            again at same or another <CODE>INTERFACE</CODE>. This linking model 
            gives the <CODE>CWaveBox</CODE> possibility for playing one Wave as 
            well as for playing multiple Waves.</P>
            <P>Now, it goes to the 'main playing loop' scope, where, first, for 
            every <CODE>INT_USED</CODE> interface 
            <CODE>wb-&gt;I[k].wfreeblock;</CODE> counter is checked to see if 
            there is a free block for queuing on the current interface. If not, 
            loop continues to search first one where it has. Blocks per turn, or 
            <CODE>BP_TURN</CODE> constant is nothing but the multiplier for 
            <CODE>BLOCK_SIZE</CODE> and is used for queuing more than one block 
            per turn. You can avoid this by enlarging <CODE>BLOCK_SIZE</CODE>. I 
            really don't know if it is better queuing one bigger or many smaller 
            blocks per turn, so this can be further tested. ;-)</P>
            <P>Inside the 'block per turn' loop, first, we check for Wave data 
            header <CODE>WAVEHDR</CODE> block to be unprepared in case of 
            previous queuing (ring queuing / buffering) and complete the 
            <CODE>WAVEHDR</CODE> block by copying Wave <CODE>data</CODE> block 
            at Wave header member <CODE>pData</CODE> and set the size of block 
            in <CODE>dwBufferLength</CODE>. After preparations, header is sent 
            for playing at current interface <CODE>wb-&gt;I[k].dev;</CODE> via 
            <CODE>waveOutWrite</CODE> WAI method. Remaining job is to decrease 
            interface <CODE>wfreeblock</CODE> counter and to round up circular 
            <CODE>wcurrblock</CODE> counter so it will point on the next 
            block.</P>
            <P>In case the last block is queued and there is no 
            <CODE>data</CODE> left for queuing on current 
            <CODE>INTERFACE</CODE>, it again goes to check for 
            <CODE>wfreeblock</CODE> counter, but this time it must be equal to 
            <CODE>BLOCK_COUNT</CODE> which means that all buffers are played so 
            all prepared buffers can be successfully unprepared and 
            <CODE>RemoveInterface</CODE> method invoked which closes current WAI 
            driver thread and releases all memory used. Closing of WAI 
            interfaces must be done in these steps or may fail and produce 
            memory leak! Remaining job is to set the interface 
            <CODE>wb-&gt;I[k].state;</CODE> message to <CODE>INT_FREE</CODE> so 
            it can link another <CODE>WAVE</CODE> if needed.</P>
            <P>Another type of messages are thread <CODE>TMsg</CODE> messages. 
            First message <CODE>TMSG_ALIVE</CODE> is set by <CODE>Play</CODE> 
            method and keeps the thread alive until <CODE>TMSG_CLOSE</CODE> is 
            set from the <CODE>CWaveBox</CODE> destructor. When 
            <CODE>TMSG_CLOSE</CODE> is arrived, thread breaks from the 'main 
            thread' or <CODE><SPAN class=cpp-keyword>while</SPAN></CODE> loop 
            and continues to the bottom of <CODE>PlayThread</CODE>. Destructor 
            can be invoked while there is 'who knows how many waves' still 
            playing at WAI subsystem, so there is a last check to see on which 
            interface is <CODE>state</CODE> flag set to <CODE>INT_USED</CODE> so 
            it can be reset with <CODE>waveOutReset</CODE> and closed by 
            <CODE>RemoveInterface</CODE> method. Without releasing of WAI 
            subsystem, there can be problems (primarily Windows CE) on next WAI 
            start-up so this procedure is necessary.</P>
            <P>And, last thing to do, is to return <CODE>EXIT_THREAD</CODE> 
            code, so it will signalize the destructor to continue with the 
            destruction of the remaining <CODE>CWaveBox</CODE> members. ;-)</P><PRE lang=mc++><SPAN class=cpp-keyword>static</SPAN> <SPAN class=cpp-keyword>unsigned</SPAN> <SPAN class=cpp-keyword>int</SPAN> __stdcall PlayThread( LPVOID lp )
{
    <SPAN class=cpp-comment>/// get the class instance</SPAN>
    CWaveBox *wb = ( CWaveBox *)lp;
    
    <SPAN class=cpp-comment>/// pooling variables &lt; most frequently used / checked &gt;</SPAN>
    <SPAN class=cpp-keyword>register</SPAN>    WMsg            wmsg  = WMSG_WAIT;
    <SPAN class=cpp-keyword>register</SPAN>    TMsg            tmsg  = TMSG_ALIVE;         
    <SPAN class=cpp-keyword>register</SPAN>    <SPAN class=cpp-keyword>unsigned</SPAN> <SPAN class=cpp-keyword>int</SPAN>    i     = <SPAN class=cpp-literal>0</SPAN>;
    

    <SPAN class=cpp-comment>/// thread life cycle</SPAN>
    <SPAN class=cpp-keyword>while</SPAN>( tmsg )
    {

        <SPAN class=cpp-comment>/// check for 'play' msg</SPAN>
        <SPAN class=cpp-keyword>for</SPAN>( i = <SPAN class=cpp-literal>0</SPAN>; i &lt; wb-&gt;wload; i++ )
        {
            <SPAN class=cpp-comment>/// read msg</SPAN>
            EnterCriticalSection( &amp;cs );
            wmsg = wb-&gt;W[i].WMSG;
            LeaveCriticalSection( &amp;cs );
            
            <SPAN class=cpp-comment>/// wave to play?</SPAN>
            <SPAN class=cpp-keyword>if</SPAN>( wmsg == WMSG_START )    <SPAN class=cpp-keyword>break</SPAN>;
        }
        
        
        <SPAN class=cpp-comment>/// playable wave</SPAN>
        <SPAN class=cpp-keyword>if</SPAN>( wmsg == WMSG_START )
        
            <SPAN class=cpp-comment>/// link with first free interface</SPAN>
            <SPAN class=cpp-keyword>for</SPAN>( <SPAN class=cpp-keyword>unsigned</SPAN> <SPAN class=cpp-keyword>int</SPAN> j = <SPAN class=cpp-literal>0</SPAN>; j &lt; SUPPORT_INTERFACES; j++ )
            
                <SPAN class=cpp-comment>/// check for free interface</SPAN>
                <SPAN class=cpp-keyword>if</SPAN>( wb-&gt;I[j].state == INT_FREE )
    
                    <SPAN class=cpp-comment>/// attach wave to interface</SPAN>
                    <SPAN class=cpp-keyword>if</SPAN>( wb-&gt;AddInterface( &amp;wb-&gt;I[j].dev, 
                                          &amp;wb-&gt;W[i].wfx, 
                                          &amp;wb-&gt;I[j].wfreeblock ) )
                    {
                        <SPAN class=cpp-comment>/// get wave pointer</SPAN>
                        wb-&gt;I[j].wave = &amp;wb-&gt;W[i];
                
                        <SPAN class=cpp-comment>/// mark interface as used</SPAN>
                        wb-&gt;I[j].state = INT_USED;

                        <SPAN class=cpp-comment>/// free wave </SPAN>
                        EnterCriticalSection( &amp;cs );
                        wb-&gt;W[i].WMSG = WMSG_WAIT;  
                        LeaveCriticalSection( &amp;cs );                        

                        <SPAN class=cpp-comment>/// leave loop</SPAN>
                        <SPAN class=cpp-keyword>break</SPAN>;
                    }


        <SPAN class=cpp-comment>///////////////////////////////////////////////////////////////////////</SPAN>
        <SPAN class=cpp-comment>///////////////////////////////////////////////////////////////////////</SPAN>
        <SPAN class=cpp-comment>///</SPAN>
        <SPAN class=cpp-comment>///                       &lt; main playing loop &gt;</SPAN>
        <SPAN class=cpp-comment>///</SPAN>
        <SPAN class=cpp-comment>///    search for the first marked interface and play attached wave</SPAN>
        <SPAN class=cpp-comment>///</SPAN>

        <SPAN class=cpp-keyword>for</SPAN>( <SPAN class=cpp-keyword>unsigned</SPAN> <SPAN class=cpp-keyword>int</SPAN> k = <SPAN class=cpp-literal>0</SPAN>; k &lt; SUPPORT_INTERFACES; k++ )
        {
            <SPAN class=cpp-comment>/// nothing to do with free interface</SPAN>
            <SPAN class=cpp-keyword>if</SPAN>( wb-&gt;I[k].state == INT_FREE ) <SPAN class=cpp-keyword>continue</SPAN>;

            EnterCriticalSection( &amp;cs );
            <SPAN class=cpp-keyword>int</SPAN> free = wb-&gt;I[k].wfreeblock;
            LeaveCriticalSection( &amp;cs );
            
            <SPAN class=cpp-comment>/// nothing to do with full queued interface</SPAN>
            <SPAN class=cpp-keyword>if</SPAN>( free &lt; BP_TURN )    <SPAN class=cpp-keyword>continue</SPAN>; 

            WAVEHDR     *current = NULL;
            
            <SPAN class=cpp-comment>/// how much blocks per turn will be queued</SPAN>
            <SPAN class=cpp-keyword>for</SPAN>( <SPAN class=cpp-keyword>unsigned</SPAN> <SPAN class=cpp-keyword>int</SPAN> m = <SPAN class=cpp-literal>0</SPAN>; m &lt; BP_TURN; m++ )
            {   
                <SPAN class=cpp-comment>/// set current block pointer</SPAN>
                current = &amp;wb-&gt;I[k].wblock[wb-&gt;I[k].wcurrblock]; 
                
                <SPAN class=cpp-comment>// first make sure the header we're going to use is unprepared</SPAN>
                <SPAN class=cpp-keyword>if</SPAN>( current-&gt;dwFlags &amp; WHDR_PREPARED ) 

                    waveOutUnprepareHeader( wb-&gt;I[k].dev, 
                                            current, 
                                            <SPAN class=cpp-keyword>sizeof</SPAN>(WAVEHDR)  );     

                <SPAN class=cpp-comment>/// how much data is left at this interface to play</SPAN>
                <SPAN class=cpp-keyword>unsigned</SPAN> <SPAN class=cpp-keyword>long</SPAN> left  = wb-&gt;I[k].wave-&gt;size - wb-&gt;I[k].wpos;
                <SPAN class=cpp-keyword>unsigned</SPAN> <SPAN class=cpp-keyword>long</SPAN> chunk = <SPAN class=cpp-literal>0</SPAN>;

                <SPAN class=cpp-keyword>if</SPAN>( left  &gt;= BLOCK_SIZE )
                    chunk  = BLOCK_SIZE;
                <SPAN class=cpp-keyword>else</SPAN> 
                <SPAN class=cpp-keyword>if</SPAN>( left &amp;&amp; left &lt; BLOCK_SIZE )
                    chunk  = left;
                <SPAN class=cpp-keyword>else</SPAN>
                {   
                    <SPAN class=cpp-comment>////////////////////</SPAN>
                    <SPAN class=cpp-comment>/// nothing left ///</SPAN>
                    <SPAN class=cpp-comment>////////////////////////////////////////////////////////</SPAN>
                    <SPAN class=cpp-comment>///</SPAN>
                    <SPAN class=cpp-comment>///           &lt; clean job, close waveOutProc threads &gt;</SPAN>
                    <SPAN class=cpp-comment>///</SPAN>
                    <SPAN class=cpp-comment>///           all buffers are queued to the interface</SPAN>
                    <SPAN class=cpp-comment>///</SPAN>
                    
                    <SPAN class=cpp-comment>/// get free block count</SPAN>
                    EnterCriticalSection( &amp;cs );
                    <SPAN class=cpp-keyword>int</SPAN> free = wb-&gt;I[k].wfreeblock;
                    LeaveCriticalSection( &amp;cs );


                    <SPAN class=cpp-keyword>if</SPAN>( free == BLOCK_COUNT )   <SPAN class=cpp-comment>/// are all blocks played!?</SPAN>
                    {
                
                        <SPAN class=cpp-comment>/// unprepare any blocks that are still prepared</SPAN>
                        <SPAN class=cpp-keyword>for</SPAN>( <SPAN class=cpp-keyword>int</SPAN> i = <SPAN class=cpp-literal>0</SPAN>; i &lt; wb-&gt;I[k].wfreeblock; i++) 
                            
                            <SPAN class=cpp-keyword>if</SPAN>( wb-&gt;I[k].wblock[i].dwFlags &amp; WHDR_PREPARED )
                
                                waveOutUnprepareHeader(  wb-&gt;I[k].dev, 
                                                         &amp;wb-&gt;I[k].wblock[i], 
                                                         <SPAN class=cpp-keyword>sizeof</SPAN>(WAVEHDR));
                    
                        <SPAN class=cpp-comment>/// close interface</SPAN>
                        <SPAN class=cpp-keyword>if</SPAN>( wb-&gt;RemoveInterface( wb-&gt;I[k].dev ) )
                        {
                            <SPAN class=cpp-comment>/// free interface</SPAN>
                            wb-&gt;I[k].wcurrblock = <SPAN class=cpp-literal>0</SPAN>;
                            wb-&gt;I[k].state      = INT_FREE;
                            wb-&gt;I[k].wpos       = <SPAN class=cpp-literal>0</SPAN>;
                            wb-&gt;I[k].wave       = NULL;
                        }
                    }

                    <SPAN class=cpp-comment>/// step out</SPAN>
                    <SPAN class=cpp-keyword>break</SPAN>;
                }
    
                <SPAN class=cpp-comment>/// prepare current wave data block header</SPAN>
                memcpy( current-&gt;lpData, 
                        &amp;wb-&gt;I[k].wave-&gt;data[wb-&gt;I[k].wpos], chunk );

                current-&gt;dwBufferLength  = chunk;   <SPAN class=cpp-comment>// sizeof block</SPAN>
                wb-&gt;I[k].wpos           += chunk;   <SPAN class=cpp-comment>// update position</SPAN>
                
                <SPAN class=cpp-comment>/// prepare for playback</SPAN>
                waveOutPrepareHeader( wb-&gt;I[k].dev, 
                         current, <SPAN class=cpp-keyword>sizeof</SPAN>(WAVEHDR) );
                
                <SPAN class=cpp-comment>/// push to the queue</SPAN>
                waveOutWrite(wb-&gt;I[k].dev, current, <SPAN class=cpp-keyword>sizeof</SPAN>(WAVEHDR));

                <SPAN class=cpp-comment>/// decrease free block counter</SPAN>
                EnterCriticalSection( &amp;cs );
                wb-&gt;I[k].wfreeblock--;
                LeaveCriticalSection( &amp;cs );
                
                <SPAN class=cpp-comment>/// point to the next block</SPAN>
                wb-&gt;I[k].wcurrblock++;
                wb-&gt;I[k].wcurrblock %= BLOCK_COUNT;
            
            }<SPAN class=cpp-comment>/// block(s)</SPAN>

        }<SPAN class=cpp-comment>/// interface(s)</SPAN>
    
        <SPAN class=cpp-comment>/// wait 10 ms &lt; save CPU time &gt;</SPAN>
        Sleep( <SPAN class=cpp-literal>10</SPAN> );
        
        <SPAN class=cpp-comment>/// check for thread message</SPAN>
        EnterCriticalSection( &amp;cs );
        tmsg = wb-&gt;TMSG;
        LeaveCriticalSection( &amp;cs );

    }<SPAN class=cpp-comment>/// thread</SPAN>



    <SPAN class=cpp-comment>//////////////////////////////////////////////////////////////////////</SPAN>
    <SPAN class=cpp-comment>//////////////////////////////////////////////////////////////////////</SPAN>
    <SPAN class=cpp-comment>///</SPAN>
    <SPAN class=cpp-comment>///            force to close interfaces which are still playing </SPAN>
    <SPAN class=cpp-comment>///</SPAN>

    <SPAN class=cpp-keyword>for</SPAN>( i = <SPAN class=cpp-literal>0</SPAN>; i &lt; SUPPORT_INTERFACES; i++ )
            <SPAN class=cpp-keyword>if</SPAN>( wb-&gt;I[i].state == INT_USED )    
                <SPAN class=cpp-keyword>if</SPAN>( waveOutReset( wb-&gt;I[i].dev ) == MMSYSERR_NOERROR )
                    wb-&gt;RemoveInterface( wb-&gt;I[i].dev );
    
                
    <SPAN class=cpp-keyword>return</SPAN>  THREAD_EXIT; <SPAN class=cpp-comment>/// return exit code &lt; destructor &gt;</SPAN>
}</PRE>
            <H4>~CWaveBox()</H4>
            <P>Within the destructor, for resumed thread, 
            <CODE>TMSG_CLOSE</CODE> message is set and looped until 
            <CODE>THREAD_EXIT</CODE> code will not arrive or 'thread soft 
            close', so all playing interfaces are properly forced to be reset 
            and closed. For suspended thread, 'thread hard close' or 
            <CODE>TerminateThread</CODE> is called. After that, all required 
            buffers and critical section are released.</P><PRE>CWaveBox::~CWaveBox()
{
    <SPAN class=cpp-keyword>unsigned</SPAN> <SPAN class=cpp-keyword>long</SPAN> exit = <SPAN class=cpp-literal>0</SPAN>;

    <SPAN class=cpp-keyword>if</SPAN>( run ) <SPAN class=cpp-comment>// thread resumed</SPAN>
    {
        <SPAN class=cpp-comment>// set thread close message</SPAN>
        EnterCriticalSection( &amp;cs );
        TMSG = TMSG_CLOSE;
        LeaveCriticalSection( &amp;cs );
        
        <SPAN class=cpp-keyword>do</SPAN> <SPAN class=cpp-comment>// wait for soft close</SPAN>
        { 
            GetExitCodeThread( thread, &amp;exit ); 
            Sleep( <SPAN class=cpp-literal>10</SPAN> );

        }<SPAN class=cpp-keyword>while</SPAN>( exit != THREAD_EXIT );
    
    }<SPAN class=cpp-keyword>else</SPAN> <SPAN class=cpp-comment>// thread suspended   </SPAN>
    {
        <SPAN class=cpp-comment>// hard close </SPAN>
        GetExitCodeThread( thread, &amp;exit ); 
        TerminateThread( thread, exit );
    }
    
    
    <SPAN class=cpp-comment>// release wave(s)</SPAN>
    <SPAN class=cpp-keyword>for</SPAN>( <SPAN class=cpp-keyword>unsigned</SPAN> <SPAN class=cpp-keyword>int</SPAN> i = <SPAN class=cpp-literal>0</SPAN>; i &lt; wload; i++ )
        free( W[i].data );

    <SPAN class=cpp-comment>// release interface(s)</SPAN>
    <SPAN class=cpp-keyword>for</SPAN>( i = <SPAN class=cpp-literal>0</SPAN>; i &lt; SUPPORT_INTERFACES; i++ )
        freeBlocks( I[i].wblock ); 

    <SPAN class=cpp-comment>// del cs</SPAN>
    DeleteCriticalSection( &amp;cs );
}</PRE>
            <H2>The Demo</H2>
            <P>This demo is a simple and effective example of how you can use 
            this class and play with timed Waves. All you have to do is to 
            <CODE>Load</CODE> a Wave file, choose/set timing, and 
            <CODE>Play</CODE> it. Turn your volume on and enjoy! ;-)</P>
            <P><B>Note</B>: for compiling on Windows XP, link '<I>Winmm.lib</I>' 
            library, while on Windows CE it is already linked.</P><PRE><SPAN class=cpp-preprocessor>#include "stdafx.h"</SPAN>
<SPAN class=cpp-preprocessor>#include "wavebox.h"</SPAN>
<SPAN class=cpp-preprocessor>#include &lt;stdio.h&gt;</SPAN>
<SPAN class=cpp-preprocessor>#include &lt;conio.h&gt;</SPAN>

<SPAN class=cpp-keyword>int</SPAN> main(<SPAN class=cpp-keyword>int</SPAN> argc, <SPAN class=cpp-keyword>char</SPAN>* argv[])
{
    CWaveBox w;

    <SPAN class=cpp-comment>/// load waves</SPAN>
    w.Load(<SPAN class=cpp-string>"twilightzone.wav"</SPAN>);
    w.Load(<SPAN class=cpp-string>"badfeeling.wav"</SPAN>);
    w.Load(<SPAN class=cpp-string>"wolfcall.wav"</SPAN>);
    w.Load(<SPAN class=cpp-string>"heart.wav"</SPAN>);
    w.Load(<SPAN class=cpp-string>"gusting_winds.wav"</SPAN>);
    w.Load(<SPAN class=cpp-string>"newmail.wav"</SPAN>);
    w.Load(<SPAN class=cpp-string>"dumbass.wav"</SPAN>);
    w.Load(<SPAN class=cpp-string>"porky.wav"</SPAN>);
    w.Load(<SPAN class=cpp-string>"system_alert.wav"</SPAN>);

    printf(<SPAN class=cpp-string>"&lt;CWaveBox v0.95 demo&gt;:\n\n"</SPAN>);
    printf(<SPAN class=cpp-string>"You will listen 9 waves in this demo, approx. 30 sec.\n"</SPAN>);

    <SPAN class=cpp-comment>/// and play with them ;-)</SPAN>
    <SPAN class=cpp-keyword>for</SPAN>( <SPAN class=cpp-keyword>int</SPAN> f = <SPAN class=cpp-literal>0</SPAN>; f &lt; <SPAN class=cpp-literal>5</SPAN>; f++ ){ w.Play(<SPAN class=cpp-literal>8</SPAN>); Sleep(<SPAN class=cpp-literal>50</SPAN>); } Sleep(<SPAN class=cpp-literal>2000</SPAN>);
    <SPAN class=cpp-keyword>for</SPAN>( f = <SPAN class=cpp-literal>0</SPAN>; f &lt; <SPAN class=cpp-literal>5</SPAN>; f++ ){ w.Play(<SPAN class=cpp-literal>8</SPAN>); Sleep(<SPAN class=cpp-literal>75</SPAN>);}

    <SPAN class=cpp-keyword>for</SPAN>( <SPAN class=cpp-keyword>int</SPAN> k = <SPAN class=cpp-literal>0</SPAN>; k &lt; <SPAN class=cpp-literal>1000</SPAN>; k += <SPAN class=cpp-literal>50</SPAN> )
    {
        w.Play(<SPAN class=cpp-literal>3</SPAN>); Sleep( <SPAN class=cpp-literal>300</SPAN> + <SPAN class=cpp-literal>1000</SPAN> - k );

        <SPAN class=cpp-keyword>if</SPAN>( !( k % <SPAN class=cpp-literal>200</SPAN> ) )          w.Play(<SPAN class=cpp-literal>2</SPAN>);
        <SPAN class=cpp-keyword>if</SPAN>( k == <SPAN class=cpp-literal>400</SPAN> || k == <SPAN class=cpp-literal>700</SPAN> )  w.Play(<SPAN class=cpp-literal>1</SPAN>);

        <SPAN class=cpp-keyword>if</SPAN>( k == <SPAN class=cpp-literal>950</SPAN> )
        { w.Play(<SPAN class=cpp-literal>4</SPAN>); Sleep( <SPAN class=cpp-literal>500</SPAN> );}
    }

    w.Play(<SPAN class=cpp-literal>0</SPAN>);Sleep(<SPAN class=cpp-literal>2500</SPAN>);
    w.Play(<SPAN class=cpp-literal>5</SPAN>);Sleep(<SPAN class=cpp-literal>1500</SPAN>);
    w.Play(<SPAN class=cpp-literal>6</SPAN>);Sleep(<SPAN class=cpp-literal>4500</SPAN>);
    w.Play(<SPAN class=cpp-literal>7</SPAN>);
    
    printf(<SPAN class=cpp-string>"thats all folks! ;-) \n"</SPAN>);  
    getch();

    <SPAN class=cpp-keyword>return</SPAN> <SPAN class=cpp-literal>1</SPAN>;
}</PRE>
            <H2>Points of Interest</H2>
            <P>This class can be extended by <CODE>UnLoad</CODE> method, so any 
            Wave can be <CODE>Load</CODE>ed and <CODE>UnLoad</CODE>ed any time. 
            Also, playing from file 'on the fly' which has lower memory usage, 
            but has bigger CPU usage, wouldn't be a bad extension. Then, events 
            can replace the current pooling model and extend <CODE>Play</CODE> 
            for compressed Waves too. I will like to see this class attached to 
            the MPEG3 'licence free' and 'commercially usable without fee' 
            decoder on this zone so we can freely implement it in our games and 
            applications.</P><!-- Article Ends --></DIV></SPAN>
            <SCRIPT 
            src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/togglePre.js" 
            type=text/javascript></SCRIPT>

            <H2>zenith__</H2>
            <DIV style="OVERFLOW: hidden">
            <TABLE border=0>
              <TBODY>
              <TR vAlign=top>
                <TD class=smallText noWrap><IMG 
                  src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/{0DA59DD2-E9C7-4F46-845D-87B89E78692B}.gif"><BR></TD>
                <TD class=smallText>
                  <P class=smallText>Click <A 
                  href="http://www.codeproject.com/script/profile/whos_who.asp?vt=arts&amp;id=866695">here</A> 
                  to view zenith__'s online 
            profile.</P></TD></TR></TBODY></TABLE></DIV><BR>
            <TABLE cellPadding=4 width="100%" border=0>
              <TBODY>
              <TR vAlign=top>
                <TD width="100%">
                  <H2>Other popular Audio and Video articles:</H2>
                  <UL>
                    <LI><A 
                    href="http://www.codeproject.com/audio/avicapwrp.asp">CAviCap 
                    and CFrameGrabber - wrappers for AVICap Window</A>
                    <DIV class=smallText>AVICap wrappers to ease real-time video 
                    processing and single frame capture</DIV>
                    <LI><A 
                    href="http://www.codeproject.com/audio/midiwrapper.asp">Wrapper 
                    Library for Windows MIDI API</A>
                    <DIV class=smallText>A small library encapsulating the 
                    Windows MIDI API</DIV>
                    <LI><A 
                    href="http://www.codeproject.com/audio/twaintest.asp">A C++ 
                    Wrapper for TWAIN</A>
                    <DIV class=smallText>A C++ wrapper for TWAIN. Allows you to 
                    implement a scanning interface.</DIV>
                    <LI><A 
                    href="http://www.codeproject.com/audio/mpegaudioinfo.asp">MPEG 
                    Audio Frame Header</A>
                    <DIV class=smallText>An article about the MPEG audio frame 
                    header.</DIV></LI></UL></TD>
                <TD width=360>
                  <SCRIPT language=javascript>document.write("<IFRAME src=\"/script/ann/ServeHTML.aspx?C=False&id=4109&cb=1536858\" border=0 frameborder=0 scrolling=no width=300 height=250></IFRAME>");</SCRIPT>
                </TD></TR></TBODY></TABLE>
            <FORM action=/script/rating/code/app/insert_vote.asp 
            method=post><INPUT type=hidden value=CWaveBox/audio4/15/2005 
            name=vote_name> <INPUT type=hidden value=/audio/CWaveBox.asp 
            name=goal> 
            <TABLE cellSpacing=0 cellPadding=1 width="100%" bgColor=#ff9900 
            border=0>
              <TBODY>
              <TR>
                <TD width="100%">
                  <TABLE cellSpacing=0 cellPadding=4 width="100%" 
                  bgColor=#fbedbb border=0>
                    <TBODY>
                    <TR>
                      <TD class=smalltext vAlign=center>[<A 
                        href="http://www.codeproject.com/audio/CWaveBox.asp#__top">Top</A>]</TD>
                      <TD vAlign=center noWrap align=right><I><B>Rate this 
                        Article for us!</B></I>&nbsp;&nbsp;&nbsp;&nbsp; 
                        <I>Poor</I><INPUT type=radio value=1 name=rate><INPUT 
                        type=radio value=2 name=rate><INPUT type=radio value=3 
                        name=rate><INPUT type=radio value=4 name=rate><INPUT 
                        type=radio value=5 
name=rate><I>Excellent</I>&nbsp;&nbsp;<INPUT class=FormButton type=submit value=Vote> 
                      </TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></FORM>
            <CENTER>
            <DIV style="MARGIN: 10px"><SPAN id=AdBanner5>
            <SCRIPT language=javascript>document.write("<IFRAME src=\"/script/ann/ServeHTML.aspx?C=False&id=3025&cb=1536848\" border=0 frameborder=0 scrolling=no width=468 height=60></IFRAME>");</SCRIPT>
            </SPAN></DIV></CENTER><A name=__comments></A>
            <SCRIPT language=JavaScript>

function MsgVoteForm(MemberID, MsgID)
{
	document.write("<span id=\"MVF" + MsgID + "\">");
	document.write("Rate this message: ");
	for (var i=1; i<=5;i++)
	{
		document.write("<a href='#xx" + MsgID.toString() + "xx' title='give this message a vote of " + i.toString());
		document.write("' onclick='return RateMsg(" + MemberID.toString() + ", " + MsgID.toString() + ", ");
		document.write(i.toString() + ")'><b>" + i.toString() + "</b></a> ");
	}
	document.write(" (out of 5)");
	document.writeln("</span>");
	
	
}

function RetypeForm(MemberID, MsgID)
{
	var types = [
				 {pic:'news_general.gif',  id: 1},
	             {pic:'news_info.gif',     id: 2},
	             {pic:'news_question.gif', id: 4},
	             {pic:'news_answer.gif',   id: 8},
	             {pic:'news_game.gif',     id: 16},
	             {pic:'news_spam.gif',     id: 32}
	            ];
	
	document.write("<span id=\"RTF" + MsgID + "\">");
	for (var i=0;i<types.length;i++)
	{
		document.write("<a href='/script/comments/retype?msg=" + MsgID.toString());
		document.write("&mid=" + MemberID.toString() + "&type=" + types[i].id + "'>");
		document.write("<img border=0 src='/script/images/" + types[i].pic + "'></a><br />");
	}
	document.writeln("</span>");
}

function ReportMsg(userid, msgid, score)
{
	if (confirm("Are you sure you want to report this message?") == true)
		return RateMsg(userid, msgid, score);
	else return false;
}


function RateMsg(userid, msgid, score)
{

   var req = new ActiveXObject("Msxml2.XMLHTTP"); 

   req.onreadystatechange = function()
   {
      if ( req.readyState == 4 )
      {
         if ( req.status == 200 )
         {
         	var respText = req.responseText;
         	var re = new RegExp("\<div\>([^\<]*)\</div\>", "g");
         	var match = re.exec(respText);
         	status.innerHTML = "<b>" + (match)?match[1]:"An error occured" + "</b>";
         }
         else
         {
            status.innerHTML = "<b style='color:red'>Failed!" + req.statusText + "</b>";
         }
      }
   }
   
   var status = document.getElementById("MVF" + msgid);
   if (!status) return;  // should never happen...   
   status.innerHTML = "<b style='color:green'>Voting...</b>";
   
   var strAction = "/script/comments/vote.asp?js=1&user="+userid+"&msg="+msgid+"&score="+score;
   req.open("GET", strAction, true);
   req.send(null);
   return false;
}

</SCRIPT>

            <SCRIPT language=JavaScript>
var Selected = "";

var AdTime = new Date();


// Ensures the expanded message appears reasonably close to where 
// it should appear: on screen, and if possible, under the mouse cursor.
function SwitchMessage(e)
{
   if ( !e ) e = window.event;
   var target = e.target ? e.target : e.srcElement;

   // is it a post?
   while ( target && target.id != 'DynMessLink' )
      target = target.parentNode;
   if ( !target || target.id != 'DynMessLink' )
      return;

   if (Selected)
   {
      var body = document.getElementById(Selected + "_h1");
      if (body)
         body.style.display = 'none';
      var head = document.getElementById(Selected + "_h0");
      if (head)
         head.bgColor = '#FEF9E7';
   }

   if (Selected == target.name) // just collapse
      Selected="";
   else
   {
      Selected = target.name;
      var body = document.getElementById(Selected + "_h1");
      if (body)
      {
         if (body.style.display=='none')
            body.style.display='';
         else
            body.style.display = 'none';
      }
      var head = document.getElementById(Selected + "_h0");
      if (head)
         head.bgColor = '#99CCFF';

      if ( body && head && body.style.display != 'none' )
      {
         // the bit that keeps the post on-screen and under the cursor
         //var dif = (getRealPos(head, "Top") + head.offsetHeight/2) - (document.body.scrollTop+e.clientY);
         //document.body.scrollTop += dif;
         document.body.scrollTop = getRealPos(head, "Top") - document.body.clientHeight/10;
         EnsureMessageVisible(target.name, true);
      }
   }

   if ( e.preventDefault )
      e.preventDefault();
   else
      e.returnValue = false;
   return false;
}

// does its best to make a message visible on-screen (vs. scrolled off somewhere).
function EnsureMessageVisible(msgID, bShowTop) {
   var msgHeader = document.getElementById(msgID + "_h0");
   var msgBody = document.getElementById(msgID + "_h1");

   // determine scroll position of top and bottom
   var scrollContainer = document.body;
   var top = getRealPos(msgHeader, 'Top');
   var bottom = getRealPos(msgBody, 'Top') + msgBody.offsetHeight;

   // if not already visible, scroll to make it so
   if ( scrollContainer.scrollTop > top && !bShowTop)
      scrollContainer.scrollTop = top - document.body.clientHeight/10;
   if ( scrollContainer.scrollTop+scrollContainer.clientHeight < bottom )
      scrollContainer.scrollTop = bottom-scrollContainer.clientHeight;
   if ( scrollContainer.scrollTop > top && bShowTop)
      scrollContainer.scrollTop = top - document.body.clientHeight/10;
}

// utility
function getRealPos(i,which)
{
   iPos = 0
   while (i!=null)
   {
      iPos += i["offset" + which];
      i = i.offsetParent;
   }
   return iPos
}


</SCRIPT>

            <DIV id=_MessageBoard onclick=SwitchMessage(event)>
            <TABLE cellSpacing=0 cellPadding=0 width="100%" bgColor=#ff9900 
            border=0>
              <TBODY>
              <TR>
                <TD width="100%">
                  <TABLE id=ForumTable cellSpacing=1 cellPadding=0 width="100%" 
                  bgColor=#ff9900 border=0>
                    <FORM 
                    action=/script/comments/app/do_filtermessages.asp?main=/audio/CWaveBox.asp&amp;df=100&amp;forumid=172077 
                    method=post>
                    <TBODY>
                    <TR>
                      <TD>
                        <TABLE cellSpacing=0 cellPadding=3 width="100%" 
                        bgColor=white border=0>
                          <TBODY>
                          <TR bgColor=#fbedbb>
                            <TD class=smalltext noWrap><A 
                              href="http://www.codeproject.com/script/comments/faq.asp"><IMG 
                              height=16 
                              src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/forum_faq.gif" 
                              width=16 align=absMiddle border=0> 
                            <B>FAQ</B></A>&nbsp;</TD>
                            <TD class=smalltext vAlign=top noWrap 
                              align=right>Message score threshold <SELECT 
                              class=smalltext size=1 name=noise><OPTION 
                                value=1>1.0</OPTION> <OPTION 
                                value=2>2.0</OPTION> <OPTION value=3 
                                selected>3.0</OPTION> <OPTION 
                                value=4>4.0</OPTION> <OPTION 
                              value=5>5.0</OPTION></SELECT>&nbsp;&nbsp;</TD>
                            <TD class=smalltext vAlign=center noWrap align=right 
                            colSpan=2><A 
                              href="http://www.codeproject.com/script/comments/search_comments.asp?forumid=172077"><IMG 
                              height=15 
                              src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/forum_search.gif" 
                              width=16 border=0> Search comments</A> &nbsp;</TD>
                            <TD vAlign=top align=right><INPUT class=FormButton type=submit value="Set Options" name=submit></TD></TR>
                          <TR bgColor=#ff9900>
                            <TD width="100%">&nbsp;</TD>
                            <TD class=smalltext vAlign=top noWrap 
                              align=right>View <SELECT class=smalltext size=1 
                              name=expand><OPTION value=0>Normal 
                                (slow)</OPTION> <OPTION value=2>Preview 
                                (slow)</OPTION> <OPTION value=5 selected>Message 
                                View</OPTION> <OPTION value=6>Topic 
                                View</OPTION> <OPTION value=1>Thread 
                                View</OPTION> <OPTION 
                              value=3>Expanded</OPTION></SELECT>&nbsp;&nbsp;</TD>
                            <TD class=smalltext vAlign=top noWrap>Per page 
                              <SELECT class=smalltext size=1 
                                name=perpage><OPTION value=10>10</OPTION> 
                                <OPTION value=25 selected>25</OPTION> <OPTION 
                                value=50>50</OPTION></SELECT></TD>
                            <TD 
                    colSpan=2>&nbsp;</TD></TR></TBODY></TABLE></TD></TR></FORM>
                    <TR bgColor=#fbedbb>
                      <TD><A name=xx0xx></A>
                        <TABLE cellPadding=2 width="100%" bgColor=#fbedbb 
                        border=0>
                          <TBODY>
                          <TR>
                            <TD class=messagetitle><IMG height=16 
                              src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/forum_newmsg.gif" 
                              width=16 align=top border=0><A class=HoverLink 
                              title="Add a new message to the discussions" 
                              href="http://www.codeproject.com/script/comments/user_new.asp?main=/audio/CWaveBox.asp&amp;df=100&amp;forumid=172077" 
                              target=_top name=HoverNL><B>New Message</B></A></TD>
                            <TD class=messagetitle>Msgs 1 to 25 of 38 (Total: 
                              38) (<A 
                              href="http://www.codeproject.com/audio/CWaveBox.asp?df=100&amp;forumid=172077">Refresh</A>)</TD>
                            <TD noWrap align=right><FONT 
                              class=messagetitle><SPAN 
                              class=HoverLink>First</SPAN> <SPAN 
                              class=HoverLink>Prev</SPAN> <A class=HoverLink 
                              href="http://www.codeproject.com/audio/CWaveBox.asp?df=100&amp;forumid=172077&amp;fr=26" 
                              name=HoverNL>Next</A> <SPAN 
                              class=HoverLink>&nbsp;&nbsp;&nbsp;&nbsp;</SPAN> 
                              </FONT></TD></TR></TBODY></TABLE></TD></TR>
                    <TR bgColor=white>
                      <TD>
                        <TABLE cellSpacing=0 cellPadding=0 width="100%" 
border=0>
                          <TBODY>
                          <TR>
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=2 bgColor=#fbedbb 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD class=messagetitle 
                                width="100%">Subject&nbsp;</TD>
                                <TD class=messagetitle noWrap 
                                width=140>Author&nbsp;</TD>
                                <TD style="WIDTH: 9em" noWrap align=right 
                                width=120><FONT 
                                class=messagetitle>Date&nbsp;</FONT></TD></TR></TBODY></TABLE></TD></TR>
                          <TR>
                            <TD><IMG height=5 
                              src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/t.gif" 
                              width=1 border=0></TD></TR>
                          <TR id=2206842_h0 bgColor=#fef9e7>
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD bgColor=white><A name=xx2206842xx></A><IMG 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/news_question.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD class=messagetitle style="COLOR: #aa0000" 
                                width="100%"><A class=messagetitle 
                                id=DynMessLink style="COLOR: #aa0000" 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?df=100&amp;forumid=172077&amp;select=2206842#xx2206842xx" 
                                name=2206842><B>i want to play two sound file 
                                same time</B></A></TD>
                                <TD vAlign=bottom noWrap><A 
                                href="http://www.codeproject.com/script/profile/whos_who.asp?id=3916014"><IMG 
                                title="Click for User Profile" height=15 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/userinfo.gif" 
                                width=14 border=0></A>&nbsp;</TD>
                                <TD noWrap width=140><FONT class=messagetitle 
                                style="COLOR: #aa0000"><B>rajneshmalik</B>&nbsp;</FONT></TD>
                                <TD style="WIDTH: 9em" noWrap align=right 
                                width=120><FONT class=messagetitle 
                                style="COLOR: #aa0000"><B>1:29 31 Aug 
                                '07</B>&nbsp;</FONT></TD></TR></TBODY></TABLE></TD></TR>
                          <TR id=2206842_h1 style="DISPLAY: none">
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD><IMG 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/news_blank.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD width="100%" bgColor=#d5eaff>
                                <TABLE cellSpacing=5 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD>
                                <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD colSpan=2><FONT class=messagecontent><IMG 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/smiley_confused.gif" 
                                align=absMiddle>hi<BR>i want to play two sound 
                                file same time and want to listen the sound of 
                                these file <BR>on separtly on left and right 
                                speaker,means sound of one file should play on 
                                left<BR>speaker and second file should play on 
                                right speaker<BR><BR>thank u in 
                                advance<BR><BR>&nbsp;</FONT></TD></TR>
                                <TR vAlign=top>
                                <TD class=messagetitle>[<A 
                                title="Reply to this current thread" 
                                href="http://www.codeproject.com/script/comments/user_reply.asp?main=/audio/CWaveBox.asp&amp;df=100&amp;forumid=172077&amp;select=2206842">Reply</A> 
                                | <A 
                                title="Email a reply to the author of this message" 
                                href="http://www.codeproject.com/script/comments/user_mail.asp?main=/audio/CWaveBox.asp&amp;df=100&amp;forumid=172077&amp;select=2206842">Email</A> 
                                | <A 
                                title="View only messages within this thread" 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?df=100&amp;tid=2206842&amp;forumid=172077&amp;select=2206842#xx2206842xx">View 
                                Thread</A> | <A 
                                title="Get the URL for this message" 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?msg=2206842#xx2206842xx">PermaLink</A> 
                                | <A title="Go to Thread Start" 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?msg=2206842#xx2206842xx">Go 
                                to Thread Start</A>]</TD>
                                <TD class=messagetitle align=right>Score: 5.0 (1 
                                vote).
                                <SCRIPT language=Javascript>MsgVoteForm(3916014,2206842);</SCRIPT>
                                 
                                </TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
                          <TR>
                            <TD><IMG height=6 
                              src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/t.gif" 
                              width=1 border=0></TD></TR>
                          <TR id=2211424_h0 bgColor=#fef9e7>
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD bgColor=white><A name=xx2211424xx></A><IMG 
                                height=1 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/ind.gif" 
                                width=18><IMG 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/news_answer.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD class=messagetitle width="100%"><A 
                                class=messagetitle id=DynMessLink 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?df=100&amp;forumid=172077&amp;select=2211424#xx2211424xx" 
                                name=2211424>Re: i want to play two sound file 
                                same time</A></TD>
                                <TD vAlign=bottom noWrap><A 
                                href="http://www.codeproject.com/script/profile/whos_who.asp?id=866695"><IMG 
                                title="Click for User Profile" height=15 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/userinfo.gif" 
                                width=14 border=0></A>&nbsp;</TD>
                                <TD noWrap width=140><FONT 
                                class=messagetitle>zenith__&nbsp;</FONT></TD>
                                <TD style="WIDTH: 9em" noWrap align=right 
                                width=120><FONT class=messagetitle>5:13 4 Sep 
                                '07&nbsp;</FONT></TD></TR></TBODY></TABLE></TD></TR>
                          <TR id=2211424_h1 style="DISPLAY: none">
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD><IMG height=1 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/ind.gif" 
                                width=18><IMG 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/news_blank.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD width="100%" bgColor=#d5eaff>
                                <TABLE cellSpacing=5 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD>
                                <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD colSpan=2><FONT 
                                class=messagecontent>Hi,<BR><BR>I don't know how 
                                you'll achieve that. <BR>Maybe you can buy 
                                another sound card and setup 2 players.<BR>Then 
                                you will achieve stereo <IMG 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/smiley_wink.gif" 
                                align=absMiddle>.<BR><BR>That will be hardware 
                                solution.<BR>But, software, I really dont know. 
                                But, I think there must be a way how you can 
                                send (play)<BR>music on left or right speaker 
                                separately as I sent on wout iface.<BR>Scenario 
                                will be something like this. Load 2 files and 
                                play it simultaneously (sent it to wout iface), 
                                but between each somehow switch between left or 
                                right speaker. If wout supports it, you'll get 2 
                                queues, one for left and one for right speaker 
                                with 2 different songs playing 
                                simultaneously.<BR>Sounds good <IMG 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/smiley_doh.gif" 
                                align=absMiddle><BR><BR>Good Luck. <IMG 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/smiley_cool.gif" 
                                align=absMiddle><BR><BR>Regards.<BR>Zen_.<BR><BR>&nbsp;</FONT></TD></TR>
                                <TR vAlign=top>
                                <TD class=messagetitle>[<A 
                                title="Reply to this current thread" 
                                href="http://www.codeproject.com/script/comments/user_reply.asp?main=/audio/CWaveBox.asp&amp;df=100&amp;forumid=172077&amp;select=2211424">Reply</A> 
                                | <A 
                                title="Email a reply to the author of this message" 
                                href="http://www.codeproject.com/script/comments/user_mail.asp?main=/audio/CWaveBox.asp&amp;df=100&amp;forumid=172077&amp;select=2211424">Email</A> 
                                | <A 
                                title="View only messages within this thread" 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?df=100&amp;tid=2206842&amp;forumid=172077&amp;select=2211424#xx2211424xx">View 
                                Thread</A> | <A 
                                title="Get the URL for this message" 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?msg=2211424#xx2211424xx">PermaLink</A> 
                                | <A title="Go to Thread Start" 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?msg=2206842#xx2206842xx">Go 
                                to Thread Start</A>]</TD>
                                <TD class=messagetitle align=right>
                                <SCRIPT language=Javascript>MsgVoteForm(866695,2211424);</SCRIPT>
                                </TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
                          <TR>
                            <TD><IMG height=5 
                              src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/t.gif" 
                              width=1 border=0></TD></TR>
                          <TR height=1>
                            <TD bgColor=#ff9900><IMG height=1 
                              src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/t.gif" 
                              width=1></TD></TR>
                          <TR id=2014960_h0 bgColor=#fef9e7>
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD bgColor=white><A name=xx2014960xx></A><IMG 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/news_question.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD class=messagetitle width="100%"><A 
                                class=messagetitle id=DynMessLink 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?df=100&amp;forumid=172077&amp;select=2014960#xx2014960xx" 
                                name=2014960><B>Question about 
                                "wfreeblock"</B></A></TD>
                                <TD vAlign=bottom noWrap><A 
                                href="http://www.codeproject.com/script/profile/whos_who.asp?id=4011985"><IMG 
                                title="Click for User Profile" height=15 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/userinfo.gif" 
                                width=14 border=0></A>&nbsp;</TD>
                                <TD noWrap width=140><FONT 
                                class=messagetitle><B>solarisomnium</B>&nbsp;</FONT></TD>
                                <TD style="WIDTH: 9em" noWrap align=right 
                                width=120><FONT class=messagetitle><B>13:42 1 
                                May 
                            '07</B>&nbsp;</FONT></TD></TR></TBODY></TABLE></TD></TR>
                          <TR id=2014960_h1 style="DISPLAY: none">
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD><IMG 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/news_blank.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD width="100%" bgColor=#d5eaff>
                                <TABLE cellSpacing=5 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD>
                                <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD colSpan=2><FONT class=messagecontent>Hello, 
                                Zenith.<BR><BR>I dont have much experience in 
                                development of multithreaded applications and 
                                have some question. Is it safe to check value of 
                                <B>wfreeblock</B> here (without 
                                <B>EnterCriticalSection</B>)?<BR><PRE><CODE>...<BR>if( free == BLOCK_COUNT )   /// are all blocks played!?<BR>{<BR>    /// unprepare any blocks that are still prepared<BR>    for( int i = 0; i &lt; wb-&gt;I[k].wfreeblock; i++)<BR>    ...<BR></CODE></PRE>Or 
                                <B>wfreeblock</B> should be changed to 
                                <B>free</B>? <IMG 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/smiley_squeamish.gif" 
                                align=absMiddle><BR>Thanks. 
                                <BR>&nbsp;</FONT></TD></TR>
                                <TR vAlign=top>
                                <TD class=messagetitle>[<A 
                                title="Reply to this current thread" 
                                href="http://www.codeproject.com/script/comments/user_reply.asp?main=/audio/CWaveBox.asp&amp;df=100&amp;forumid=172077&amp;select=2014960">Reply</A> 
                                | <A 
                                title="Email a reply to the author of this message" 
                                href="http://www.codeproject.com/script/comments/user_mail.asp?main=/audio/CWaveBox.asp&amp;df=100&amp;forumid=172077&amp;select=2014960">Email</A> 
                                | <A 
                                title="View only messages within this thread" 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?df=100&amp;tid=2014960&amp;forumid=172077&amp;select=2014960#xx2014960xx">View 
                                Thread</A> | <A 
                                title="Get the URL for this message" 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?msg=2014960#xx2014960xx">PermaLink</A> 
                                | <A title="Go to Thread Start" 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?msg=2014960#xx2014960xx">Go 
                                to Thread Start</A>]</TD>
                                <TD class=messagetitle align=right>
                                <SCRIPT language=Javascript>MsgVoteForm(4011985,2014960);</SCRIPT>
                                </TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
                          <TR>
                            <TD><IMG height=6 
                              src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/t.gif" 
                              width=1 border=0></TD></TR>
                          <TR id=2016079_h0 bgColor=#fef9e7>
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD bgColor=white><A name=xx2016079xx></A><IMG 
                                height=1 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/ind.gif" 
                                width=18><IMG 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/news_answer.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD class=messagetitle width="100%"><A 
                                class=messagetitle id=DynMessLink 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?df=100&amp;forumid=172077&amp;select=2016079#xx2016079xx" 
                                name=2016079>Re: Question about 
                                "wfreeblock"</A></TD>
                                <TD vAlign=bottom noWrap><A 
                                href="http://www.codeproject.com/script/profile/whos_who.asp?id=866695"><IMG 
                                title="Click for User Profile" height=15 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/userinfo.gif" 
                                width=14 border=0></A>&nbsp;</TD>
                                <TD noWrap width=140><FONT 
                                class=messagetitle>zenith__&nbsp;</FONT></TD>
                                <TD style="WIDTH: 9em" noWrap align=right 
                                width=120><FONT class=messagetitle>6:24 2 May 
                                '07&nbsp;</FONT></TD></TR></TBODY></TABLE></TD></TR>
                          <TR id=2016079_h1 style="DISPLAY: none">
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD><IMG height=1 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/ind.gif" 
                                width=18><IMG 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/news_blank.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD width="100%" bgColor=#d5eaff>
                                <TABLE cellSpacing=5 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD>
                                <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD colSpan=2><FONT class=messagecontent>Hi 
                                solarisomnium,<BR><BR>if I understand you 
                                correctly, your question is, can freeblock 
                                counter be checked (read) without entering 
                                critical section block?<BR>I don't think so, 
                                because some threads can increment (write) 
                                freeblock counter variable (in waveOutProc 
                                callback) at the same moments you try to read 
                                value from it.<BR>Keep in mind that freeblock 
                                counter is global counter used to limit queued 
                                block at WAI subsystem.<BR>When freeblock is 0, 
                                it means that all blocks are sent for playing. 
                                When any of block finishes, waveOutProc is 
                                triggered with message that playing was finished 
                                and freeblock goes incrementally.<BR>This is 
                                very sporadically and cant be predicted.<BR>You 
                                know that when one thread write and another 
                                reads in/from the same variable, the situation 
                                can goes in dead lock state, or read thread can 
                                get erroneous result.<BR>Unlimited count of only 
                                read threads can read data without critical 
                                section block, but if only one of them write at 
                                the same moment, all n-1 threads need to use 
                                critical section for 
                                reading.<BR><BR>Regards.<BR>Zenith__<BR><BR>&nbsp;</FONT></TD></TR>
                                <TR vAlign=top>
                                <TD class=messagetitle>[<A 
                                title="Reply to this current thread" 
                                href="http://www.codeproject.com/script/comments/user_reply.asp?main=/audio/CWaveBox.asp&amp;df=100&amp;forumid=172077&amp;select=2016079">Reply</A> 
                                | <A 
                                title="Email a reply to the author of this message" 
                                href="http://www.codeproject.com/script/comments/user_mail.asp?main=/audio/CWaveBox.asp&amp;df=100&amp;forumid=172077&amp;select=2016079">Email</A> 
                                | <A 
                                title="View only messages within this thread" 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?df=100&amp;tid=2014960&amp;forumid=172077&amp;select=2016079#xx2016079xx">View 
                                Thread</A> | <A 
                                title="Get the URL for this message" 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?msg=2016079#xx2016079xx">PermaLink</A> 
                                | <A title="Go to Thread Start" 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?msg=2014960#xx2014960xx">Go 
                                to Thread Start</A>]</TD>
                                <TD class=messagetitle align=right>
                                <SCRIPT language=Javascript>MsgVoteForm(866695,2016079);</SCRIPT>
                                </TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
                          <TR>
                            <TD><IMG height=6 
                              src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/t.gif" 
                              width=1 border=0></TD></TR>
                          <TR id=2016543_h0 bgColor=#fef9e7>
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD bgColor=white><A name=xx2016543xx></A><IMG 
                                height=1 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/ind.gif" 
                                width=36><IMG 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/news_general.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD class=messagetitle width="100%"><A 
                                class=messagetitle id=DynMessLink 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?df=100&amp;forumid=172077&amp;select=2016543#xx2016543xx" 
                                name=2016543>Re: Question about 
                                "wfreeblock"</A></TD>
                                <TD vAlign=bottom noWrap><A 
                                href="http://www.codeproject.com/script/profile/whos_who.asp?id=4011985"><IMG 
                                title="Click for User Profile" height=15 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/userinfo.gif" 
                                width=14 border=0></A>&nbsp;</TD>
                                <TD noWrap width=140><FONT 
                                class=messagetitle>solarisomnium&nbsp;</FONT></TD>
                                <TD style="WIDTH: 9em" noWrap align=right 
                                width=120><FONT class=messagetitle>9:45 2 May 
                                '07&nbsp;</FONT></TD></TR></TBODY></TABLE></TD></TR>
                          <TR id=2016543_h1 style="DISPLAY: none">
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD><IMG height=1 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/ind.gif" 
                                width=36><IMG 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/news_blank.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD width="100%" bgColor=#d5eaff>
                                <TABLE cellSpacing=5 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD>
                                <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD colSpan=2><FONT class=messagecontent>Thanks 
                                for the answer!<BR>But my question was only 
                                about one specified line of a code. <IMG 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/smiley_squeamish.gif" 
                                align=absMiddle><BR>&nbsp;</FONT></TD></TR>
                                <TR vAlign=top>
                                <TD class=messagetitle>[<A 
                                title="Reply to this current thread" 
                                href="http://www.codeproject.com/script/comments/user_reply.asp?main=/audio/CWaveBox.asp&amp;df=100&amp;forumid=172077&amp;select=2016543">Reply</A> 
                                | <A 
                                title="Email a reply to the author of this message" 
                                href="http://www.codeproject.com/script/comments/user_mail.asp?main=/audio/CWaveBox.asp&amp;df=100&amp;forumid=172077&amp;select=2016543">Email</A> 
                                | <A 
                                title="View only messages within this thread" 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?df=100&amp;tid=2014960&amp;forumid=172077&amp;select=2016543#xx2016543xx">View 
                                Thread</A> | <A 
                                title="Get the URL for this message" 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?msg=2016543#xx2016543xx">PermaLink</A> 
                                | <A title="Go to Thread Start" 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?msg=2014960#xx2014960xx">Go 
                                to Thread Start</A>]</TD>
                                <TD class=messagetitle align=right>
                                <SCRIPT language=Javascript>MsgVoteForm(4011985,2016543);</SCRIPT>
                                </TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
                          <TR>
                            <TD><IMG height=6 
                              src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/t.gif" 
                              width=1 border=0></TD></TR>
                          <TR id=2018058_h0 bgColor=#fef9e7>
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD bgColor=white><A name=xx2018058xx></A><IMG 
                                height=1 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/ind.gif" 
                                width=54><IMG 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/news_general.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD class=messagetitle width="100%"><A 
                                class=messagetitle id=DynMessLink 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?df=100&amp;forumid=172077&amp;select=2018058#xx2018058xx" 
                                name=2018058>Re: Question about 
                                "wfreeblock"</A></TD>
                                <TD vAlign=bottom noWrap><A 
                                href="http://www.codeproject.com/script/profile/whos_who.asp?id=866695"><IMG 
                                title="Click for User Profile" height=15 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/userinfo.gif" 
                                width=14 border=0></A>&nbsp;</TD>
                                <TD noWrap width=140><FONT 
                                class=messagetitle>zenith__&nbsp;</FONT></TD>
                                <TD style="WIDTH: 9em" noWrap align=right 
                                width=120><FONT class=messagetitle>4:49 3 May 
                                '07&nbsp;</FONT></TD></TR></TBODY></TABLE></TD></TR>
                          <TR id=2018058_h1 style="DISPLAY: none">
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD><IMG height=1 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/ind.gif" 
                                width=54><IMG 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/news_blank.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD width="100%" bgColor=#d5eaff>
                                <TABLE cellSpacing=5 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD>
                                <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD colSpan=2><FONT class=messagecontent>Hi 
                                solarisomnium,<BR><BR>would you be more 
                                satisfied with answer in one single 
                                word....like...'No!' <IMG 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/smiley_confused.gif" 
                                align=absMiddle>!? <IMG 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/smiley_wink.gif" 
                                align=absMiddle><BR><BR>In programs, single line 
                                of code can hold story/background of single page 
                                of text <IMG 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/smiley_doh.gif" 
                                align=absMiddle><BR><BR>Stay tuned. <IMG 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/smiley_cool.gif" 
                                align=absMiddle><BR>Regards.<BR>Zenith__<BR><BR>&nbsp;</FONT></TD></TR>
                                <TR vAlign=top>
                                <TD class=messagetitle>[<A 
                                title="Reply to this current thread" 
                                href="http://www.codeproject.com/script/comments/user_reply.asp?main=/audio/CWaveBox.asp&amp;df=100&amp;forumid=172077&amp;select=2018058">Reply</A> 
                                | <A 
                                title="Email a reply to the author of this message" 
                                href="http://www.codeproject.com/script/comments/user_mail.asp?main=/audio/CWaveBox.asp&amp;df=100&amp;forumid=172077&amp;select=2018058">Email</A> 
                                | <A 
                                title="View only messages within this thread" 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?df=100&amp;tid=2014960&amp;forumid=172077&amp;select=2018058#xx2018058xx">View 
                                Thread</A> | <A 
                                title="Get the URL for this message" 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?msg=2018058#xx2018058xx">PermaLink</A> 
                                | <A title="Go to Thread Start" 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?msg=2014960#xx2014960xx">Go 
                                to Thread Start</A>]</TD>
                                <TD class=messagetitle align=right>
                                <SCRIPT language=Javascript>MsgVoteForm(866695,2018058);</SCRIPT>
                                </TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
                          <TR>
                            <TD><IMG height=5 
                              src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/t.gif" 
                              width=1 border=0></TD></TR>
                          <TR height=1>
                            <TD bgColor=#ff9900><IMG height=1 
                              src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/t.gif" 
                              width=1></TD></TR>
                          <TR id=1994497_h0 bgColor=#fef9e7>
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD bgColor=white><A name=xx1994497xx></A><IMG 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/news_general.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD class=messagetitle width="100%"><A 
                                class=messagetitle id=DynMessLink 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?df=100&amp;forumid=172077&amp;select=1994497#xx1994497xx" 
                                name=1994497><B>How can I use this class in C# 
                                application?</B></A></TD>
                                <TD vAlign=bottom noWrap><A 
                                href="http://www.codeproject.com/script/profile/whos_who.asp?id=3329005"><IMG 
                                title="Click for User Profile" height=15 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/userinfo.gif" 
                                width=14 border=0></A>&nbsp;</TD>
                                <TD noWrap width=140><FONT 
                                class=messagetitle><B>ricardoborges</B>&nbsp;</FONT></TD>
                                <TD style="WIDTH: 9em" noWrap align=right 
                                width=120><FONT class=messagetitle><B>2:06 18 
                                Apr 
                            '07</B>&nbsp;</FONT></TD></TR></TBODY></TABLE></TD></TR>
                          <TR id=1994497_h1 style="DISPLAY: none">
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD><IMG 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/news_blank.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD width="100%" bgColor=#d5eaff>
                                <TABLE cellSpacing=5 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD>
                                <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD colSpan=2><FONT class=messagecontent>Can I 
                                create a Dll (.net Assembly) for WaveBox class 
                                and use in my C# 
                                application?<BR><BR>&nbsp;</FONT></TD></TR>
                                <TR vAlign=top>
                                <TD class=messagetitle>[<A 
                                title="Reply to this current thread" 
                                href="http://www.codeproject.com/script/comments/user_reply.asp?main=/audio/CWaveBox.asp&amp;df=100&amp;forumid=172077&amp;select=1994497">Reply</A> 
                                | <A 
                                title="Email a reply to the author of this message" 
                                href="http://www.codeproject.com/script/comments/user_mail.asp?main=/audio/CWaveBox.asp&amp;df=100&amp;forumid=172077&amp;select=1994497">Email</A> 
                                | <A 
                                title="View only messages within this thread" 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?df=100&amp;tid=1994497&amp;forumid=172077&amp;select=1994497#xx1994497xx">View 
                                Thread</A> | <A 
                                title="Get the URL for this message" 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?msg=1994497#xx1994497xx">PermaLink</A> 
                                | <A title="Go to Thread Start" 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?msg=1994497#xx1994497xx">Go 
                                to Thread Start</A>]</TD>
                                <TD class=messagetitle align=right>
                                <SCRIPT language=Javascript>MsgVoteForm(3329005,1994497);</SCRIPT>
                                </TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
                          <TR>
                            <TD><IMG height=6 
                              src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/t.gif" 
                              width=1 border=0></TD></TR>
                          <TR id=1994571_h0 bgColor=#fef9e7>
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD bgColor=white><A name=xx1994571xx></A><IMG 
                                height=1 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/ind.gif" 
                                width=18><IMG 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/news_general.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD class=messagetitle width="100%"><A 
                                class=messagetitle id=DynMessLink 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?df=100&amp;forumid=172077&amp;select=1994571#xx1994571xx" 
                                name=1994571>Re: How can I use this class in C# 
                                application?</A></TD>
                                <TD vAlign=bottom noWrap><A 
                                href="http://www.codeproject.com/script/profile/whos_who.asp?id=866695"><IMG 
                                title="Click for User Profile" height=15 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/userinfo.gif" 
                                width=14 border=0></A>&nbsp;</TD>
                                <TD noWrap width=140><FONT 
                                class=messagetitle>zenith__&nbsp;</FONT></TD>
                                <TD style="WIDTH: 9em" noWrap align=right 
                                width=120><FONT class=messagetitle>2:54 18 Apr 
                                '07&nbsp;</FONT></TD></TR></TBODY></TABLE></TD></TR>
                          <TR id=1994571_h1 style="DISPLAY: none">
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD><IMG height=1 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/ind.gif" 
                                width=18><IMG 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/news_blank.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD width="100%" bgColor=#d5eaff>
                                <TABLE cellSpacing=5 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD>
                                <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD colSpan=2><FONT class=messagecontent>Sure 
                                you 
                                can.<BR><BR>Regards.<BR>Zen.<BR><BR>&nbsp;</FONT></TD></TR>
                                <TR vAlign=top>
                                <TD class=messagetitle>[<A 
                                title="Reply to this current thread" 
                                href="http://www.codeproject.com/script/comments/user_reply.asp?main=/audio/CWaveBox.asp&amp;df=100&amp;forumid=172077&amp;select=1994571">Reply</A> 
                                | <A 
                                title="Email a reply to the author of this message" 
                                href="http://www.codeproject.com/script/comments/user_mail.asp?main=/audio/CWaveBox.asp&amp;df=100&amp;forumid=172077&amp;select=1994571">Email</A> 
                                | <A 
                                title="View only messages within this thread" 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?df=100&amp;tid=1994497&amp;forumid=172077&amp;select=1994571#xx1994571xx">View 
                                Thread</A> | <A 
                                title="Get the URL for this message" 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?msg=1994571#xx1994571xx">PermaLink</A> 
                                | <A title="Go to Thread Start" 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?msg=1994497#xx1994497xx">Go 
                                to Thread Start</A>]</TD>
                                <TD class=messagetitle align=right>
                                <SCRIPT language=Javascript>MsgVoteForm(866695,1994571);</SCRIPT>
                                </TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
                          <TR>
                            <TD><IMG height=5 
                              src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/t.gif" 
                              width=1 border=0></TD></TR>
                          <TR height=1>
                            <TD bgColor=#ff9900><IMG height=1 
                              src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/t.gif" 
                              width=1></TD></TR>
                          <TR id=1958312_h0 bgColor=#fef9e7>
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD bgColor=white><A name=xx1958312xx></A><IMG 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/news_general.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD class=messagetitle width="100%"><A 
                                class=messagetitle id=DynMessLink 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?df=100&amp;forumid=172077&amp;select=1958312#xx1958312xx" 
                                name=1958312><B>playing Raw Data...</B></A></TD>
                                <TD vAlign=bottom noWrap><A 
                                href="http://www.codeproject.com/script/profile/whos_who.asp?id=327739"><IMG 
                                title="Click for User Profile" height=15 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/userinfo.gif" 
                                width=14 border=0></A>&nbsp;</TD>
                                <TD noWrap width=140><FONT 
                                class=messagetitle><B>SuperEric</B>&nbsp;</FONT></TD>
                                <TD style="WIDTH: 9em" noWrap align=right 
                                width=120><FONT class=messagetitle><B>12:29 25 
                                Mar 
                            '07</B>&nbsp;</FONT></TD></TR></TBODY></TABLE></TD></TR>
                          <TR id=1958312_h1 style="DISPLAY: none">
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD><IMG 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/news_blank.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD width="100%" bgColor=#d5eaff>
                                <TABLE cellSpacing=5 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD>
                                <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD colSpan=2><FONT class=messagecontent>Hey 
                                dude, Nice job.<BR>I have a problem. I have an 
                                array of bytes which contains some data of an 
                                audio file.<BR>I want to play this array real 
                                time without specifying any format and so 
                                on.<BR>Just to play the data when it is arrived. 
                                (network concern!)<BR>Do you have any clue how 
                                to do that and what library(maybe) or article 
                                can be 
                                useful?<BR><BR>Regards,<BR>Eric<BR><BR><BR><BR>
                                <DIV class=ForumSig>In a world with no walls and 
                                fences why do we need Windows and 
                                Gates??</DIV><BR>&nbsp;</FONT></TD></TR>
                                <TR vAlign=top>
                                <TD class=messagetitle>[<A 
                                title="Reply to this current thread" 
                                href="http://www.codeproject.com/script/comments/user_reply.asp?main=/audio/CWaveBox.asp&amp;df=100&amp;forumid=172077&amp;select=1958312">Reply</A> 
                                | <A 
                                title="Email a reply to the author of this message" 
                                href="http://www.codeproject.com/script/comments/user_mail.asp?main=/audio/CWaveBox.asp&amp;df=100&amp;forumid=172077&amp;select=1958312">Email</A> 
                                | <A 
                                title="View only messages within this thread" 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?df=100&amp;tid=1958312&amp;forumid=172077&amp;select=1958312#xx1958312xx">View 
                                Thread</A> | <A 
                                title="Get the URL for this message" 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?msg=1958312#xx1958312xx">PermaLink</A> 
                                | <A title="Go to Thread Start" 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?msg=1958312#xx1958312xx">Go 
                                to Thread Start</A>]</TD>
                                <TD class=messagetitle align=right>
                                <SCRIPT language=Javascript>MsgVoteForm(327739,1958312);</SCRIPT>
                                </TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
                          <TR>
                            <TD><IMG height=6 
                              src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/t.gif" 
                              width=1 border=0></TD></TR>
                          <TR id=1958985_h0 bgColor=#fef9e7>
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD bgColor=white><A name=xx1958985xx></A><IMG 
                                height=1 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/ind.gif" 
                                width=18><IMG 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/news_general.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD class=messagetitle width="100%"><A 
                                class=messagetitle id=DynMessLink 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?df=100&amp;forumid=172077&amp;select=1958985#xx1958985xx" 
                                name=1958985>Re: playing Raw Data...</A></TD>
                                <TD vAlign=bottom noWrap><A 
                                href="http://www.codeproject.com/script/profile/whos_who.asp?id=866695"><IMG 
                                title="Click for User Profile" height=15 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/userinfo.gif" 
                                width=14 border=0></A>&nbsp;</TD>
                                <TD noWrap width=140><FONT 
                                class=messagetitle>zenith__&nbsp;</FONT></TD>
                                <TD style="WIDTH: 9em" noWrap align=right 
                                width=120><FONT class=messagetitle>4:25 26 Mar 
                                '07&nbsp;</FONT></TD></TR></TBODY></TABLE></TD></TR>
                          <TR id=1958985_h1 style="DISPLAY: none">
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD><IMG height=1 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/ind.gif" 
                                width=18><IMG 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/news_blank.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD width="100%" bgColor=#d5eaff>
                                <TABLE cellSpacing=5 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD>
                                <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD colSpan=2><FONT class=messagecontent>Hi 
                                Eric,<BR><BR>You can't play something if you 
                                don't know how to play it.<BR><BR>You should '// 
                                fill WAVEFORMATEX from wave header' or fill it 
                                by yourself<BR>(if you'll get always the same 
                                format) and play it with waveOut on 
                                Windows.<BR><BR>You have all infos in this 
                                article!<IMG 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/smiley_wink.gif" 
                                align=absMiddle><BR><BR>Regards.<BR>Zenith__<BR><BR>&nbsp;</FONT></TD></TR>
                                <TR vAlign=top>
                                <TD class=messagetitle>[<A 
                                title="Reply to this current thread" 
                                href="http://www.codeproject.com/script/comments/user_reply.asp?main=/audio/CWaveBox.asp&amp;df=100&amp;forumid=172077&amp;select=1958985">Reply</A> 
                                | <A 
                                title="Email a reply to the author of this message" 
                                href="http://www.codeproject.com/script/comments/user_mail.asp?main=/audio/CWaveBox.asp&amp;df=100&amp;forumid=172077&amp;select=1958985">Email</A> 
                                | <A 
                                title="View only messages within this thread" 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?df=100&amp;tid=1958312&amp;forumid=172077&amp;select=1958985#xx1958985xx">View 
                                Thread</A> | <A 
                                title="Get the URL for this message" 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?msg=1958985#xx1958985xx">PermaLink</A> 
                                | <A title="Go to Thread Start" 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?msg=1958312#xx1958312xx">Go 
                                to Thread Start</A>]</TD>
                                <TD class=messagetitle align=right>
                                <SCRIPT language=Javascript>MsgVoteForm(866695,1958985);</SCRIPT>
                                </TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
                          <TR>
                            <TD><IMG height=5 
                              src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/t.gif" 
                              width=1 border=0></TD></TR>
                          <TR height=1>
                            <TD bgColor=#ff9900><IMG height=1 
                              src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/t.gif" 
                              width=1></TD></TR>
                          <TR id=1925249_h0 bgColor=#fef9e7>
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD bgColor=white><A name=xx1925249xx></A><IMG 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/news_info.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD class=messagetitle width="100%"><A 
                                class=messagetitle id=DynMessLink 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?df=100&amp;forumid=172077&amp;select=1925249#xx1925249xx" 
                                name=1925249><B>... or you can use this class 
                                ... [modified]</B></A></TD>
                                <TD vAlign=bottom noWrap><A 
                                href="http://www.codeproject.com/script/profile/whos_who.asp?id=1118132"><IMG 
                                title="Click for User Profile" height=15 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/userinfo.gif" 
                                width=14 border=0></A>&nbsp;</TD>
                                <TD noWrap width=140><FONT 
                                class=messagetitle><B>as2</B>&nbsp;</FONT></TD>
                                <TD style="WIDTH: 9em" noWrap align=right 
                                width=120><FONT class=messagetitle><B>4:07 6 Mar 
                                '07</B>&nbsp;</FONT></TD></TR></TBODY></TABLE></TD></TR>
                          <TR id=1925249_h1 style="DISPLAY: none">
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD><IMG 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/news_blank.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD width="100%" bgColor=#d5eaff>
                                <TABLE cellSpacing=5 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD>
                                <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD colSpan=2><FONT 
                                class=messagecontent>finally, after six hours, 
                                deleted tons of crap out off CWaveBox 
                                and<BR>came out with this <BR><PRE><BR>static unsigned int __stdcall PlayThread( LPVOID lp )<BR>{<BR>    /// get the class instance<BR>    CWaveBox *wb = ( CWaveBox *)lp;<BR>    int    i;<BR>//<BR>WAIT_FOR_SOUND:<BR>	WaitForSingleObject(wb-&gt;m_ThreadWakeUp, INFINITE);<BR>        if (wb-&gt;m_TMSG == TMSG_CLOSE) <BR>         goto END_THREAD;<BR>FIND_SOUND_2_PLAY:		<BR>	EnterCriticalSection( &amp;cs );<BR>         for( i = 0; i &lt; wb-&gt;m_WaveCount; i++ )<BR>          if( wb-&gt;m_Waves[i].WMSG == WMSG_START )    <BR>           break;<BR>.<BR>PLAY_SOUND:<BR>	 wb-&gt;m_Waves[i].WMSG = WMSG_WAIT;  <BR>	 wb-&gt;m_WavesToPlay--;<BR>        LeaveCriticalSection( &amp;cs ); <BR>.<BR>	wb-&gt;PlayWave(i);<BR>.<BR>	if (wb-&gt;m_WavesToPlay ) <BR>         goto FIND_SOUND_2_PLAY;<BR>goto WAIT_FOR_SOUND           <BR>//<BR>END_THREAD:<BR>    wb-&gt;RemoveInterfaces();<BR>    return  THREAD_EXIT; <BR>}<BR></PRE><BR><BR>as 
                                I tought - you do not need this complex code 
                                from Zen (memory can be read parallel from 
                                different threads and waveOutWrite).<BR><BR>So I 
                                suggest to start from this <A 
                                href="http://www.hot.ee/as2/WB_TEST.zip" 
                                <a>http://www.hot.ee/as2/WB_TEST.zip</A>[<A 
                                title="New Window" 
                                href="http://www.hot.ee/as2/WB_TEST.zip" 
                                target=_blank>^</A>] instead of Zen's CWaveBox 
                                <BR><BR>Learned from here <A 
                                href="http://www.pocketpcdn.com/articles/multiplewaves.html">http://www.pocketpcdn.com/articles/multiplewaves.html</A>[<A 
                                title="New Window" 
                                href="http://www.pocketpcdn.com/articles/multiplewaves.html" 
                                target=_blank>^</A>]<BR><BR><BR><BR><BR><BR><BR>-- 
                                modified at 15:27 Wednesday 7th March, 2007 
                                <BR>&nbsp;</FONT></TD></TR>
                                <TR vAlign=top>
                                <TD class=messagetitle>[<A 
                                title="Reply to this current thread" 
                                href="http://www.codeproject.com/script/comments/user_reply.asp?main=/audio/CWaveBox.asp&amp;df=100&amp;forumid=172077&amp;select=1925249">Reply</A> 
                                | <A 
                                title="Email a reply to the author of this message" 
                                href="http://www.codeproject.com/script/comments/user_mail.asp?main=/audio/CWaveBox.asp&amp;df=100&amp;forumid=172077&amp;select=1925249">Email</A> 
                                | <A 
                                title="View only messages within this thread" 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?df=100&amp;tid=1925249&amp;forumid=172077&amp;select=1925249#xx1925249xx">View 
                                Thread</A> | <A 
                                title="Get the URL for this message" 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?msg=1925249#xx1925249xx">PermaLink</A> 
                                | <A title="Go to Thread Start" 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?msg=1925249#xx1925249xx">Go 
                                to Thread Start</A>]</TD>
                                <TD class=messagetitle align=right>
                                <SCRIPT language=Javascript>MsgVoteForm(1118132,1925249);</SCRIPT>
                                </TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
                          <TR>
                            <TD><IMG height=6 
                              src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/t.gif" 
                              width=1 border=0></TD></TR>
                          <TR id=1927526_h0 bgColor=#fef9e7>
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD bgColor=white><A name=xx1927526xx></A><IMG 
                                height=1 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/ind.gif" 
                                width=18><IMG 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/news_general.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD class=messagetitle width="100%"><A 
                                class=messagetitle id=DynMessLink 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?df=100&amp;forumid=172077&amp;select=1927526#xx1927526xx" 
                                name=1927526>Re: ... or you can use this class 
                                ...</A></TD>
                                <TD vAlign=bottom noWrap><A 
                                href="http://www.codeproject.com/script/profile/whos_who.asp?id=866695"><IMG 
                                title="Click for User Profile" height=15 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/userinfo.gif" 
                                width=14 border=0></A>&nbsp;</TD>
                                <TD noWrap width=140><FONT 
                                class=messagetitle>zenith__&nbsp;</FONT></TD>
                                <TD style="WIDTH: 9em" noWrap align=right 
                                width=120><FONT class=messagetitle>4:47 7 Mar 
                                '07&nbsp;</FONT></TD></TR></TBODY></TABLE></TD></TR>
                          <TR id=1927526_h1 style="DISPLAY: none">
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD><IMG height=1 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/ind.gif" 
                                width=18><IMG 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/news_blank.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD width="100%" bgColor=#d5eaff>
                                <TABLE cellSpacing=5 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD>
                                <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD colSpan=2><FONT class=messagecontent>Hi 
                                as2,<BR><BR>I think you finally have done 
                                nothing. Can you please build as working demo 
                                with <BR>your discovered code. You can freely 
                                use waves from my demo project. I'll be so 
                                pleased<BR>to hear it playing from your 
                                code.<BR><BR>Please, I've nothing with you, but 
                                you advising us some better solution, but it 
                                doesn't<BR>work. I tried to run my demo with 
                                your modified class, but there is no freaking 
                                sound!!!<BR>Btw. Your code will never ever goto 
                                PLAY; scope because of:<BR><BR>for (d = 0; d 
                                &lt; MAX_SIMWAVES; d++)<BR>if (!m_Dev[d].used) 
                                ///You check 'used' flag for false<BR>{ ///and 
                                you never set it to false in <BR>m_Dev[d].used = 
                                USED; ///your code. You expect user will do 
                                <BR>goto PLAY; ///that!?<BR>}<BR><BR>About 
                                multiple waves article. Thanks for discovering 
                                it, I didn't see it when I wrote<BR>this article 
                                (because I needed any solution ASAP), but did 
                                you read 'Conclusion' paragraph at the 
                                end?<BR><BR><I><BR>We've accomplished a 
                                continuous multiple-instanced simultaneously 
                                wave file playing. Now you can get back making 
                                your side scroller game and put everything on 
                                the screen explode at the same time with the 
                                proper sound effects. But, the method explained 
                                here is not all-wonderful. It has a major 
                                flaw.<BR><BR>During the whole article, we have 
                                assumed we're only going to play small wave 
                                files (less than 100kb). This is ok since most 
                                sound effects are small, then there's no problem 
                                in loading it entirely on memory at once. But, 
                                if you need to play bigger sounds, like long 
                                speeches, you'll need to load small portions of 
                                the file and play them in sequence, using double 
                                or circular buffers techniques to keep the 
                                perfect continuity of the sound (otherwise 
                                you'll have an audible gap between the playback 
                                of each portion). But, for now, what we have 
                                done should be enough. <BR></I><BR><BR><BR>And, 
                                I've done exactly that. There is an circularly 
                                buffer implemented and this class can<BR>play as 
                                big waves as capacity of your RAM. It can also, 
                                be easily rewritten to cache chunks from files, 
                                then it will can play waves as big as your 
                                HDD.<BR>I didn't look at your suggested article 
                                to see it's magic. Maybe, I will do that one 
                                time. <BR>And finally, about 
                                CWaveBox::allocateBlocks? You obviously didn't 
                                read this article carefully. That function, and 
                                some more, are borrowed from guy which inspired 
                                me to wrote this class. Btw. he is writing 
                                Winamp plugs and I think its not to bad to see 
                                some<BR>pro's code. Maybe we will learn 
                                something from that. btw. IMHO that's allocation 
                                of circular buffers. Learn man!!!<BR><BR>I'm 
                                waiting your demo! <IMG 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/smiley_rolleyes.gif" 
                                align=absMiddle><BR><BR>Regards.<BR>Zen.<BR><BR>&nbsp;</FONT></TD></TR>
                                <TR vAlign=top>
                                <TD class=messagetitle>[<A 
                                title="Reply to this current thread" 
                                href="http://www.codeproject.com/script/comments/user_reply.asp?main=/audio/CWaveBox.asp&amp;df=100&amp;forumid=172077&amp;select=1927526">Reply</A> 
                                | <A 
                                title="Email a reply to the author of this message" 
                                href="http://www.codeproject.com/script/comments/user_mail.asp?main=/audio/CWaveBox.asp&amp;df=100&amp;forumid=172077&amp;select=1927526">Email</A> 
                                | <A 
                                title="View only messages within this thread" 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?df=100&amp;tid=1925249&amp;forumid=172077&amp;select=1927526#xx1927526xx">View 
                                Thread</A> | <A 
                                title="Get the URL for this message" 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?msg=1927526#xx1927526xx">PermaLink</A> 
                                | <A title="Go to Thread Start" 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?msg=1925249#xx1925249xx">Go 
                                to Thread Start</A>]</TD>
                                <TD class=messagetitle align=right>
                                <SCRIPT language=Javascript>MsgVoteForm(866695,1927526);</SCRIPT>
                                </TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
                          <TR>
                            <TD><IMG height=6 
                              src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/t.gif" 
                              width=1 border=0></TD></TR>
                          <TR id=1928540_h0 bgColor=#fef9e7>
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD bgColor=white><A name=xx1928540xx></A><IMG 
                                height=1 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/ind.gif" 
                                width=36><IMG 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/news_general.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD class=messagetitle width="100%"><A 
                                class=messagetitle id=DynMessLink 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?df=100&amp;forumid=172077&amp;select=1928540#xx1928540xx" 
                                name=1928540>Re: ... or you can use this class 
                                ...</A></TD>
                                <TD vAlign=bottom noWrap><A 
                                href="http://www.codeproject.com/script/profile/whos_who.asp?id=1118132"><IMG 
                                title="Click for User Profile" height=15 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/userinfo.gif" 
                                width=14 border=0></A>&nbsp;</TD>
                                <TD noWrap width=140><FONT 
                                class=messagetitle>as2&nbsp;</FONT></TD>
                                <TD style="WIDTH: 9em" noWrap align=right 
                                width=120><FONT class=messagetitle>14:11 7 Mar 
                                '07&nbsp;</FONT></TD></TR></TBODY></TABLE></TD></TR>
                          <TR id=1928540_h1 style="DISPLAY: none">
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD><IMG height=1 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/ind.gif" 
                                width=36><IMG 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/news_blank.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD width="100%" bgColor=#d5eaff>
                                <TABLE cellSpacing=5 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD>
                                <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD colSpan=2><FONT class=messagecontent>Hi 
                                Zen,<BR><BR>Had lots of bugs in my code. My code 
                                was actually only for indoor <BR>(Pocket PC, 
                                Smart devices) projects so, did not test it on 
                                Windows XP.<BR>Now i rewrote couple of lines and 
                                it works well (compiled with VS2005). Test it 
                                out - it cant play hard disc sized files(cold 
                                not test it ) but 2.7 Mb of wav (44kHz) was now 
                                problem.<BR><BR>Here is test program (my own 
                                soft for iPAQ runs on same CWaveBox I 
                                wrote)<BR><A 
                                href="http://www.hot.ee/as2/WB_TEST.zip">http://www.hot.ee/as2/WB_TEST.zip</A>[<A 
                                title="New Window" 
                                href="http://www.hot.ee/as2/WB_TEST.zip" 
                                target=_blank>^</A>]<BR><BR>Arvi 
                                <BR>&nbsp;</FONT></TD></TR>
                                <TR vAlign=top>
                                <TD class=messagetitle>[<A 
                                title="Reply to this current thread" 
                                href="http://www.codeproject.com/script/comments/user_reply.asp?main=/audio/CWaveBox.asp&amp;df=100&amp;forumid=172077&amp;select=1928540">Reply</A> 
                                | <A 
                                title="Email a reply to the author of this message" 
                                href="http://www.codeproject.com/script/comments/user_mail.asp?main=/audio/CWaveBox.asp&amp;df=100&amp;forumid=172077&amp;select=1928540">Email</A> 
                                | <A 
                                title="View only messages within this thread" 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?df=100&amp;tid=1925249&amp;forumid=172077&amp;select=1928540#xx1928540xx">View 
                                Thread</A> | <A 
                                title="Get the URL for this message" 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?msg=1928540#xx1928540xx">PermaLink</A> 
                                | <A title="Go to Thread Start" 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?msg=1925249#xx1925249xx">Go 
                                to Thread Start</A>]</TD>
                                <TD class=messagetitle align=right>
                                <SCRIPT language=Javascript>MsgVoteForm(1118132,1928540);</SCRIPT>
                                </TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
                          <TR>
                            <TD><IMG height=6 
                              src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/t.gif" 
                              width=1 border=0></TD></TR>
                          <TR id=1929531_h0 bgColor=#fef9e7>
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD bgColor=white><A name=xx1929531xx></A><IMG 
                                height=1 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/ind.gif" 
                                width=54><IMG 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/news_general.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD class=messagetitle width="100%"><A 
                                class=messagetitle id=DynMessLink 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?df=100&amp;forumid=172077&amp;select=1929531#xx1929531xx" 
                                name=1929531>Re: ... or you can use this class 
                                ...</A></TD>
                                <TD vAlign=bottom noWrap><A 
                                href="http://www.codeproject.com/script/profile/whos_who.asp?id=866695"><IMG 
                                title="Click for User Profile" height=15 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/userinfo.gif" 
                                width=14 border=0></A>&nbsp;</TD>
                                <TD noWrap width=140><FONT 
                                class=messagetitle>zenith__&nbsp;</FONT></TD>
                                <TD style="WIDTH: 9em" noWrap align=right 
                                width=120><FONT class=messagetitle>4:45 8 Mar 
                                '07&nbsp;</FONT></TD></TR></TBODY></TABLE></TD></TR>
                          <TR id=1929531_h1 style="DISPLAY: none">
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD><IMG height=1 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/ind.gif" 
                                width=54><IMG 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/news_blank.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD width="100%" bgColor=#d5eaff>
                                <TABLE cellSpacing=5 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD>
                                <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD colSpan=2><FONT class=messagecontent>Hi 
                                Arvi,<BR><BR>this is much better solution. It 
                                works! Excellent. <BR>I also think that events 
                                are better solution from sleep.<BR>If you have 
                                time, you should polish it a little and attach 
                                it to this zone.<BR>e.g. You can move PlayWave 
                                into PlayThread.<BR>I'm giving you 
                                approval!<BR><BR>You've done mixed wave playing 
                                from RAM. This is suitable for 90% projects, 
                                especially projects for PDA's. Class CWaveBox 
                                is implemented in board/strategy game 
                                Add-Venture for PocketPCs, and it plays good, 
                                with no bugs  tested!. The game is selling now 
                                for almost one year. You can check it at 
                                www.qsoftz.com.<BR><BR>But, Im moving now on 
                                some advanced projects where Ill need classic 
                                player enhancement, for playing game theme 
                                tracks. Which mean, I will need circular buffer 
                                support and some decoder (probably vorbiss Ogg 
                                which is more than good alternative to 
                                mp3).<BR><BR>Youve done good steps. Go forward! 
                                <BR><BR>Regards.<BR>Zen.<BR><BR>&nbsp;</FONT></TD></TR>
                                <TR vAlign=top>
                                <TD class=messagetitle>[<A 
                                title="Reply to this current thread" 
                                href="http://www.codeproject.com/script/comments/user_reply.asp?main=/audio/CWaveBox.asp&amp;df=100&amp;forumid=172077&amp;select=1929531">Reply</A> 
                                | <A 
                                title="Email a reply to the author of this message" 
                                href="http://www.codeproject.com/script/comments/user_mail.asp?main=/audio/CWaveBox.asp&amp;df=100&amp;forumid=172077&amp;select=1929531">Email</A> 
                                | <A 
                                title="View only messages within this thread" 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?df=100&amp;tid=1925249&amp;forumid=172077&amp;select=1929531#xx1929531xx">View 
                                Thread</A> | <A 
                                title="Get the URL for this message" 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?msg=1929531#xx1929531xx">PermaLink</A> 
                                | <A title="Go to Thread Start" 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?msg=1925249#xx1925249xx">Go 
                                to Thread Start</A>]</TD>
                                <TD class=messagetitle align=right>
                                <SCRIPT language=Javascript>MsgVoteForm(866695,1929531);</SCRIPT>
                                </TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
                          <TR>
                            <TD><IMG height=5 
                              src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/t.gif" 
                              width=1 border=0></TD></TR>
                          <TR height=1>
                            <TD bgColor=#ff9900><IMG height=1 
                              src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/t.gif" 
                              width=1></TD></TR>
                          <TR id=1922318_h0 bgColor=#fef9e7>
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD bgColor=white><A name=xx1922318xx></A><IMG 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/news_general.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD class=messagetitle width="100%"><A 
                                class=messagetitle id=DynMessLink 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?df=100&amp;forumid=172077&amp;select=1922318#xx1922318xx" 
                                name=1922318><B>play wave without 
                                Sleep()</B></A></TD>
                                <TD vAlign=bottom noWrap><A 
                                href="http://www.codeproject.com/script/profile/whos_who.asp?id=2424257"><IMG 
                                title="Click for User Profile" height=15 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/userinfo.gif" 
                                width=14 border=0></A>&nbsp;</TD>
                                <TD noWrap width=140><FONT 
                                class=messagetitle><B>ohh</B>&nbsp;</FONT></TD>
                                <TD style="WIDTH: 9em" noWrap align=right 
                                width=120><FONT class=messagetitle><B>4:08 4 Mar 
                                '07</B>&nbsp;</FONT></TD></TR></TBODY></TABLE></TD></TR>
                          <TR id=1922318_h1 style="DISPLAY: none">
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD><IMG 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/news_blank.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD width="100%" bgColor=#d5eaff>
                                <TABLE cellSpacing=5 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD>
                                <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD colSpan=2><FONT 
                                class=messagecontent>Hi..<BR>Can it Play Wave 
                                files Without Sleep function,<BR>because i dont 
                                know wave file time length?<BR>Can it Playing 
                                Wave files by order&#65311; <BR><BR>
                                <DIV 
                                class=ForumSig>xxxxxxxx</DIV><BR>&nbsp;</FONT></TD></TR>
                                <TR vAlign=top>
                                <TD class=messagetitle>[<A 
                                title="Reply to this current thread" 
                                href="http://www.codeproject.com/script/comments/user_reply.asp?main=/audio/CWaveBox.asp&amp;df=100&amp;forumid=172077&amp;select=1922318">Reply</A> 
                                | <A 
                                title="Email a reply to the author of this message" 
                                href="http://www.codeproject.com/script/comments/user_mail.asp?main=/audio/CWaveBox.asp&amp;df=100&amp;forumid=172077&amp;select=1922318">Email</A> 
                                | <A 
                                title="View only messages within this thread" 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?df=100&amp;tid=1922318&amp;forumid=172077&amp;select=1922318#xx1922318xx">View 
                                Thread</A> | <A 
                                title="Get the URL for this message" 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?msg=1922318#xx1922318xx">PermaLink</A> 
                                | <A title="Go to Thread Start" 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?msg=1922318#xx1922318xx">Go 
                                to Thread Start</A>]</TD>
                                <TD class=messagetitle align=right>
                                <SCRIPT language=Javascript>MsgVoteForm(2424257,1922318);</SCRIPT>
                                </TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
                          <TR>
                            <TD><IMG height=6 
                              src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/t.gif" 
                              width=1 border=0></TD></TR>
                          <TR id=1922548_h0 bgColor=#fef9e7>
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD bgColor=white><A name=xx1922548xx></A><IMG 
                                height=1 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/ind.gif" 
                                width=18><IMG 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/news_general.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD class=messagetitle width="100%"><A 
                                class=messagetitle id=DynMessLink 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?df=100&amp;forumid=172077&amp;select=1922548#xx1922548xx" 
                                name=1922548>Re: play wave without 
                                Sleep()</A></TD>
                                <TD vAlign=bottom noWrap><A 
                                href="http://www.codeproject.com/script/profile/whos_who.asp?id=866695"><IMG 
                                title="Click for User Profile" height=15 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/userinfo.gif" 
                                width=14 border=0></A>&nbsp;</TD>
                                <TD noWrap width=140><FONT 
                                class=messagetitle>zenith__&nbsp;</FONT></TD>
                                <TD style="WIDTH: 9em" noWrap align=right 
                                width=120><FONT class=messagetitle>10:27 4 Mar 
                                '07&nbsp;</FONT></TD></TR></TBODY></TABLE></TD></TR>
                          <TR id=1922548_h1 style="DISPLAY: none">
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD><IMG height=1 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/ind.gif" 
                                width=18><IMG 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/news_blank.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD width="100%" bgColor=#d5eaff>
                                <TABLE cellSpacing=5 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD>
                                <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD colSpan=2><FONT class=messagecontent>Hi 
                                ohh,<BR><BR>that 10 ms sleep is used in queue, 
                                when thread continuously search for new message 
                                to play wave. <BR>When you assigned Play() 
                                message, thread starts playing that wave in real 
                                time.<BR>There is no latency in playing, because 
                                each wave chunk is more than 10 ms in 
                                length.<BR>There is no latency even when 10+ 
                                waves are played mixed or together.<BR>You can 
                                freely consider 10 milliseconds as no 
                                sleep.<BR>If you remove that you'll see your CPU 
                                at 100%.<BR>It is the same as using while(1){}; 
                                without Sleep(10); <BR>10 ms is minimal value 
                                used by Sleep, you can use Sleep(1); but that is 
                                the same 10 ms.<BR>Try run while(1){}; with 
                                Sleep(10); and you'll see your processor at 1-5% 
                                speed.<BR>Yes, you can play waves by 
                                order.<BR>Load() waves and play it one by one. 
                                There is no check to see if some wave is 
                                finished so you will start another wave when 
                                previous is finished. (by hand<IMG 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/smiley_wink.gif" 
                                align=absMiddle>)<BR>Sorry, CWaveBox is not 
                                written as 'classic player'. It is written as 
                                WaveBox triggered<BR>by program or game action 
                                with possibility to play 1+ wave at 
                                time.<BR><BR>Regards.<BR>Zen_<BR><BR><BR><BR>&nbsp;</FONT></TD></TR>
                                <TR vAlign=top>
                                <TD class=messagetitle>[<A 
                                title="Reply to this current thread" 
                                href="http://www.codeproject.com/script/comments/user_reply.asp?main=/audio/CWaveBox.asp&amp;df=100&amp;forumid=172077&amp;select=1922548">Reply</A> 
                                | <A 
                                title="Email a reply to the author of this message" 
                                href="http://www.codeproject.com/script/comments/user_mail.asp?main=/audio/CWaveBox.asp&amp;df=100&amp;forumid=172077&amp;select=1922548">Email</A> 
                                | <A 
                                title="View only messages within this thread" 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?df=100&amp;tid=1922318&amp;forumid=172077&amp;select=1922548#xx1922548xx">View 
                                Thread</A> | <A 
                                title="Get the URL for this message" 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?msg=1922548#xx1922548xx">PermaLink</A> 
                                | <A title="Go to Thread Start" 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?msg=1922318#xx1922318xx">Go 
                                to Thread Start</A>]</TD>
                                <TD class=messagetitle align=right>
                                <SCRIPT language=Javascript>MsgVoteForm(866695,1922548);</SCRIPT>
                                </TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
                          <TR>
                            <TD><IMG height=6 
                              src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/t.gif" 
                              width=1 border=0></TD></TR>
                          <TR id=1923725_h0 bgColor=#fef9e7>
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD bgColor=white><A name=xx1923725xx></A><IMG 
                                height=1 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/ind.gif" 
                                width=36><IMG 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/news_general.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD class=messagetitle width="100%"><A 
                                class=messagetitle id=DynMessLink 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?df=100&amp;forumid=172077&amp;select=1923725#xx1923725xx" 
                                name=1923725>Re: play wave without 
                                Sleep()</A></TD>
                                <TD vAlign=bottom noWrap><A 
                                href="http://www.codeproject.com/script/profile/whos_who.asp?id=1118132"><IMG 
                                title="Click for User Profile" height=15 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/userinfo.gif" 
                                width=14 border=0></A>&nbsp;</TD>
                                <TD noWrap width=140><FONT 
                                class=messagetitle>as2&nbsp;</FONT></TD>
                                <TD style="WIDTH: 9em" noWrap align=right 
                                width=120><FONT class=messagetitle>9:37 5 Mar 
                                '07&nbsp;</FONT></TD></TR></TBODY></TABLE></TD></TR>
                          <TR id=1923725_h1 style="DISPLAY: none">
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD><IMG height=1 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/ind.gif" 
                                width=36><IMG 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/news_blank.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD width="100%" bgColor=#d5eaff>
                                <TABLE cellSpacing=5 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD>
                                <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD colSpan=2><FONT class=messagecontent>I try 
                                to make use of u work ...<BR>First of all - not 
                                bad code, it helps me to get stared from 
                                somewhere.<BR>(Still struggeling to understand 
                                the need of some code, starting from 
                                CWaveBox::allocateBlocks - why it is made so 
                                complex)<BR>I'm using it for my pda project. It 
                                worked nice for while but now run into some 
                                memory allocation anomalies ... what ever, I'll 
                                work on that...<BR><BR>U can use Sleep(0) on 
                                that as far it gives process execution away to 
                                another thread for 100ms at least anyway (look 
                                CeSetThreadQuantum().<BR>If u like, more elegant 
                                solution would be using event trigering 
                                mechanism<BR>there. <BR>&nbsp;</FONT></TD></TR>
                                <TR vAlign=top>
                                <TD class=messagetitle>[<A 
                                title="Reply to this current thread" 
                                href="http://www.codeproject.com/script/comments/user_reply.asp?main=/audio/CWaveBox.asp&amp;df=100&amp;forumid=172077&amp;select=1923725">Reply</A> 
                                | <A 
                                title="Email a reply to the author of this message" 
                                href="http://www.codeproject.com/script/comments/user_mail.asp?main=/audio/CWaveBox.asp&amp;df=100&amp;forumid=172077&amp;select=1923725">Email</A> 
                                | <A 
                                title="View only messages within this thread" 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?df=100&amp;tid=1922318&amp;forumid=172077&amp;select=1923725#xx1923725xx">View 
                                Thread</A> | <A 
                                title="Get the URL for this message" 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?msg=1923725#xx1923725xx">PermaLink</A> 
                                | <A title="Go to Thread Start" 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?msg=1922318#xx1922318xx">Go 
                                to Thread Start</A>]</TD>
                                <TD class=messagetitle align=right>
                                <SCRIPT language=Javascript>MsgVoteForm(1118132,1923725);</SCRIPT>
                                </TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
                          <TR>
                            <TD><IMG height=5 
                              src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/t.gif" 
                              width=1 border=0></TD></TR>
                          <TR height=1>
                            <TD bgColor=#ff9900><IMG height=1 
                              src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/t.gif" 
                              width=1></TD></TR>
                          <TR id=1761104_h0 bgColor=#fef9e7>
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD bgColor=white><A name=xx1761104xx></A><IMG 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/news_general.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD class=messagetitle width="100%"><A 
                                class=messagetitle id=DynMessLink 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?df=100&amp;forumid=172077&amp;select=1761104#xx1761104xx" 
                                name=1761104><B>MP3 ?</B></A></TD>
                                <TD vAlign=bottom noWrap><A 
                                href="http://www.codeproject.com/script/profile/whos_who.asp?id=2038162"><IMG 
                                title="Click for User Profile" height=15 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/userinfo.gif" 
                                width=14 border=0></A>&nbsp;</TD>
                                <TD noWrap width=140><FONT 
                                class=messagetitle><B>_Stilgar_</B>&nbsp;</FONT></TD>
                                <TD style="WIDTH: 9em" noWrap align=right 
                                width=120><FONT class=messagetitle><B>10:44 16 
                                Nov 
                            '06</B>&nbsp;</FONT></TD></TR></TBODY></TABLE></TD></TR>
                          <TR id=1761104_h1 style="DISPLAY: none">
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD><IMG 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/news_blank.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD width="100%" bgColor=#d5eaff>
                                <TABLE cellSpacing=5 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD>
                                <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD colSpan=2><FONT 
                                class=messagecontent>Hi,<BR><BR>Can you give a 
                                hint on what would be the best approach to use 
                                your code to play MP3 
                                files/streams?<BR><BR>Stilgar. 
                                <BR>&nbsp;</FONT></TD></TR>
                                <TR vAlign=top>
                                <TD class=messagetitle>[<A 
                                title="Reply to this current thread" 
                                href="http://www.codeproject.com/script/comments/user_reply.asp?main=/audio/CWaveBox.asp&amp;df=100&amp;forumid=172077&amp;select=1761104">Reply</A> 
                                | <A 
                                title="Email a reply to the author of this message" 
                                href="http://www.codeproject.com/script/comments/user_mail.asp?main=/audio/CWaveBox.asp&amp;df=100&amp;forumid=172077&amp;select=1761104">Email</A> 
                                | <A 
                                title="View only messages within this thread" 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?df=100&amp;tid=1761104&amp;forumid=172077&amp;select=1761104#xx1761104xx">View 
                                Thread</A> | <A 
                                title="Get the URL for this message" 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?msg=1761104#xx1761104xx">PermaLink</A> 
                                | <A title="Go to Thread Start" 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?msg=1761104#xx1761104xx">Go 
                                to Thread Start</A>]</TD>
                                <TD class=messagetitle align=right>
                                <SCRIPT language=Javascript>MsgVoteForm(2038162,1761104);</SCRIPT>
                                </TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
                          <TR>
                            <TD><IMG height=6 
                              src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/t.gif" 
                              width=1 border=0></TD></TR>
                          <TR id=1762387_h0 bgColor=#fef9e7>
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD bgColor=white><A name=xx1762387xx></A><IMG 
                                height=1 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/ind.gif" 
                                width=18><IMG 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/news_general.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD class=messagetitle width="100%"><A 
                                class=messagetitle id=DynMessLink 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?df=100&amp;forumid=172077&amp;select=1762387#xx1762387xx" 
                                name=1762387>Re: MP3 ?</A></TD>
                                <TD vAlign=bottom noWrap><A 
                                href="http://www.codeproject.com/script/profile/whos_who.asp?id=866695"><IMG 
                                title="Click for User Profile" height=15 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/userinfo.gif" 
                                width=14 border=0></A>&nbsp;</TD>
                                <TD noWrap width=140><FONT 
                                class=messagetitle>zenith__&nbsp;</FONT></TD>
                                <TD style="WIDTH: 9em" noWrap align=right 
                                width=120><FONT class=messagetitle>3:49 17 Nov 
                                '06&nbsp;</FONT></TD></TR></TBODY></TABLE></TD></TR>
                          <TR id=1762387_h1 style="DISPLAY: none">
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD><IMG height=1 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/ind.gif" 
                                width=18><IMG 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/news_blank.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD width="100%" bgColor=#d5eaff>
                                <TABLE cellSpacing=5 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD>
                                <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD colSpan=2><FONT 
                                class=messagecontent>Hi,<BR><BR>there is no 
                                clear approach, because there is no mp3 decoder 
                                code/call <IMG 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/smiley_wink.gif" 
                                align=absMiddle>.<BR><BR>I assume that you've 
                                mp3 decoder? (be careful - its licenced by 
                                Fraunhofer Institute)<BR>If not, you can browse 
                                google and there are few mpeg123 decoder 
                                implementations, but they are all libs or c-like 
                                and its not easy to use it.<BR>But, if you 
                                decide to implement mp3 decoder you should call 
                                decompress method somwhere inside of play 
                                thread, before wave is sent to the 
                                queue.<BR><BR>btw. If you need CD or better, 
                                best compressed sound quality consider vorbis's 
                                ogg format. It is even better of mp3 and check 
                                this out ..its FREE. (BSD licence).<BR><BR>Good 
                                luck<IMG 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/smiley_wink.gif" 
                                align=absMiddle><BR><BR>Regards.<BR>Zenith__ 
                                <BR>&nbsp;</FONT></TD></TR>
                                <TR vAlign=top>
                                <TD class=messagetitle>[<A 
                                title="Reply to this current thread" 
                                href="http://www.codeproject.com/script/comments/user_reply.asp?main=/audio/CWaveBox.asp&amp;df=100&amp;forumid=172077&amp;select=1762387">Reply</A> 
                                | <A 
                                title="Email a reply to the author of this message" 
                                href="http://www.codeproject.com/script/comments/user_mail.asp?main=/audio/CWaveBox.asp&amp;df=100&amp;forumid=172077&amp;select=1762387">Email</A> 
                                | <A 
                                title="View only messages within this thread" 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?df=100&amp;tid=1761104&amp;forumid=172077&amp;select=1762387#xx1762387xx">View 
                                Thread</A> | <A 
                                title="Get the URL for this message" 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?msg=1762387#xx1762387xx">PermaLink</A> 
                                | <A title="Go to Thread Start" 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?msg=1761104#xx1761104xx">Go 
                                to Thread Start</A>]</TD>
                                <TD class=messagetitle align=right>
                                <SCRIPT language=Javascript>MsgVoteForm(866695,1762387);</SCRIPT>
                                </TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
                          <TR>
                            <TD><IMG height=5 
                              src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/t.gif" 
                              width=1 border=0></TD></TR>
                          <TR height=1>
                            <TD bgColor=#ff9900><IMG height=1 
                              src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/t.gif" 
                              width=1></TD></TR>
                          <TR id=1613781_h0 bgColor=#fef9e7>
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD bgColor=white><A name=xx1613781xx></A><IMG 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/news_question.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD class=messagetitle width="100%"><A 
                                class=messagetitle id=DynMessLink 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?df=100&amp;forumid=172077&amp;select=1613781#xx1613781xx" 
                                name=1613781><B>Playing PCM files</B></A></TD>
                                <TD vAlign=bottom noWrap><A 
                                href="http://www.codeproject.com/script/profile/whos_who.asp?id=2765619"><IMG 
                                title="Click for User Profile" height=15 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/userinfo.gif" 
                                width=14 border=0></A>&nbsp;</TD>
                                <TD noWrap width=140><FONT 
                                class=messagetitle><B>t4urean</B>&nbsp;</FONT></TD>
                                <TD style="WIDTH: 9em" noWrap align=right 
                                width=120><FONT class=messagetitle><B>8:36 7 Aug 
                                '06</B>&nbsp;</FONT></TD></TR></TBODY></TABLE></TD></TR>
                          <TR id=1613781_h1 style="DISPLAY: none">
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD><IMG 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/news_blank.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD width="100%" bgColor=#d5eaff>
                                <TABLE cellSpacing=5 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD>
                                <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD colSpan=2><FONT class=messagecontent>Hi I 
                                have project in which I am reading pcm data from 
                                a Radio receiver through method calls from its 
                                API provided.<BR><BR>can I use your project in 
                                my C# code to play that continuous stream of 
                                data.<BR><BR>If not how can you provide C# 
                                version of you code please???<BR><BR>Thanks 
                                <BR><BR>
                                <DIV class=ForumSig>o O º(`'·.,(`'·., 
                                &#9734;,.·''),.·'')º O o° <BR>»·'"`»* *&#9734; t4ure4n &#9734;* 
                                *«·'"`« <BR>°o O º(,.·''(,.·'' &#9734;`'·.,)`'·.,)º O 
                                o°</DIV><BR>&nbsp;</FONT></TD></TR>
                                <TR vAlign=top>
                                <TD class=messagetitle>[<A 
                                title="Reply to this current thread" 
                                href="http://www.codeproject.com/script/comments/user_reply.asp?main=/audio/CWaveBox.asp&amp;df=100&amp;forumid=172077&amp;select=1613781">Reply</A> 
                                | <A 
                                title="Email a reply to the author of this message" 
                                href="http://www.codeproject.com/script/comments/user_mail.asp?main=/audio/CWaveBox.asp&amp;df=100&amp;forumid=172077&amp;select=1613781">Email</A> 
                                | <A 
                                title="View only messages within this thread" 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?df=100&amp;tid=1613781&amp;forumid=172077&amp;select=1613781#xx1613781xx">View 
                                Thread</A> | <A 
                                title="Get the URL for this message" 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?msg=1613781#xx1613781xx">PermaLink</A> 
                                | <A title="Go to Thread Start" 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?msg=1613781#xx1613781xx">Go 
                                to Thread Start</A>]</TD>
                                <TD class=messagetitle align=right>
                                <SCRIPT language=Javascript>MsgVoteForm(2765619,1613781);</SCRIPT>
                                </TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
                          <TR>
                            <TD><IMG height=6 
                              src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/t.gif" 
                              width=1 border=0></TD></TR>
                          <TR id=1722168_h0 bgColor=#fef9e7>
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD bgColor=white><A name=xx1722168xx></A><IMG 
                                height=1 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/ind.gif" 
                                width=18><IMG 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/news_answer.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD class=messagetitle width="100%"><A 
                                class=messagetitle id=DynMessLink 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?df=100&amp;forumid=172077&amp;select=1722168#xx1722168xx" 
                                name=1722168>Re: Playing PCM files</A></TD>
                                <TD vAlign=bottom noWrap><A 
                                href="http://www.codeproject.com/script/profile/whos_who.asp?id=866695"><IMG 
                                title="Click for User Profile" height=15 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/userinfo.gif" 
                                width=14 border=0></A>&nbsp;</TD>
                                <TD noWrap width=140><FONT 
                                class=messagetitle>zenith__&nbsp;</FONT></TD>
                                <TD style="WIDTH: 9em" noWrap align=right 
                                width=120><FONT class=messagetitle>10:08 22 Oct 
                                '06&nbsp;</FONT></TD></TR></TBODY></TABLE></TD></TR>
                          <TR id=1722168_h1 style="DISPLAY: none">
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD><IMG height=1 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/ind.gif" 
                                width=18><IMG 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/news_blank.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD width="100%" bgColor=#d5eaff>
                                <TABLE cellSpacing=5 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD>
                                <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD colSpan=2><FONT class=messagecontent>Hi, 
                                <BR>I'm not too much into radio streaming, but 
                                if it's PCM strem, yes I think you can play it 
                                with the CWaveBox class. (but take care how to 
                                read/adjust header block)<BR>btw. You can make 
                                dll in C++ and call Play method from C# 'unsafe' 
                                blocks.<BR>Sorry, I've no time explaining how to 
                                build dll in C++ and call methods from it in 
                                C#.<BR>There is a bunch of tutorials on that 
                                topic here, at codeproject.<BR>Yes, you can use 
                                my code, no mather if is for comercial or 
                                educative purposes. <BR>Good Luck. <IMG 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/smiley_rolleyes.gif" 
                                align=absMiddle><BR><BR>&nbsp;</FONT></TD></TR>
                                <TR vAlign=top>
                                <TD class=messagetitle>[<A 
                                title="Reply to this current thread" 
                                href="http://www.codeproject.com/script/comments/user_reply.asp?main=/audio/CWaveBox.asp&amp;df=100&amp;forumid=172077&amp;select=1722168">Reply</A> 
                                | <A 
                                title="Email a reply to the author of this message" 
                                href="http://www.codeproject.com/script/comments/user_mail.asp?main=/audio/CWaveBox.asp&amp;df=100&amp;forumid=172077&amp;select=1722168">Email</A> 
                                | <A 
                                title="View only messages within this thread" 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?df=100&amp;tid=1613781&amp;forumid=172077&amp;select=1722168#xx1722168xx">View 
                                Thread</A> | <A 
                                title="Get the URL for this message" 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?msg=1722168#xx1722168xx">PermaLink</A> 
                                | <A title="Go to Thread Start" 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?msg=1613781#xx1613781xx">Go 
                                to Thread Start</A>]</TD>
                                <TD class=messagetitle align=right>Score: 2.0 (1 
                                vote).
                                <SCRIPT language=Javascript>MsgVoteForm(866695,1722168);</SCRIPT>
                                 
                                </TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
                          <TR>
                            <TD><IMG height=5 
                              src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/t.gif" 
                              width=1 border=0></TD></TR>
                          <TR height=1>
                            <TD bgColor=#ff9900><IMG height=1 
                              src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/t.gif" 
                              width=1></TD></TR>
                          <TR id=1290879_h0 bgColor=#fef9e7>
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD bgColor=white><A name=xx1290879xx></A><IMG 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/news_general.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD class=messagetitle width="100%"><A 
                                class=messagetitle id=DynMessLink 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?df=100&amp;forumid=172077&amp;select=1290879#xx1290879xx" 
                                name=1290879><B>Same Sample Multiple Times at 
                                the Same Time?</B></A></TD>
                                <TD vAlign=bottom noWrap><A 
                                href="http://www.codeproject.com/script/profile/whos_who.asp?id=2132719"><IMG 
                                title="Click for User Profile" height=15 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/userinfo.gif" 
                                width=14 border=0></A>&nbsp;</TD>
                                <TD noWrap width=140><FONT 
                                class=messagetitle><B>redfish34</B>&nbsp;</FONT></TD>
                                <TD style="WIDTH: 9em" noWrap align=right 
                                width=120><FONT class=messagetitle><B>6:15 28 
                                Nov 
                            '05</B>&nbsp;</FONT></TD></TR></TBODY></TABLE></TD></TR>
                          <TR id=1290879_h1 style="DISPLAY: none">
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD><IMG 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/news_blank.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD width="100%" bgColor=#d5eaff>
                                <TABLE cellSpacing=5 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD>
                                <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD colSpan=2><FONT class=messagecontent>Zenith, 
                                thank you for this informative article. You have 
                                presented the basics of a mixer to handle 
                                playback of multiple samples. A music sampler or 
                                sequencer is just around the corner! <BR><BR>I 
                                did notice that in the demo app one is unable to 
                                play the same sample multiple times at the same 
                                time. If i play the "system_alert.wav" sample 5 
                                times spaced 500 ms, it appears the first 
                                instance of the sample plays to completion, but 
                                the later 4 instances stutter, where the 
                                previous instance of the sample is cut off when 
                                the next instance starts to play. So you get a 
                                playback that sounds like "System Alert... 
                                Syste... Syste... Syste... System Alert". What 
                                code modification would need to be done to 
                                achieve proper 
                                playback?<BR><BR><BR>&nbsp;</FONT></TD></TR>
                                <TR vAlign=top>
                                <TD class=messagetitle>[<A 
                                title="Reply to this current thread" 
                                href="http://www.codeproject.com/script/comments/user_reply.asp?main=/audio/CWaveBox.asp&amp;df=100&amp;forumid=172077&amp;select=1290879">Reply</A> 
                                | <A 
                                title="Email a reply to the author of this message" 
                                href="http://www.codeproject.com/script/comments/user_mail.asp?main=/audio/CWaveBox.asp&amp;df=100&amp;forumid=172077&amp;select=1290879">Email</A> 
                                | <A 
                                title="View only messages within this thread" 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?df=100&amp;tid=1290879&amp;forumid=172077&amp;select=1290879#xx1290879xx">View 
                                Thread</A> | <A 
                                title="Get the URL for this message" 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?msg=1290879#xx1290879xx">PermaLink</A> 
                                | <A title="Go to Thread Start" 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?msg=1290879#xx1290879xx">Go 
                                to Thread Start</A>]</TD>
                                <TD class=messagetitle align=right>Score: 2.0 (1 
                                vote).
                                <SCRIPT language=Javascript>MsgVoteForm(2132719,1290879);</SCRIPT>
                                 
                                </TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
                          <TR>
                            <TD><IMG height=5 
                              src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/t.gif" 
                              width=1 border=0></TD></TR>
                          <TR height=1>
                            <TD bgColor=#ff9900><IMG height=1 
                              src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/t.gif" 
                              width=1></TD></TR>
                          <TR id=1248562_h0 bgColor=#fef9e7>
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD bgColor=white><A name=xx1248562xx></A><IMG 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/news_general.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD class=messagetitle width="100%"><A 
                                class=messagetitle id=DynMessLink 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?df=100&amp;forumid=172077&amp;select=1248562#xx1248562xx" 
                                name=1248562><B>Hi, zenith__!</B></A></TD>
                                <TD vAlign=bottom noWrap><A 
                                href="http://www.codeproject.com/script/profile/whos_who.asp?id=2342233"><IMG 
                                title="Click for User Profile" height=15 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/userinfo.gif" 
                                width=14 border=0></A>&nbsp;</TD>
                                <TD noWrap width=140><FONT 
                                class=messagetitle><B>lsm_may</B>&nbsp;</FONT></TD>
                                <TD style="WIDTH: 9em" noWrap align=right 
                                width=120><FONT class=messagetitle><B>22:07 8 
                                Oct 
                            '05</B>&nbsp;</FONT></TD></TR></TBODY></TABLE></TD></TR>
                          <TR id=1248562_h1 style="DISPLAY: none">
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD><IMG 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/news_blank.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD width="100%" bgColor=#d5eaff>
                                <TABLE cellSpacing=5 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD>
                                <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD colSpan=2><FONT 
                                class=messagecontent>:laugh::laugh:Hi, 
                                zenith__!<BR><BR>I'm a newer to C++.Your article 
                                is very important to me, but I have a problem 
                                with your code. After I downloaded your code and 
                                executed it on my computer, I couldn't get any 
                                sound. Can you tell me the reason and teach me 
                                to use it correctly.<BR><BR>Thank you very much 
                                and looking forward to your reply! <BR><BR>May 
                                from China<BR>&nbsp;</FONT></TD></TR>
                                <TR vAlign=top>
                                <TD class=messagetitle>[<A 
                                title="Reply to this current thread" 
                                href="http://www.codeproject.com/script/comments/user_reply.asp?main=/audio/CWaveBox.asp&amp;df=100&amp;forumid=172077&amp;select=1248562">Reply</A> 
                                | <A 
                                title="Email a reply to the author of this message" 
                                href="http://www.codeproject.com/script/comments/user_mail.asp?main=/audio/CWaveBox.asp&amp;df=100&amp;forumid=172077&amp;select=1248562">Email</A> 
                                | <A 
                                title="View only messages within this thread" 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?df=100&amp;tid=1248562&amp;forumid=172077&amp;select=1248562#xx1248562xx">View 
                                Thread</A> | <A 
                                title="Get the URL for this message" 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?msg=1248562#xx1248562xx">PermaLink</A> 
                                | <A title="Go to Thread Start" 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?msg=1248562#xx1248562xx">Go 
                                to Thread Start</A>]</TD>
                                <TD class=messagetitle align=right>Score: 2.0 (1 
                                vote).
                                <SCRIPT language=Javascript>MsgVoteForm(2342233,1248562);</SCRIPT>
                                 
                                </TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
                          <TR>
                            <TD><IMG height=6 
                              src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/t.gif" 
                              width=1 border=0></TD></TR>
                          <TR id=1250317_h0 bgColor=#fef9e7>
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD bgColor=white><A name=xx1250317xx></A><IMG 
                                height=1 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/ind.gif" 
                                width=18><IMG 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/news_general.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD class=messagetitle width="100%"><A 
                                class=messagetitle id=DynMessLink 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?df=100&amp;forumid=172077&amp;select=1250317#xx1250317xx" 
                                name=1250317>Re: Hi, zenith__!</A></TD>
                                <TD vAlign=bottom noWrap><A 
                                href="http://www.codeproject.com/script/profile/whos_who.asp?id=866695"><IMG 
                                title="Click for User Profile" height=15 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/userinfo.gif" 
                                width=14 border=0></A>&nbsp;</TD>
                                <TD noWrap width=140><FONT 
                                class=messagetitle>zenith__&nbsp;</FONT></TD>
                                <TD style="WIDTH: 9em" noWrap align=right 
                                width=120><FONT class=messagetitle>9:02 11 Oct 
                                '05&nbsp;</FONT></TD></TR></TBODY></TABLE></TD></TR>
                          <TR id=1250317_h1 style="DISPLAY: none">
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD><IMG height=1 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/ind.gif" 
                                width=18><IMG 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/news_blank.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD width="100%" bgColor=#d5eaff>
                                <TABLE cellSpacing=5 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD>
                                <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD colSpan=2><FONT class=messagecontent>Hi 
                                May,<BR><BR>you can try to reconfigure sound 
                                card.<BR><BR>btw. this is not example for new 
                                comers, try with something else <IMG 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/smiley_wink.gif" 
                                align=absMiddle>.<BR><BR>Regards.<BR>zenith__ 
                                <BR>&nbsp;</FONT></TD></TR>
                                <TR vAlign=top>
                                <TD class=messagetitle>[<A 
                                title="Reply to this current thread" 
                                href="http://www.codeproject.com/script/comments/user_reply.asp?main=/audio/CWaveBox.asp&amp;df=100&amp;forumid=172077&amp;select=1250317">Reply</A> 
                                | <A 
                                title="Email a reply to the author of this message" 
                                href="http://www.codeproject.com/script/comments/user_mail.asp?main=/audio/CWaveBox.asp&amp;df=100&amp;forumid=172077&amp;select=1250317">Email</A> 
                                | <A 
                                title="View only messages within this thread" 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?df=100&amp;tid=1248562&amp;forumid=172077&amp;select=1250317#xx1250317xx">View 
                                Thread</A> | <A 
                                title="Get the URL for this message" 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?msg=1250317#xx1250317xx">PermaLink</A> 
                                | <A title="Go to Thread Start" 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?msg=1248562#xx1248562xx">Go 
                                to Thread Start</A>]</TD>
                                <TD class=messagetitle align=right>
                                <SCRIPT language=Javascript>MsgVoteForm(866695,1250317);</SCRIPT>
                                </TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
                          <TR>
                            <TD><IMG height=5 
                              src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/t.gif" 
                              width=1 border=0></TD></TR>
                          <TR height=1>
                            <TD bgColor=#ff9900><IMG height=1 
                              src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/t.gif" 
                              width=1></TD></TR>
                          <TR id=1085211_h0 bgColor=#fef9e7>
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD bgColor=white><A name=xx1085211xx></A><IMG 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/news_general.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD class=messagetitle width="100%"><A 
                                class=messagetitle id=DynMessLink 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?df=100&amp;forumid=172077&amp;select=1085211#xx1085211xx" 
                                name=1085211><B>Good Job</B></A></TD>
                                <TD vAlign=bottom noWrap><A 
                                href="http://www.codeproject.com/script/profile/whos_who.asp?id=145753"><IMG 
                                title="Click for User Profile" height=15 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/userinfo.gif" 
                                width=14 border=0></A>&nbsp;</TD>
                                <TD noWrap width=140><FONT 
                                class=messagetitle><B>smesser</B>&nbsp;</FONT></TD>
                                <TD style="WIDTH: 9em" noWrap align=right 
                                width=120><FONT class=messagetitle><B>12:59 16 
                                Apr 
                            '05</B>&nbsp;</FONT></TD></TR></TBODY></TABLE></TD></TR>
                          <TR id=1085211_h1 style="DISPLAY: none">
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD><IMG 
                                src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/news_blank.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD width="100%" bgColor=#d5eaff>
                                <TABLE cellSpacing=5 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD>
                                <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD colSpan=2><FONT class=messagecontent>I was 
                                just about to have to tackle this problem and I 
                                ran across this article.<BR><BR>I made one 
                                slight change and used an enum to play the 
                                sounds.<BR><BR>I changed the parameter for the 
                                Load function to CString for ease of use 
                                <BR>with MFC and in your example I added the 
                                following which to me helped to <BR>see what 
                                sounds were being played.<BR><BR><CODE><PRE><BR>int Load( CString file );<BR><BR>enum SOUNDS { TWILIGHTZONE, BADFEELING, WOLFCALL, HEART, GUSTINGWIND, NEWMAIL, DUMBBUTT, PORKY, ALERT }; <BR><BR>for( int k = 0; k &lt; 1000; k += 50 )<BR>{<BR>   w.Play( HEART );<BR>   Sleep( 300 + 1000 - k );<BR><BR>   if( !( k % 200 ) )         <BR>      w.Play( WOLFCALL );<BR><BR>   if( k == 400 || k == 700 ) <BR>      w.Play( BADFEELING ); <BR><BR>   if( k == 950 )<BR>   { <BR>       w.Play( GUSTINGWIND ); <BR>       Sleep( 500 );<BR>   }<BR>}<BR></PRE></CODE><BR>&nbsp;</FONT></TD></TR>
                                <TR vAlign=top>
                                <TD class=messagetitle>[<A 
                                title="Reply to this current thread" 
                                href="http://www.codeproject.com/script/comments/user_reply.asp?main=/audio/CWaveBox.asp&amp;df=100&amp;forumid=172077&amp;select=1085211">Reply</A> 
                                | <A 
                                title="Email a reply to the author of this message" 
                                href="http://www.codeproject.com/script/comments/user_mail.asp?main=/audio/CWaveBox.asp&amp;df=100&amp;forumid=172077&amp;select=1085211">Email</A> 
                                | <A 
                                title="View only messages within this thread" 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?df=100&amp;tid=1085211&amp;forumid=172077&amp;select=1085211#xx1085211xx">View 
                                Thread</A> | <A 
                                title="Get the URL for this message" 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?msg=1085211#xx1085211xx">PermaLink</A> 
                                | <A title="Go to Thread Start" 
                                href="http://www.codeproject.com/audio/CWaveBox.asp?msg=1085211#xx1085211xx">Go 
                                to Thread Start</A>]</TD>
                                <TD class=messagetitle align=right>Score: 4.0 (1 
                                vote).
                                <SCRIPT language=Javascript>MsgVoteForm(145753,1085211);</SCRIPT>
                                 
                                </TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
                          <TR>
                            <TD><IMG height=5 
                              src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/t.gif" 
                              width=1 border=0></TD></TR></TBODY></TABLE></TD></TR>
                    <TR bgColor=#fbedbb>
                      <TD>
                        <TABLE cellPadding=2 width="100%">
                          <TBODY>
                          <TR>
                            <TD class=messagetitle>Last Visit: 4:07 Saturday 
                              29th September, 2007</TD>
                            <TD noWrap align=right><FONT 
                              class=messagetitle><SPAN 
                              class=HoverLink>First</SPAN> <SPAN 
                              class=HoverLink>Prev</SPAN> <A class=HoverLink 
                              href="http://www.codeproject.com/audio/CWaveBox.asp?df=100&amp;forumid=172077&amp;fr=26" 
                              name=HoverNL>Next</A> <SPAN 
                              class=HoverLink>&nbsp;&nbsp;&nbsp;&nbsp;</SPAN> 
                              </FONT></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></DIV>
            <P class=smallText><IMG 
            src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/news_general.gif" 
            align=absMiddle> General comment &nbsp;&nbsp; <IMG 
            src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/news_info.gif" 
            align=absMiddle> News / Info &nbsp;&nbsp; <IMG 
            src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/news_question.gif" 
            align=absMiddle> Question &nbsp;&nbsp; <IMG 
            src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/news_answer.gif" 
            align=absMiddle> Answer &nbsp;&nbsp; <IMG 
            src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/news_game.gif" 
            align=absMiddle> Joke / Game &nbsp;&nbsp; <IMG 
            src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/news_sticky.gif" 
            align=absMiddle> Admin message</P><BR>
            <TABLE cellSpacing=5 width="100%">
              <TBODY>
              <TR vAlign=top>
                <TD class=smallText>Updated: 15 Apr 2005 </TD>
                <TD class=SmallText align=right>Article content copyright 
                  zenith__, 2005<BR>everything else Copyright © <A 
                  href="mailto:webmaster@codeproject.com">CodeProject</A>, 
                  1999-2007</A>. <BR>Web16 | <A 
                  href="http://www.codeproject.com/info/MediaKit">Advertise on 
                  The Code Project</A> | <A 
                  href="http://www.codeproject.com/info/privacy.asp">Privacy</A> 
                </TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE>
      <SCRIPT 
      src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/front.asp" 
      type=text/javascript></SCRIPT>
      <BR>
      <CENTER>
      <TABLE cellSpacing=0 cellPadding=0 width="95%" border=0>
        <TBODY>
        <TR>
          <TD bgColor=#ff9900 height=1><IMG height=1 
            src="CWaveBox - WAI wrapper for playing PCM multiwaves, useful in game development - The Code Project - Audio and Video_files/space.gif"></TD></TR>
        <TR>
          <TD align=middle><FONT size=1><A 
            href="http://www.theultimatetoolbox.com/">The Ultimate Toolbox</A>  
            <A href="http://aspalliance.com/">ASP Alliance</A>  <A 
            href="http://www.developerfusion.co.uk/">Developer Fusion</A>  <A 
            href="http://www.developersdex.com/">Developersdex</A>  <A 
            href="http://www.devguru.com/">DevGuru</A>  <A 
            href="http://www.programmersheaven.com/">Programmers Heaven</A>  <A 
            href="http://www.planet-source-code.com/">Planet Source Code</A>  
            <A href="http://www.tek-tips.com/">Tek-Tips Forums</A>  
        </FONT></TD></TR></TBODY></TABLE></CENTER></TR></TBODY></TABLE></BODY></HTML>

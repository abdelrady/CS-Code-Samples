#include<iostream.h>
#include<conio.h>
#include<stdlib.h>
#include<dos.h>
#include<stdio.h>
int a,x,y,q=0,col,row;
char k[50][50]={{'Ü','Ü','Ü','Ü','Ü','Ü','Ü','Ü','Ü','Ü','Ü','Ü'},{'Ü','.','.','.','Ü','.','.','.','.','.','.','Ü'},{'.','.','Ü','.','Ü','.','Ü','Ü','Ü','Ü','.','Ü'},{'Ü','Ü','Ü','.','Ü','.','.','.','.','Ü','.','Ü'},{'Ü','.','.','.','.','Ü','Ü','Ü','.','Ü','.','.'},{'Ü','Ü','Ü','Ü','.','Ü','.','Ü','.','Ü','.','Ü'},{'Ü','.','.','Ü','.','Ü','.','Ü','.','Ü','.','Ü'},{'Ü','Ü','.','Ü','.','Ü','.','Ü','.','Ü','.','Ü'},{'Ü','.','.','.','.','.','.','.','.','Ü','.','Ü'},{'Ü','Ü','Ü','Ü','Ü','Ü','.','Ü','Ü','Ü','.','Ü'},{'Ü','.','.','.','.','.','.','Ü','.','.','.', 'Ü'},{'Ü','Ü','Ü','Ü','Ü','Ü','Ü','Ü','Ü','Ü','Ü','Ü'}};;
char ad[4]={31,30,17,16};
//---------------------------------------DRAW-------------------------------//
void draw(int c){
int i,j;
gotoxy(2,2);
for(i=0;i<row;i++){cout<<endl;
	for(j=0;j<col;j++)
	if(k[i][j]=='*'&&i==y&&j==x)
	{textcolor(c);cprintf("  %c",k[i][j]);}
	else cout<<"  "<<k[i][j];
}}
//---------------------------------------MAZE------------------------------//
void maze(){
int i;
	a=1+rand()%4;
	if(a==1)
		{y=0;i=col-1;}
	else if(a==2)
		{y=row-1;i=col-1;}
	else if(a==3)
		{x=col-1;i=row-1;}
	else if(a==4)
		{x=0;i=row-1;}
	for(;i>=0;i--)
		if(a==1||a==2)
			{if(k[y][i]=='.'&&i!=0&&i!=col-1)
				{x=i;break;}}
		else if(k[i][x]=='.'&&i!=0&&i!=row-1)
				{y=i; break;}
k[y][x]='*';
draw(13);
}
//---------------------------------------GEN-------------------------------//
void gen(){
if(x<col&&y<row&&x>=0&&y>=0)
	{gotoxy(63,2+q%24);cout<<"("<<x<<" , "<<y<<")  "<<ad[a-1];q++;
	if(a==1){
		if(k[y][x-1]=='Ü')
			if(k[y+1][x]=='Ü')
				if(k[y][x+1]=='Ü')
					{a=2; y--;}
				else {a=4; x++;}
			else y++;
		else {x--; a=3;}
	}else if(a==2){
		if(k[y][x+1]=='Ü')
			if(k[y-1][x]=='Ü')
				if(k[y][x-1]=='Ü')
					{a=1; y++;}
				else {a=3; x--;}
			else y--;
		else {x++; a=4;}
	}else if(a==3){
	if(k[y-1][x]=='Ü')
		if(k[y][x-1]=='Ü')
			if(k[y+1][x]=='Ü')
				{a=4; x++;}
			else {a=1; y++;}
		else x--;
	else {y--; a=2;}
	}else if(a==4){
		if(k[y+1][x]=='Ü')
			if(k[y][x+1]=='Ü')
				if(k[y-1][x]=='Ü')
					{a=3; x--;}
				else {a=2; y--;}
			else x++;
		else {y++; a=1;}
	}
	k[y][x]='*';
	draw(-12);
	delay(700);
	draw(14);
	gen();
}}
//////////////////////////////////MAIN////////////////////////////////////////
void main(){
int s,i,j;
clrscr();
srand(time(NULL));
cout<<"\n\n\n\n     ****** **  ** ******      **    **   ***   ****** ******\n";
cout<<"     ****** **  ** ******      ***  ***  *****  ****** ******\n";
cout<<"       **   **  ** **          ******** **   **     ** **\n";
cout<<"       **   ****** ******      ** ** ** *******   **   ******\n";
cout<<"       **   ****** **          **    ** ******* **     **    \n";
cout<<"       **   **  ** ******      **    ** **   ** ****** ******\n";
cout<<"       **   **  ** ******      **    ** **   ** ****** ******\n";
cout<<"\n\n\n\t\t\t\tPrees any key ";
getch();  clrscr();
cout<<"Enter Column  Row : ";
cin>>col>>row;
for(i=0;i<row;i++)
	for(j=0;j<col;j++)
		{s=1+rand()%2;
		if(s==1)k[i][j]='Ü';
		else k[i][j]='.';
}
draw(15);
maze();//x=0;y=2;a=4;
gotoxy(58,1);cout<<"The bigan is "<<ad[a-1]<<" ("<<x<<","<<y<<")";
gen();
getch();
}